!function(e){function i(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}var r={};i.m=e,i.c=r,i.d=function(e,r,o){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,r){if(1&r&&(e=i(e)),8&r||4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var s in e)i.d(o,s,(function(i){return e[i]}).bind(null,s));return o},i.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},i.p=__GLOBAL__.cdn,i(i.s=9)}([function(e,i,r){"use strict";(function(e){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}/*!
             * vuex v3.6.2
             * (c) 2021 Evan You
             * @license MIT
             */ function s(e,i){if(void 0===i&&(i=[]),null===e||"object"!==o(e))return e;var r,a,c=(r=i,a=function(i){return i.original===e},r.filter(a)[0]);if(c)return c.copy;var l=Array.isArray(e)?[]:{};return i.push({original:e,copy:l}),Object.keys(e).forEach(function(r){l[r]=s(e[r],i)}),l}function a(e,i){Object.keys(e).forEach(function(r){return i(e[r],r)})}function c(e){return null!==e&&"object"===o(e)}function l(e,i,r){return 0>i.indexOf(e)&&(r&&r.prepend?i.unshift(e):i.push(e)),function(){var r=i.indexOf(e);-1<r&&i.splice(r,1)}}function u(e,i){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var r=e.state;f(e,r,[],e._modules.root,!0),h(e,r,i)}function h(e,i,r){var o=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var s=e._wrappedGetters,c={};a(s,function(i,r){var o,s;c[r]=(o=i,s=e,function(){return o(s)}),Object.defineProperty(e.getters,r,{get:function(){return e._vm[r]},enumerable:!0})});var l=O.config.silent;O.config.silent=!0,e._vm=new O({data:{$$state:i},computed:c}),O.config.silent=l,e.strict&&function(e){e._vm.$watch(function(){return this._data.$$state},function(){},{deep:!0,sync:!0})}(e),o&&(r&&e._withCommit(function(){o._data.$$state=null}),O.nextTick(function(){return o.$destroy()}))}function f(e,i,r,o,s){var a=!r.length,c=e._modules.getNamespace(r);if(o.namespaced&&(e._modulesNamespaceMap[c],e._modulesNamespaceMap[c]=o),!a&&!s){var l=d(i,r.slice(0,-1)),u=r[r.length-1];e._withCommit(function(){O.set(l,u,o.state)})}var h,g,v,m,$,y=o.context=(h=e,g=c,v=r,Object.defineProperties($={dispatch:(m=""===g)?h.dispatch:function(e,i,r){var o=p(e,i,r),s=o.payload,a=o.options,c=o.type;return a&&a.root||(c=g+c),h.dispatch(c,s)},commit:m?h.commit:function(e,i,r){var o=p(e,i,r),s=o.payload,a=o.options,c=o.type;a&&a.root||(c=g+c),h.commit(c,s,a)}},{getters:{get:m?function(){return h.getters}:function(){return function(e,i){if(!e._makeLocalGettersCache[i]){var r={},o=i.length;Object.keys(e.getters).forEach(function(s){s.slice(0,o)===i&&Object.defineProperty(r,s.slice(o),{get:function(){return e.getters[s]},enumerable:!0})}),e._makeLocalGettersCache[i]=r}return e._makeLocalGettersCache[i]}(h,g)}},state:{get:function(){return d(h.state,v)}}}),$);o.forEachMutation(function(i,r){!function(e,i,r,o){(e._mutations[i]||(e._mutations[i]=[])).push(function(i){r.call(e,o.state,i)})}(e,c+r,i,y)}),o.forEachAction(function(i,r){var o;!function(e,i,r,o){(e._actions[i]||(e._actions[i]=[])).push(function(i){var s,a=r.call(e,{dispatch:o.dispatch,commit:o.commit,getters:o.getters,state:o.state,rootGetters:e.getters,rootState:e.state},i);return(s=a)&&"function"==typeof s.then||(a=Promise.resolve(a)),e._devtoolHook?a.catch(function(i){throw e._devtoolHook.emit("vuex:error",i),i}):a})}(e,i.root?r:c+r,i.handler||i,y)}),o.forEachGetter(function(i,r){var o,s,a,l;o=e,s=c+r,a=i,l=y,o._wrappedGetters[s]||(o._wrappedGetters[s]=function(e){return a(l.state,l.getters,e.state,e.getters)})}),o.forEachChild(function(o,a){f(e,i,r.concat(a),o,s)})}function d(e,i){return i.reduce(function(e,i){return e[i]},e)}function p(e,i,r){return c(e)&&e.type&&(r=i,i=e,e=e.type),{type:e,payload:i,options:r}}function g(e){O&&e===O||function(e){function i(){var e=this.$options;e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}if(2<=+e.version.split(".")[0])e.mixin({beforeCreate:i});else{var r=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[i].concat(e.init):i,r.call(this,e)}}}(O=e)}function v(e){var i;return Array.isArray(i=e)||c(i)?Array.isArray(e)?e.map(function(e){return{key:e,val:e}}):Object.keys(e).map(function(i){return{key:i,val:e[i]}}):[]}function m(e){return function(i,r){return"string"==typeof i?"/"!==i.charAt(i.length-1)&&(i+="/"):(r=i,i=""),e(i,r)}}function $(e,i,r){return e._modulesNamespaceMap[r]}function y(e,i,r){var o=r?e.groupCollapsed:e.group;try{o.call(e,i)}catch(s){e.log(i)}}function b(e){try{e.groupEnd()}catch(i){e.log("—— log end ——")}}function x(){var e=new Date;return" @ "+C(e.getHours(),2)+":"+C(e.getMinutes(),2)+":"+C(e.getSeconds(),2)+"."+C(e.getMilliseconds(),3)}function C(e,i){var r;return Array((r=i-e.toString().length)+1).join("0")+e}r.d(i,"b",function(){return L}),r.d(i,"c",function(){return D}),r.d(i,"d",function(){return E});var _=("undefined"==typeof window?void 0===e?{}:e:window).__VUE_DEVTOOLS_GLOBAL_HOOK__,w=function(e,i){this.runtime=i,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=("function"==typeof r?r():r)||{}},S={namespaced:{configurable:!0}};S.namespaced.get=function(){return!!this._rawModule.namespaced},w.prototype.addChild=function(e,i){this._children[e]=i},w.prototype.removeChild=function(e){delete this._children[e]},w.prototype.getChild=function(e){return this._children[e]},w.prototype.hasChild=function(e){return e in this._children},w.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},w.prototype.forEachChild=function(e){a(this._children,e)},w.prototype.forEachGetter=function(e){this._rawModule.getters&&a(this._rawModule.getters,e)},w.prototype.forEachAction=function(e){this._rawModule.actions&&a(this._rawModule.actions,e)},w.prototype.forEachMutation=function(e){this._rawModule.mutations&&a(this._rawModule.mutations,e)},Object.defineProperties(w.prototype,S);var T=function(e){this.register([],e,!1)};T.prototype.get=function(e){return e.reduce(function(e,i){return e.getChild(i)},this.root)},T.prototype.getNamespace=function(e){var i=this.root;return e.reduce(function(e,r){return e+((i=i.getChild(r)).namespaced?r+"/":"")},"")},T.prototype.update=function(e){!function e(i,r,o){if(r.update(o),o.modules)for(var s in o.modules){if(!r.getChild(s))return;e(i.concat(s),r.getChild(s),o.modules[s])}}([],this.root,e)},T.prototype.register=function(e,i,r){var o=this;void 0===r&&(r=!0);var s=new w(i,r);0===e.length?this.root=s:this.get(e.slice(0,-1)).addChild(e[e.length-1],s),i.modules&&a(i.modules,function(i,s){o.register(e.concat(s),i,r)})},T.prototype.unregister=function(e){var i=this.get(e.slice(0,-1)),r=e[e.length-1],o=i.getChild(r);o&&o.runtime&&i.removeChild(r)},T.prototype.isRegistered=function(e){var i=this.get(e.slice(0,-1)),r=e[e.length-1];return!!i&&i.hasChild(r)};var O,k=function(e){var i=this;void 0===e&&(e={}),!O&&"undefined"!=typeof window&&window.Vue&&g(window.Vue);var r=e.plugins;void 0===r&&(r=[]);var o=e.strict;void 0===o&&(o=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new T(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new O,this._makeLocalGettersCache=Object.create(null);var s=this,a=this.dispatch,c=this.commit;this.dispatch=function(e,i){return a.call(s,e,i)},this.commit=function(e,i,r){return c.call(s,e,i,r)},this.strict=o;var l,u=this._modules.root.state;f(this,u,[],this._modules.root),h(this,u),r.forEach(function(e){return e(i)}),(void 0===e.devtools?O.config.devtools:e.devtools)&&(l=this,_&&(l._devtoolHook=_,_.emit("vuex:init",l),_.on("vuex:travel-to-state",function(e){l.replaceState(e)}),l.subscribe(function(e,i){_.emit("vuex:mutation",e,i)},{prepend:!0}),l.subscribeAction(function(e,i){_.emit("vuex:action",e,i)},{prepend:!0})))},P={state:{configurable:!0}};P.state.get=function(){return this._vm._data.$$state},P.state.set=function(){},k.prototype.commit=function(e,i,r){var o=this,s=p(e,i,r),a=s.type,c=s.payload,l=(s.options,{type:a,payload:c}),u=this._mutations[a];u&&(this._withCommit(function(){u.forEach(function(e){e(c)})}),this._subscribers.slice().forEach(function(e){return e(l,o.state)}))},k.prototype.dispatch=function(e,i){var r=this,o=p(e,i),s=o.type,a=o.payload,c={type:s,payload:a},l=this._actions[s];if(l){try{this._actionSubscribers.slice().filter(function(e){return e.before}).forEach(function(e){return e.before(c,r.state)})}catch(u){}var h=1<l.length?Promise.all(l.map(function(e){return e(a)})):l[0](a);return new Promise(function(e,i){h.then(function(i){try{r._actionSubscribers.filter(function(e){return e.after}).forEach(function(e){return e.after(c,r.state)})}catch(o){}e(i)},function(e){try{r._actionSubscribers.filter(function(e){return e.error}).forEach(function(i){return i.error(c,r.state,e)})}catch(o){}i(e)})})}},k.prototype.subscribe=function(e,i){return l(e,this._subscribers,i)},k.prototype.subscribeAction=function(e,i){return l("function"==typeof e?{before:e}:e,this._actionSubscribers,i)},k.prototype.watch=function(e,i,r){var o=this;return this._watcherVM.$watch(function(){return e(o.state,o.getters)},i,r)},k.prototype.replaceState=function(e){var i=this;this._withCommit(function(){i._vm._data.$$state=e})},k.prototype.registerModule=function(e,i,r){void 0===r&&(r={}),"string"==typeof e&&(e=[e]),this._modules.register(e,i),f(this,this.state,e,this._modules.get(e),r.preserveState),h(this,this.state)},k.prototype.unregisterModule=function(e){var i=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=d(i.state,e.slice(0,-1));O.delete(r,e[e.length-1])}),u(this)},k.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},k.prototype.hotUpdate=function(e){this._modules.update(e),u(this,!0)},k.prototype._withCommit=function(e){var i=this._committing;this._committing=!0,e(),this._committing=i},Object.defineProperties(k.prototype,P);var E=m(function(e,i){var r={};return v(i).forEach(function(i){var o=i.key,s=i.val;r[o]=function(){var i=this.$store.state,r=this.$store.getters;if(e){var o=$(this.$store,0,e);if(!o)return;i=o.context.state,r=o.context.getters}return"function"==typeof s?s.call(this,i,r):i[s]},r[o].vuex=!0}),r}),A=m(function(e,i){var r={};return v(i).forEach(function(i){var o=i.key,s=i.val;r[o]=function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];var o=this.$store.commit;if(e){var a=$(this.$store,0,e);if(!a)return;o=a.context.commit}return"function"==typeof s?s.apply(this,[o].concat(i)):o.apply(this.$store,[s].concat(i))}}),r}),D=m(function(e,i){var r={};return v(i).forEach(function(i){var o=i.key,s=i.val;s=e+s,r[o]=function(){if(!e||$(this.$store,0,e))return this.$store.getters[s]},r[o].vuex=!0}),r}),L=m(function(e,i){var r={};return v(i).forEach(function(i){var o=i.key,s=i.val;r[o]=function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];var o=this.$store.dispatch;if(e){var a=$(this.$store,0,e);if(!a)return;o=a.context.dispatch}return"function"==typeof s?s.apply(this,[o].concat(i)):o.apply(this.$store,[s].concat(i))}}),r});i.a={Store:k,install:g,version:"3.6.2",mapState:E,mapMutations:A,mapGetters:D,mapActions:L,createNamespacedHelpers:function(e){return{mapState:E.bind(null,e),mapGetters:D.bind(null,e),mapMutations:A.bind(null,e),mapActions:L.bind(null,e)}},createLogger:function(e){void 0===e&&(e={});var i=e.collapsed;void 0===i&&(i=!0);var r=e.filter;void 0===r&&(r=function(){return!0});var o=e.transformer;void 0===o&&(o=function(e){return e});var a=e.mutationTransformer;void 0===a&&(a=function(e){return e});var c=e.actionFilter;void 0===c&&(c=function(){return!0});var l=e.actionTransformer;void 0===l&&(l=function(e){return e});var u=e.logMutations;void 0===u&&(u=!0);var h=e.logActions;void 0===h&&(h=!0);var f=e.logger;return void 0===f&&(f=console),function(e){var d=s(e.state);void 0===f||(u&&e.subscribe(function(e,c){var l=s(c);if(r(e,d,l)){var u=x(),h=a(e);y(f,"mutation "+e.type+u,i),f.log("%c prev state","color: #9E9E9E; font-weight: bold",o(d)),f.log("%c mutation","color: #03A9F4; font-weight: bold",h),f.log("%c next state","color: #4CAF50; font-weight: bold",o(l)),b(f)}d=l}),h&&e.subscribeAction(function(e,r){if(c(e,r)){var o=x(),s=l(e);y(f,"action "+e.type+o,i),f.log("%c action","color: #03A9F4; font-weight: bold",s),b(f)}}))}}}}).call(this,r(4))},function(e){e.exports=function(e,i){return i||(i=document),i.querySelector(e)},e.exports.all=function(e,i){i||(i=document);var r=i.querySelectorAll(e);return Array.prototype.slice.call(r)}},function(e,i,r){"use strict";function o(e,i){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function e(i,r){if(i){if("string"==typeof i)return s(i,r);var o=Object.prototype.toString.call(i).slice(8,-1);return"Object"===o&&i.constructor&&(o=i.constructor.name),"Map"===o||"Set"===o?Array.from(i):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?s(i,r):void 0}}(e))||i&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){u=!0,c=e},f:function(){try{l||null==r.return||r.return()}finally{if(u)throw c}}}}function s(e,i){(null==i||i>e.length)&&(i=e.length);for(var r=0,o=Array(i);r<i;r++)o[r]=e[r];return o}r.d(i,"d",function(){return a}),r.d(i,"e",function(){return c}),r.d(i,"a",function(){return l}),r.d(i,"b",function(){return u}),r.d(i,"c",function(){return h});var a=function(e,i){if(e instanceof Array){var r,s=o(e);try{for(s.s();!(r=s.n()).done;)r.value.classList.add(i)}catch(a){s.e(a)}finally{s.f()}}else e.classList.add(i)},c=function(e,i){if(e instanceof Array){var r,s=o(e);try{for(s.s();!(r=s.n()).done;)r.value.classList.remove(i)}catch(a){s.e(a)}finally{s.f()}}else e.classList.remove(i)},l=function(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return"$"+(+e/100).toLocaleString("en-EN",{minimumFractionDigits:i})},u=function(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3;return(""+e).replace(/([.](?:jpe?g|png))/,"_".concat(i,"x$1"))},h=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/^[\s_]+|[\s_]+$/g,"").replace(/[_\s]+/g," ").replace(/^[a-z]/,function(e){return e.toUpperCase()})}},function(e,i,r){var o=Math.abs,s=Math.max,a=Math.min,c=Math.floor,l=Math.pow;(function(e){function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */ function h(e,i){var r=e.canvas,o=i.targetCanvas,s=o.getContext("2d");s.translate(0,o.height),s.scale(1,-1);var a=r.height-o.height;s.drawImage(r,0,a,o.width,o.height,0,0,o.width,o.height)}function f(e,i){var r=i.targetCanvas.getContext("2d"),o=i.destinationWidth,s=i.destinationHeight,a=o*s*4,c=new Uint8Array(this.imageBuffer,0,a),l=new Uint8ClampedArray(this.imageBuffer,0,a);e.readPixels(0,0,o,s,e.RGBA,e.UNSIGNED_BYTE,c);var u=new ImageData(l,o,s);r.putImageData(u,0,0)}var d,p,g,v,m,$,y,b,x,C,_,w,S,T,O,k,P,E,A,D,L,j,I,F,M,R,B,z,U,Y,N,W,V,H,X,G,q,K,Z,J,Q,tt,te,tn,ti,tr,to,ts,ta,tc,tl,tu,th,tf,td,tp,tg,tv,tm,t$,ty,t8,tb,tx,tC,t_,tw,tS,tT,t0,tO,tk,tP,tE,tA,tD,tL,tj,tI,tF,tM,tR,t3,tB,t1,t2,tz,tU,tY,t9,tN,tW,tV,tH,tX,t4,tG,t6,t7,t5,tq,tK,tZ,tJ,tQ,et,ee,en,ei,er,eo,es,ea,ec,el,eu,eh,ef,ed,ep,eg,ev,em,e$,ey,e8,eb,ex,eC,e_,ew,eS,eT,e0,eO,ek,eP,eE,eA,eD,eL,ej,eI,eF,eM,eR,e3,eB,e1,e2,ez,eU,eY,e9,eN,eW,eV,eH,eX,e4,eG,e6,e7,e5,eq=Math.round,eK=Math.ceil,eZ=Math.tan,eJ=Math.sin,eQ=Math.cos,nt=Math.PI,ne=Math.atan2,nn=Math.sqrt,ni=ni||{version:"5.2.4"};if(i.fabric=ni,"undefined"!=typeof document&&"undefined"!=typeof window)ni.document=document instanceof("undefined"==typeof HTMLDocument?Document:HTMLDocument)?document:document.implementation.createHTMLDocument(""),ni.window=window;else{var nr=new(r(18)).JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;ni.document=nr.document,ni.jsdomImplForWrapper=r(19).implForWrapper,ni.nodeCanvas=r(20).Canvas,ni.window=nr,DOMParser=ni.window.DOMParser}ni.isTouchSupported="ontouchstart"in ni.window||"ontouchstart"in ni.document||ni.window&&ni.window.navigator&&0<ni.window.navigator.maxTouchPoints,ni.isLikelyNode=void 0!==e&&"undefined"==typeof window,ni.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path",],ni.DPI=96,ni.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",ni.commaWsp="(?:\\s+,?\\s*|,\\s*)",ni.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,ni.reNonWord=/[ \n\.,;!\?\-]/,ni.fontPaths={},ni.iMatrix=[1,0,0,1,0,0],ni.svgNS="http://www.w3.org/2000/svg",ni.perfLimitSizeTotal=2097152,ni.maxCacheSideLimit=4096,ni.minCacheSideLimit=256,ni.charWidthsCache={},ni.textureSize=2048,ni.disableStyleCopyPaste=!1,ni.enableGLFiltering=!0,ni.devicePixelRatio=ni.window.devicePixelRatio||ni.window.webkitDevicePixelRatio||ni.window.mozDevicePixelRatio||1,ni.browserShadowBlurConstant=1,ni.arcToSegmentsCache={},ni.boundsOfCurveCache={},ni.cachesBoundsOfCurve=!0,ni.forceGLPutImageData=!1,ni.initFilterBackend=function(){return ni.enableGLFiltering&&ni.isWebglSupported&&ni.isWebglSupported(ni.textureSize)?(console.log("max texture size: "+ni.maxTextureSize),new ni.WebglFilterBackend({tileSize:ni.textureSize})):ni.Canvas2dFilterBackend?new ni.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=ni),function(){function e(e,i){if(this.__eventListeners[e]){var r=this.__eventListeners[e];i?r[r.indexOf(i)]=!1:ni.util.array.fill(r,!1)}}function i(e,i){var r=(function(){i.apply(this,arguments),this.off(e,r)}).bind(this);this.on(e,r)}ni.Observable={fire:function(e,i){if(!this.__eventListeners)return this;var r=this.__eventListeners[e];if(!r)return this;for(var o=0,s=r.length;o<s;o++)r[o]&&r[o].call(this,i||{});return this.__eventListeners[e]=r.filter(function(e){return!1!==e}),this},on:function(e,i){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var r in e)this.on(r,e[r]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(i);return this},once:function(e,r){if(1===arguments.length)for(var o in e)i.call(this,o,e[o]);else i.call(this,e,r);return this},off:function(i,r){if(!this.__eventListeners)return this;if(0===arguments.length)for(i in this.__eventListeners)e.call(this,i);else if(1===arguments.length&&"object"===u(arguments[0]))for(var o in i)e.call(this,o,i[o]);else e.call(this,i,r);return this}}}(),ni.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var e=0,i=arguments.length;e<i;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(e,i,r){var o=this._objects;return r?o[i]=e:o.splice(i,0,e),this._onObjectAdded&&this._onObjectAdded(e),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var e,i=this._objects,r=!1,o=0,s=arguments.length;o<s;o++)-1!==(e=i.indexOf(arguments[o]))&&(r=!0,i.splice(e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[o]));return this.renderOnAddRemove&&r&&this.requestRenderAll(),this},forEachObject:function(e,i){for(var r=this.getObjects(),o=0,s=r.length;o<s;o++)e.call(i,r[o],o,r);return this},getObjects:function(e){return void 0===e?this._objects.concat():this._objects.filter(function(i){return i.type===e})},item:function(e){return this._objects[e]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e,i){return -1<this._objects.indexOf(e)||!!i&&this._objects.some(function(i){return"function"==typeof i.contains&&i.contains(e,!0)})},complexity:function(){return this._objects.reduce(function(e,i){return e+(i.complexity?i.complexity():0)},0)}},ni.CommonMethods={_setOptions:function(e){for(var i in e)this.set(i,e[i])},_initGradient:function(e,i){!e||!e.colorStops||e instanceof ni.Gradient||this.set(i,new ni.Gradient(e))},_initPattern:function(e,i,r){!e||!e.source||e instanceof ni.Pattern?r&&r():this.set(i,new ni.Pattern(e,r))},_setObject:function(e){for(var i in e)this._set(i,e[i])},set:function(e,i){return"object"===u(e)?this._setObject(e):this._set(e,i),this},_set:function(e,i){this[e]=i},toggle:function(e){var i=this.get(e);return"boolean"==typeof i&&this.set(e,!i),this},get:function(e){return this[e]}},d=i,p=Math.hypot,g=ne,v=l,m=nt/180,$=nt/2,ni.util={cos:function(e){if(0===e)return 1;0>e&&(e=-e);var i=e/$;return 1==i||3==i?0:2==i?-1:eQ(e)},sin:function(e){if(0===e)return 0;var i=e/$,r=1;return 0>e&&(r=-1),1==i?r:2==i?0:3==i?-r:eJ(e)},removeFromArray:function(e,i){var r=e.indexOf(i);return -1!==r&&e.splice(r,1),e},getRandomInt:function(e,i){return c(Math.random()*(i-e+1))+e},degreesToRadians:function(e){return e*m},radiansToDegrees:function(e){return e/m},rotatePoint:function(e,i,r){var o=new ni.Point(e.x-i.x,e.y-i.y),s=ni.util.rotateVector(o,r);return new ni.Point(s.x,s.y).addEquals(i)},rotateVector:function(e,i){var r=ni.util.sin(i),o=ni.util.cos(i);return{x:e.x*o-e.y*r,y:e.x*r+e.y*o}},createVector:function(e,i){return new ni.Point(i.x-e.x,i.y-e.y)},calcAngleBetweenVectors:function(e,i){return Math.acos((e.x*i.x+e.y*i.y)/(p(e.x,e.y)*p(i.x,i.y)))},getHatVector:function(e){return new ni.Point(e.x,e.y).multiply(1/p(e.x,e.y))},getBisector:function(e,i,r){var o=ni.util.createVector(e,i),s=ni.util.createVector(e,r),a=ni.util.calcAngleBetweenVectors(o,s),c=a*(0===ni.util.calcAngleBetweenVectors(ni.util.rotateVector(o,a),s)?1:-1)/2;return{vector:ni.util.getHatVector(ni.util.rotateVector(o,c)),angle:a}},projectStrokeOnPoints:function(e,i,r){var o=[],s=i.strokeWidth/2,a=i.strokeUniform?new ni.Point(1/i.scaleX,1/i.scaleY):new ni.Point(1,1),c=function(e){var i=s/p(e.x,e.y);return new ni.Point(e.x*i*a.x,e.y*i*a.y)};return 1>=e.length||e.forEach(function(l,u){var h,f,d=new ni.Point(l.x,l.y);0===u?(f=e[u+1],h=r?c(ni.util.createVector(f,d)).addEquals(d):e[e.length-1]):u===e.length-1?(h=e[u-1],f=r?c(ni.util.createVector(h,d)).addEquals(d):e[0]):(h=e[u-1],f=e[u+1]);var g,v,m=ni.util.getBisector(d,h,f),$=m.vector,y=m.angle;return"miter"===i.strokeLineJoin&&(g=-s/eJ(y/2),p((v=new ni.Point($.x*g*a.x,$.y*g*a.y)).x,v.y)/s<=i.strokeMiterLimit)?(o.push(d.add(v)),void o.push(d.subtract(v))):(g=-s*Math.SQRT2,v=new ni.Point($.x*g*a.x,$.y*g*a.y),o.push(d.add(v)),void o.push(d.subtract(v)))}),o},transformPoint:function(e,i,r){return r?new ni.Point(i[0]*e.x+i[2]*e.y,i[1]*e.x+i[3]*e.y):new ni.Point(i[0]*e.x+i[2]*e.y+i[4],i[1]*e.x+i[3]*e.y+i[5])},makeBoundingBoxFromPoints:function(e,i){if(i)for(var r=0;r<e.length;r++)e[r]=ni.util.transformPoint(e[r],i);var o=[e[0].x,e[1].x,e[2].x,e[3].x],s=ni.util.array.min(o),a=ni.util.array.max(o),c=[e[0].y,e[1].y,e[2].y,e[3].y],l=ni.util.array.min(c);return{left:s,top:l,width:a-s,height:ni.util.array.max(c)-l}},invertTransform:function(e){var i=1/(e[0]*e[3]-e[1]*e[2]),r=[i*e[3],-i*e[1],-i*e[2],i*e[0]],o=ni.util.transformPoint({x:e[4],y:e[5]},r,!0);return r[4]=-o.x,r[5]=-o.y,r},toFixed:function(e,i){return parseFloat((+e).toFixed(i))},parseUnit:function(e,i){var r=/\D{0,2}$/.exec(e),o=parseFloat(e);switch(i||(i=ni.Text.DEFAULT_SVG_FONT_SIZE),r[0]){case"mm":return o*ni.DPI/25.4;case"cm":return o*ni.DPI/2.54;case"in":return o*ni.DPI;case"pt":return o*ni.DPI/72;case"pc":return o*ni.DPI/72*12;case"em":return o*i;default:return o}},falseFunction:function(){return!1},getKlass:function(e,i){return e=ni.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),ni.util.resolveNamespace(i)[e]},getSvgAttributes:function(e){var i=["instantiated_by_use","style","id","class"];return"linearGradient"===e?i=i.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]):"radialGradient"===e?i=i.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]):"stop"===e&&(i=i.concat(["offset","stop-color","stop-opacity"])),i},resolveNamespace:function(e){if(!e)return ni;var i,r=e.split("."),o=r.length,s=d||ni.window;for(i=0;i<o;++i)s=s[r[i]];return s},loadImage:function(e,i,r,o){if(e){var s=ni.util.createImage(),a=function(){i&&i.call(r,s,!1),s=s.onload=s.onerror=null};s.onload=a,s.onerror=function(){ni.log("Error loading "+s.src),i&&i.call(r,null,!0),s=s.onload=s.onerror=null},0!==e.indexOf("data")&&null!=o&&(s.crossOrigin=o),"data:image/svg"===e.substring(0,14)&&(s.onload=null,ni.util.loadImageInDom(s,a)),s.src=e}else i&&i.call(r,e)},loadImageInDom:function(e,i){var r=ni.document.createElement("div");r.style.width=r.style.height="1px",r.style.left=r.style.top="-100%",r.style.position="absolute",r.appendChild(e),ni.document.querySelector("body").appendChild(r),e.onload=function(){i(),r.parentNode.removeChild(r),r=null}},enlivenObjects:function(e,i,r,o){function s(){++c===l&&i&&i(a.filter(function(e){return e}))}var a=[],c=0,l=(e=e||[]).length;return l?void e.forEach(function(e,i){e&&e.type?ni.util.getKlass(e.type,r).fromObject(e,function(r,c){c||(a[i]=r),o&&o(e,r,c),s()}):s()}):void(i&&i(a))},enlivenObjectEnlivables:function(e,i,r){var o=ni.Object.ENLIVEN_PROPS.filter(function(i){return!!e[i]});ni.util.enlivenObjects(o.map(function(i){return e[i]}),function(e){var s={};o.forEach(function(r,o){s[r]=e[o],i&&(i[r]=e[o])}),r&&r(s)})},enlivenPatterns:function(e,i){function r(){++s===a&&i&&i(o)}var o=[],s=0,a=(e=e||[]).length;return a?void e.forEach(function(e,i){e&&e.source?new ni.Pattern(e,function(e){o[i]=e,r()}):(o[i]=e,r())}):void(i&&i(o))},groupSVGElements:function(e,i,r){var o;return e&&1===e.length?(void 0!==r&&(e[0].sourcePath=r),e[0]):(i&&(i.width&&i.height?i.centerPoint={x:i.width/2,y:i.height/2}:(delete i.width,delete i.height)),o=new ni.Group(e,i),void 0!==r&&(o.sourcePath=r),o)},populateWithProperties:function(e,i,r){if(r&&Array.isArray(r))for(var o=0,s=r.length;o<s;o++)r[o]in e&&(i[r[o]]=e[r[o]])},createCanvasElement:function(){return ni.document.createElement("canvas")},copyCanvasElement:function(e){var i=ni.util.createCanvasElement();return i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0),i},toDataURL:function(e,i,r){return e.toDataURL("image/"+i,r)},createImage:function(){return ni.document.createElement("img")},multiplyTransformMatrices:function(e,i,r){return[e[0]*i[0]+e[2]*i[1],e[1]*i[0]+e[3]*i[1],e[0]*i[2]+e[2]*i[3],e[1]*i[2]+e[3]*i[3],r?0:e[0]*i[4]+e[2]*i[5]+e[4],r?0:e[1]*i[4]+e[3]*i[5]+e[5]]},qrDecompose:function(e){var i=g(e[1],e[0]),r=v(e[0],2)+v(e[1],2),o=nn(r),s=(e[0]*e[3]-e[2]*e[1])/o,a=g(e[0]*e[2]+e[1]*e[3],r);return{angle:i/m,scaleX:o,scaleY:s,skewX:a/m,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return ni.iMatrix.concat();var i=ni.util.degreesToRadians(e.angle),r=ni.util.cos(i),o=ni.util.sin(i);return[r,o,-o,r,0,0]},calcDimensionsMatrix:function(e){var i=void 0===e.scaleX?1:e.scaleX,r=void 0===e.scaleY?1:e.scaleY,o=[e.flipX?-i:i,0,0,e.flipY?-r:r,0,0],s=ni.util.multiplyTransformMatrices,a=ni.util.degreesToRadians;return e.skewX&&(o=s(o,[1,0,eZ(a(e.skewX)),1],!0)),e.skewY&&(o=s(o,[1,eZ(a(e.skewY)),0,1],!0)),o},composeMatrix:function(e){var i=[1,0,0,1,e.translateX||0,e.translateY||0],r=ni.util.multiplyTransformMatrices;return e.angle&&(i=r(i,ni.util.calcRotateMatrix(e))),(1!==e.scaleX||1!==e.scaleY||e.skewX||e.skewY||e.flipX||e.flipY)&&(i=r(i,ni.util.calcDimensionsMatrix(e))),i},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},isTransparent:function(e,i,r,o){0<o&&(i>o?i-=o:i=0,r>o?r-=o:r=0);var s,a=!0,c=e.getImageData(i,r,2*o||1,2*o||1),l=c.data.length;for(s=3;s<l&&0!=(a=0>=c.data[s]);s+=4);return c=null,a},parsePreserveAspectRatioAttribute:function(e){var i,r="meet",o=e.split(" ");return o&&o.length&&("meet"!==(r=o.pop())&&"slice"!==r?(i=r,r="meet"):o.length&&(i=o.pop())),{meetOrSlice:r,alignX:"none"===i?"none":i.slice(1,4),alignY:"none"===i?"none":i.slice(5,8)}},clearFabricFontCache:function(e){(e=(e||"").toLowerCase())?ni.charWidthsCache[e]&&delete ni.charWidthsCache[e]:ni.charWidthsCache={}},limitDimsByArea:function(e,i){var r=nn(i*e),o=c(i/r);return{x:c(r),y:o}},capValue:function(e,i,r){return s(e,a(i,r))},findScaleToFit:function(e,i){return a(i.width/e.width,i.height/e.height)},findScaleToCover:function(e,i){return s(i.width/e.width,i.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map(function(e){return ni.util.toFixed(e,ni.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(e,i){var r=ni.util.invertTransform(i),o=ni.util.multiplyTransformMatrices(r,e.calcOwnMatrix());ni.util.applyTransformToObject(e,o)},addTransformToObject:function(e,i){ni.util.applyTransformToObject(e,ni.util.multiplyTransformMatrices(i,e.calcOwnMatrix()))},applyTransformToObject:function(e,i){var r=ni.util.qrDecompose(i),o=new ni.Point(r.translateX,r.translateY);e.flipX=!1,e.flipY=!1,e.set("scaleX",r.scaleX),e.set("scaleY",r.scaleY),e.skewX=r.skewX,e.skewY=r.skewY,e.angle=r.angle,e.setPositionByOrigin(o,"center","center")},sizeAfterTransform:function(e,i,r){var o=e/2,s=i/2,a=ni.util.calcDimensionsMatrix(r),c=ni.util.makeBoundingBoxFromPoints([{x:-o,y:-s},{x:o,y:-s},{x:-o,y:s},{x:o,y:s},],a);return{x:c.width,y:c.height}},mergeClipPaths:function(e,i){var r=e,o=i;r.inverted&&!o.inverted&&(r=i,o=e),ni.util.applyTransformToObject(o,ni.util.multiplyTransformMatrices(ni.util.invertTransform(r.calcTransformMatrix()),o.calcTransformMatrix()));var s=r.inverted&&o.inverted;return s&&(r.inverted=o.inverted=!1),new ni.Group([r],{clipPath:o,inverted:s})},hasStyleChanged:function(e,i,r){return r=r||!1,e.fill!==i.fill||e.stroke!==i.stroke||e.strokeWidth!==i.strokeWidth||e.fontSize!==i.fontSize||e.fontFamily!==i.fontFamily||e.fontWeight!==i.fontWeight||e.fontStyle!==i.fontStyle||e.deltaY!==i.deltaY||r&&(e.overline!==i.overline||e.underline!==i.underline||e.linethrough!==i.linethrough)},stylesToArray:function(e,i){e=ni.util.object.clone(e,!0);for(var r=i.split("\n"),o=-1,s={},a=[],c=0;c<r.length;c++)if(e[c])for(var l=0;l<r[c].length;l++){o++;var u=e[c][l];u&&(ni.util.hasStyleChanged(s,u,!0)?a.push({start:o,end:o+1,style:u}):a[a.length-1].end++),s=u||{}}else o+=r[c].length;return a},stylesFromArray:function(e,i){if(!Array.isArray(e))return e;for(var r=i.split("\n"),o=-1,s=0,a={},c=0;c<r.length;c++)for(var l=0;l<r[c].length;l++)o++,e[s]&&e[s].start<=o&&o<e[s].end&&(a[c]=a[c]||{},a[c][l]=Object.assign({},e[s].style),o==e[s].end-1&&s++);return a}},function(){function e(e,i,r,o,s,a,c,l,u,h,f){var d=ni.util.cos(e),p=ni.util.sin(e),g=ni.util.cos(i),v=ni.util.sin(i),m=r*s*g-o*a*v+c,$=o*s*g+r*a*v+l;return["C",h+u*(-r*s*p-o*a*d),f+u*(-o*s*p+r*a*d),m+u*(r*s*v+o*a*g),$+u*(o*s*v-r*a*g),m,$]}function i(e,i,r,o){var s=ne(i,e),a=ne(o,r);return a>=s?a-s:2*nt-(s-a)}function r(r,s,a){for(var c=a[1],l=a[2],u=a[3],h=a[4],f=a[5],d=function r(s,a,c,l,u,h,f){var d=nt,p=f*d/180,g=ni.util.sin(p),v=ni.util.cos(p),m=0,$=0,y=-v*s*.5-g*a*.5,b=-v*a*.5+g*s*.5,x=(c=o(c))*c,C=(l=o(l))*l,_=b*b,w=y*y,S=x*C-x*_-C*w,T=0;if(0>S){var O=nn(1-S/(x*C));c*=O,l*=O}else T=(u===h?-1:1)*nn(S/(x*_+C*w));var k=T*c*b/l,P=-T*l*y/c,E=i(1,0,(y-k)/c,(b-P)/l),A=i((y-k)/c,(b-P)/l,(-y-k)/c,(-b-P)/l);0===h&&0<A?A-=2*d:1==h&&0>A&&(A+=2*d);for(var D=eK(o(A/d*2)),L=[],j=A/D,I=8/3*eJ(j/4)*eJ(j/4)/eJ(j/2),F=E+j,M=0;M<D;M++)L[M]=e(E,F,v,g,c,l,v*k-g*P+.5*s,g*k+v*P+.5*a,I,m,$),m=L[M][5],$=L[M][6],E=F,F+=j;return L}(a[6]-r,a[7]-s,c,l,h,f,u),p=0,g=d.length;p<g;p++)d[p][1]+=r,d[p][2]+=s,d[p][3]+=r,d[p][4]+=s,d[p][5]+=r,d[p][6]+=s;return d}function c(e,i,r,o){return nn((r-e)*(r-e)+(o-i)*(o-i))}function l(e,i,r,o,s,a,c,l){return function(u){var h,f,d,p,g=(h=u)*h*h,v=3*(f=u)*f*(1-f),m=3*(d=u)*(1-d)*(1-d),$=(1-(p=u))*(1-p)*(1-p);return{x:c*g+s*v+r*m+e*$,y:l*g+a*v+o*m+i*$}}}function u(e,i,r,o,s,a,c,l){return function(u){var h=1-u;return ne(3*h*h*(o-i)+6*h*u*(a-o)+3*u*u*(l-a),3*h*h*(r-e)+6*h*u*(s-r)+3*u*u*(c-s))}}function h(e,i,r,o,s,a){return function(c){var l,u,h,f=(l=c)*l,d=2*(u=c)*(1-u),p=(1-(h=c))*(1-h);return{x:s*f+r*d+e*p,y:a*f+o*d+i*p}}}function f(e,i,r,o,s,a){return function(c){var l=1-c;return ne(2*l*(o-i)+2*c*(a-o),2*l*(r-e)+2*c*(s-r))}}function d(e,i,r){var o,s,a={x:i,y:r},l=0;for(s=1;100>=s;s+=1)o=e(s/100),l+=c(a.x,a.y,o.x,o.y),a=o;return l}function p(e){for(var i,r,o,s,a=0,p=e.length,g=0,v=0,m=0,$=0,y=[],b=0;b<p;b++){switch(o={x:g,y:v,command:(i=e[b])[0]},i[0]){case"M":o.length=0,m=g=i[1],$=v=i[2];break;case"L":o.length=c(g,v,i[1],i[2]),g=i[1],v=i[2];break;case"C":r=l(g,v,i[1],i[2],i[3],i[4],i[5],i[6]),s=u(g,v,i[1],i[2],i[3],i[4],i[5],i[6]),o.iterator=r,o.angleFinder=s,o.length=d(r,g,v),g=i[5],v=i[6];break;case"Q":r=h(g,v,i[1],i[2],i[3],i[4]),s=f(g,v,i[1],i[2],i[3],i[4]),o.iterator=r,o.angleFinder=s,o.length=d(r,g,v),g=i[3],v=i[4];break;case"Z":case"z":o.destX=m,o.destY=$,o.length=c(g,v,m,$),g=m,v=$}a+=o.length,y.push(o)}return y.push({length:a,x:g,y:v}),y}var g=Array.prototype.join,v={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},m={m:"l",M:"L"};ni.util.joinPath=function(e){return e.map(function(e){return e.join(" ")}).join(" ")},ni.util.parsePath=function(e){var i,r,o,s,a,c=[],l=[],u=ni.rePathCommand,h="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",f="("+h+")"+ni.commaWsp,d="([01])"+ni.commaWsp+"?",p=RegExp(f+"?"+f+"?"+f+d+d+f+"?("+h+")","g");if(!e||!e.match)return c;for(var g,$=0,y=(a=e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;$<y;$++){s=(i=a[$]).slice(1).trim(),l.length=0;var b,x=i.charAt(0);if(g=[x],"a"===x.toLowerCase())for(;b=p.exec(s);)for(var C=1;C<b.length;C++)l.push(b[C]);else for(;o=u.exec(s);)l.push(o[0]);C=0;for(var _=l.length;C<_;C++)isNaN(r=parseFloat(l[C]))||g.push(r);var w=v[x.toLowerCase()],S=m[x]||x;if(g.length-1>w)for(var T=1,O=g.length;T<O;T+=w)c.push([x].concat(g.slice(T,T+w))),x=S;else c.push(g)}return c},ni.util.makePathSimpler=function(e){var i,o,s,a,c,l,u=0,h=0,f=e.length,d=0,p=0,g=[];for(o=0;o<f;++o){switch(s=!1,(i=e[o].slice(0))[0]){case"l":i[0]="L",i[1]+=u,i[2]+=h;case"L":u=i[1],h=i[2];break;case"h":i[1]+=u;case"H":i[0]="L",i[2]=h,u=i[1];break;case"v":i[1]+=h;case"V":i[0]="L",h=i[1],i[1]=u,i[2]=h;break;case"m":i[0]="M",i[1]+=u,i[2]+=h;case"M":u=i[1],h=i[2],d=i[1],p=i[2];break;case"c":i[0]="C",i[1]+=u,i[2]+=h,i[3]+=u,i[4]+=h,i[5]+=u,i[6]+=h;case"C":c=i[3],l=i[4],u=i[5],h=i[6];break;case"s":i[0]="S",i[1]+=u,i[2]+=h,i[3]+=u,i[4]+=h;case"S":"C"===a?(c=2*u-c,l=2*h-l):(c=u,l=h),u=i[3],h=i[4],i[0]="C",i[5]=i[3],i[6]=i[4],i[3]=i[1],i[4]=i[2],i[1]=c,i[2]=l,c=i[3],l=i[4];break;case"q":i[0]="Q",i[1]+=u,i[2]+=h,i[3]+=u,i[4]+=h;case"Q":c=i[1],l=i[2],u=i[3],h=i[4];break;case"t":i[0]="T",i[1]+=u,i[2]+=h;case"T":"Q"===a?(c=2*u-c,l=2*h-l):(c=u,l=h),i[0]="Q",u=i[1],h=i[2],i[1]=c,i[2]=l,i[3]=u,i[4]=h;break;case"a":i[0]="A",i[6]+=u,i[7]+=h;case"A":s=!0,g=g.concat(r(u,h,i)),u=i[6],h=i[7];break;case"z":case"Z":u=d,h=p}s||g.push(i),a=i[0]}return g},ni.util.getSmoothPathFromPoints=function(e,i){var r,o=[],s=new ni.Point(e[0].x,e[0].y),a=new ni.Point(e[1].x,e[1].y),c=e.length,l=1,u=0,h=2<c;for(i=i||0,h&&(l=e[2].x<a.x?-1:e[2].x===a.x?0:1,u=e[2].y<a.y?-1:e[2].y===a.y?0:1),o.push(["M",s.x-l*i,s.y-u*i]),r=1;r<c;r++){if(!s.eq(a)){var f=s.midPointFrom(a);o.push(["Q",s.x,s.y,f.x,f.y])}s=e[r],r+1<e.length&&(a=e[r+1])}return h&&(l=s.x>e[r-2].x?1:s.x===e[r-2].x?0:-1,u=s.y>e[r-2].y?1:s.y===e[r-2].y?0:-1),o.push(["L",s.x+l*i,s.y+u*i]),o},ni.util.getPathSegmentsInfo=p,ni.util.getBoundsOfCurve=function(e,i,r,c,l,u,h,f){if(ni.cachesBoundsOfCurve&&(d=g.call(arguments),ni.boundsOfCurveCache[d]))return ni.boundsOfCurveCache[d];var d,p,v,m,$,y,b,x,C,_=a,w=s,S=o,T=[],O=[[],[]];v=6*e-12*r+6*l,p=-3*e+9*r-9*l+3*h,m=3*r-3*e;for(var k=0;2>k;++k)if(0<k&&(v=6*i-12*c+6*u,p=-3*i+9*c-9*u+3*f,m=3*c-3*i),1e-12>S(p)){if(1e-12>S(v))continue;0<($=-m/v)&&1>$&&T.push($)}else!(0>(x=v*v-4*m*p))&&(0<(y=(-v+(C=nn(x)))/(2*p))&&1>y&&T.push(y),0<(b=(-v-C)/(2*p))&&1>b&&T.push(b));for(var P,E,A,D=T.length,L=D;D--;)P=(A=1-($=T[D]))*A*A*e+3*A*A*$*r+3*A*$*$*l+$*$*$*h,O[0][D]=P,E=A*A*A*i+3*A*A*$*c+3*A*$*$*u+$*$*$*f,O[1][D]=E;O[0][L]=e,O[1][L]=i,O[0][L+1]=h,O[1][L+1]=f;var j=[{x:_.apply(null,O[0]),y:_.apply(null,O[1])},{x:w.apply(null,O[0]),y:w.apply(null,O[1])},];return ni.cachesBoundsOfCurve&&(ni.boundsOfCurveCache[d]=j),j},ni.util.getPointOnPath=function(e,i,r){r||(r=p(e));for(var o=0;0<i-r[o].length&&o<r.length-2;)i-=r[o].length,o++;var s,a=r[o],l=i/a.length,u=a.command,h=e[o];return"M"===u?{x:a.x,y:a.y,angle:0}:"Z"===u||"z"===u?((s=new ni.Point(a.x,a.y).lerp(new ni.Point(a.destX,a.destY),l)).angle=ne(a.destY-a.y,a.destX-a.x),s):"L"===u?((s=new ni.Point(a.x,a.y).lerp(new ni.Point(h[1],h[2]),l)).angle=ne(h[2]-a.y,h[1]-a.x),s):"C"===u||"Q"===u?function e(i,r){for(var o,s,a,l=0,u=0,h=i.iterator,f={x:i.x,y:i.y},d=.01,p=i.angleFinder;u<r&&1e-4<d;)o=h(l),a=l,(s=c(f.x,f.y,o.x,o.y))+u>r?(l-=d,d/=2):(f=o,l+=d,u+=s);return o.angle=p(a),o}(a,i):void 0},ni.util.transformPath=function(e,i,r){return r&&(i=ni.util.multiplyTransformMatrices(i,[1,0,0,1,-r.x,-r.y])),e.map(function(e){for(var r=e.slice(0),o={},s=1;s<e.length-1;s+=2)o.x=e[s],o.y=e[s+1],o=ni.util.transformPoint(o,i),r[s]=o.x,r[s+1]=o.y;return r})}}(),function(){function e(e,i,r){if(e&&0!==e.length){var o=e.length-1,s=i?e[o][i]:e[o];if(i)for(;o--;)r(e[o][i],s)&&(s=e[o][i]);else for(;o--;)r(e[o],s)&&(s=e[o]);return s}}var i=Array.prototype.slice;ni.util.array={fill:function(e,i){for(var r=e.length;r--;)e[r]=i;return e},invoke:function(e,r){for(var o=i.call(arguments,2),s=[],a=0,c=e.length;a<c;a++)s[a]=o.length?e[a][r].apply(e[a],o):e[a][r].call(e[a]);return s},min:function(i,r){return e(i,r,function(e,i){return e<i})},max:function(i,r){return e(i,r,function(e,i){return e>=i})}}}(),function(){function e(i,r,o){if(o){if(!ni.isLikelyNode&&r instanceof Element)i=r;else if(r instanceof Array){i=[];for(var s=0,a=r.length;s<a;s++)i[s]=e({},r[s],o)}else if(r&&"object"===u(r))for(var c in r)"canvas"===c||"group"===c?i[c]=null:r.hasOwnProperty(c)&&(i[c]=e({},r[c],o));else i=r}else for(var c in r)i[c]=r[c];return i}ni.util.object={extend:e,clone:function(i,r){return e({},i,r)}},ni.util.object.extend(ni.util,ni.Observable)}(),function(){function e(e,i){var r=e.charCodeAt(i);if(isNaN(r))return"";if(55296>r||57343<r)return e.charAt(i);if(55296<=r&&56319>=r){if(e.length<=i+1)throw"High surrogate without following low surrogate";var o=e.charCodeAt(i+1);if(56320>o||57343<o)throw"High surrogate without following low surrogate";return e.charAt(i)+e.charAt(i+1)}if(0===i)throw"Low surrogate without preceding high surrogate";var s=e.charCodeAt(i-1);if(55296>s||56319<s)throw"Low surrogate without preceding high surrogate";return!1}ni.util.string={camelize:function(e){return e.replace(/-+(.)?/g,function(e,i){return i?i.toUpperCase():""})},capitalize:function(e,i){return e.charAt(0).toUpperCase()+(i?e.slice(1):e.slice(1).toLowerCase())},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(i){var r,o=0,s=[];for(o=0;o<i.length;o++)!1!==(r=e(i,o))&&s.push(r);return s}}}(),function(){function e(){}function i(e){for(var i,o=null,s=this;s.constructor.superclass;){if(i=s.constructor.superclass.prototype[e],s[e]!==i){o=i;break}s=s.constructor.superclass.prototype}return o?1<arguments.length?o.apply(this,r.call(arguments,1)):o.call(this):console.log("tried to callSuper "+e+", method not found in prototype chain",this)}var r=Array.prototype.slice,o=function(){},s=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),a=function(e,i,r){for(var o in i)e.prototype[o]=o in e.prototype&&"function"==typeof e.prototype[o]&&-1<(i[o]+"").indexOf("callSuper")?function(e){return function(){var o=this.constructor.superclass;this.constructor.superclass=r;var s=i[e].apply(this,arguments);if(this.constructor.superclass=o,"initialize"!==e)return s}}(o):i[o],s&&(i.toString!==Object.prototype.toString&&(e.prototype.toString=i.toString),i.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=i.valueOf))};ni.util.createClass=function(){function s(){this.initialize.apply(this,arguments)}var c=null,l=r.call(arguments,0);"function"==typeof l[0]&&(c=l.shift()),s.superclass=c,s.subclasses=[],c&&(e.prototype=c.prototype,s.prototype=new e,c.subclasses.push(s));for(var u=0,h=l.length;u<h;u++)a(s,l[u],c);return s.prototype.initialize||(s.prototype.initialize=o),s.prototype.constructor=s,s.prototype.callSuper=i,s}}(),y=!!ni.document.createElement("div").attachEvent,b=["touchstart","touchmove","touchend"],ni.util.addListener=function(e,i,r,o){e&&e.addEventListener(i,r,!y&&o)},ni.util.removeListener=function(e,i,r,o){e&&e.removeEventListener(i,r,!y&&o)},ni.util.getPointer=function(e){var i,r,o=e.target,s=ni.util.getScrollLeftTop(o),a=(r=(i=e).changedTouches)&&r[0]?r[0]:i;return{x:a.clientX+s.left,y:a.clientY+s.top}},ni.util.isTouchEvent=function(e){return -1<b.indexOf(e.type)||"touch"===e.pointerType},C="string"==typeof(x=ni.document.createElement("div")).style.opacity,_="string"==typeof x.style.filter,w=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,S=function(e){return e},C?S=function(e,i){return e.style.opacity=i,e}:_&&(S=function(e,i){var r=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(r.zoom=1),w.test(r.filter)?(i=.9999<=i?"":"alpha(opacity="+100*i+")",r.filter=r.filter.replace(w,i)):r.filter+=" alpha(opacity="+100*i+")",e}),ni.util.setStyle=function(e,i){var r=e.style;if(!r)return e;if("string"==typeof i)return e.style.cssText+=";"+i,-1<i.indexOf("opacity")?S(e,i.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var o in i)if("opacity"===o)S(e,i[o]);else{var s="float"===o||"cssFloat"===o?void 0===r.styleFloat?"cssFloat":"styleFloat":o;r.setProperty(s,i[o])}return e},function(){function e(e,i){var r=ni.document.createElement(e);for(var o in i)"class"===o?r.className=i[o]:"for"===o?r.htmlFor=i[o]:r.setAttribute(o,i[o]);return r}function i(e){for(var i=0,r=0,o=ni.document.documentElement,s=ni.document.body||{scrollLeft:0,scrollTop:0};e&&(e.parentNode||e.host)&&((e=e.parentNode||e.host)===ni.document?(i=s.scrollLeft||o.scrollLeft||0,r=s.scrollTop||o.scrollTop||0):(i+=e.scrollLeft||0,r+=e.scrollTop||0),1!==e.nodeType||"fixed"!==e.style.position););return{left:i,top:r}}var r,o,s,a,c=Array.prototype.slice,l=function(e){return c.call(e,0)};try{s=l(ni.document.childNodes) instanceof Array}catch(u){}s||(l=function(e){for(var i=Array(e.length),r=e.length;r--;)i[r]=e[r];return i}),a=ni.document.defaultView&&ni.document.defaultView.getComputedStyle?function(e,i){var r=ni.document.defaultView.getComputedStyle(e,null);return r?r[i]:void 0}:function(e,i){var r=e.style[i];return!r&&e.currentStyle&&(r=e.currentStyle[i]),r},o="userSelect"in(r=ni.document.documentElement.style)?"userSelect":"MozUserSelect"in r?"MozUserSelect":"WebkitUserSelect"in r?"WebkitUserSelect":"KhtmlUserSelect"in r?"KhtmlUserSelect":"",ni.util.makeElementUnselectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=ni.util.falseFunction),o?e.style[o]="none":"string"==typeof e.unselectable&&(e.unselectable="on"),e},ni.util.makeElementSelectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=null),o?e.style[o]="":"string"==typeof e.unselectable&&(e.unselectable=""),e},ni.util.setImageSmoothing=function(e,i){e.imageSmoothingEnabled=e.imageSmoothingEnabled||e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled||e.oImageSmoothingEnabled,e.imageSmoothingEnabled=i},ni.util.getById=function(e){return"string"==typeof e?ni.document.getElementById(e):e},ni.util.toArray=l,ni.util.addClass=function(e,i){e&&-1===(" "+e.className+" ").indexOf(" "+i+" ")&&(e.className+=(e.className?" ":"")+i)},ni.util.makeElement=e,ni.util.wrapElement=function(i,r,o){return"string"==typeof r&&(r=e(r,o)),i.parentNode&&i.parentNode.replaceChild(r,i),r.appendChild(i),r},ni.util.getScrollLeftTop=i,ni.util.getElementOffset=function(e){var r,o,s=e&&e.ownerDocument,c={left:0,top:0},l={left:0,top:0},u={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!s)return l;for(var h in u)l[u[h]]+=parseInt(a(e,h),10)||0;return r=s.documentElement,void 0!==e.getBoundingClientRect&&(c=e.getBoundingClientRect()),o=i(e),{left:c.left+o.left-(r.clientLeft||0)+l.left,top:c.top+o.top-(r.clientTop||0)+l.top}},ni.util.getNodeCanvas=function(e){var i=ni.jsdomImplForWrapper(e);return i._canvas||i._image},ni.util.cleanUpJsdomNode=function(e){if(ni.isLikelyNode){var i=ni.jsdomImplForWrapper(e);i&&(i._image=null,i._canvas=null,i._currentSrc=null,i._attributes=null,i._classList=null)}}}(),function(){function e(){}ni.util.request=function(i,r){r||(r={});var o,s,a=r.method?r.method.toUpperCase():"GET",c=r.onComplete||function(){},l=new ni.window.XMLHttpRequest,u=r.body||r.parameters;return l.onreadystatechange=function(){4===l.readyState&&(c(l),l.onreadystatechange=e)},"GET"===a&&(u=null,"string"==typeof r.parameters&&(i=(o=i,s=r.parameters,o+(/\?/.test(o)?"&":"?")+s))),l.open(a,i,!0),("POST"===a||"PUT"===a)&&l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.send(u),l}}(),ni.log=console.log,ni.warn=console.warn,function(){function e(){return!1}function i(e,i,r,o){return-r*eQ(e/o*(nt/2))+r+i}function r(){return l.apply(ni.window,arguments)}var s=ni.util.object.extend,a=ni.util.object.clone,c=[];ni.util.object.extend(c,{cancelAll:function(){var e=this.splice(0);return e.forEach(function(e){e.cancel()}),e},cancelByCanvas:function(e){if(!e)return[];var i=this.filter(function(i){return"object"===u(i.target)&&i.target.canvas===e});return i.forEach(function(e){e.cancel()}),i},cancelByTarget:function(e){var i=this.findAnimationsByTarget(e);return i.forEach(function(e){e.cancel()}),i},findAnimationIndex:function(e){return this.indexOf(this.findAnimation(e))},findAnimation:function(e){return this.find(function(i){return i.cancel===e})},findAnimationsByTarget:function(e){return e?this.filter(function(i){return i.target===e}):[]}});var l=ni.window.requestAnimationFrame||ni.window.webkitRequestAnimationFrame||ni.window.mozRequestAnimationFrame||ni.window.oRequestAnimationFrame||ni.window.msRequestAnimationFrame||function(e){return ni.window.setTimeout(e,1e3/60)},h=ni.window.cancelAnimationFrame||ni.window.clearTimeout;ni.util.animate=function(c){c||(c={});var l,u=!1,h=function(){var e=ni.runningAnimations.indexOf(l);return -1<e&&ni.runningAnimations.splice(e,1)[0]};return l=s(a(c),{cancel:function(){return u=!0,h()},currentValue:"startValue"in c?c.startValue:0,completionRate:0,durationRate:0}),ni.runningAnimations.push(l),r(function(s){var a,f=s||+new Date,d=c.duration||500,p=f+d,g=c.onChange||e,v=c.abort||e,m=c.onComplete||e,$=c.easing||i,y="startValue"in c&&0<c.startValue.length,b="startValue"in c?c.startValue:0,x="endValue"in c?c.endValue:100,C=c.byValue||(y?b.map(function(e,i){return x[i]-b[i]}):x-b);c.onStart&&c.onStart(),function e(i){var s=(a=i||+new Date)>p?d:a-f,c=s/d,_=y?b.map(function(e,i){return $(s,b[i],C[i],d)}):$(s,b,C,d),w=o(y?(_[0]-b[0])/C[0]:(_-b)/C);return l.currentValue=y?_.slice():_,l.completionRate=w,l.durationRate=c,u?void 0:v(_,w,c)?void h():a>p?(l.currentValue=y?x.slice():x,l.completionRate=1,l.durationRate=1,g(y?x.slice():x,1,1),m(x,1,1),void h()):(g(_,w,c),void r(e))}(f)}),l.cancel},ni.util.requestAnimFrame=r,ni.util.cancelAnimFrame=function(){return h.apply(ni.window,arguments)},ni.runningAnimations=c}(),function(){function e(e,i,r){var o="rgba("+parseInt(e[0]+r*(i[0]-e[0]),10)+","+parseInt(e[1]+r*(i[1]-e[1]),10)+","+parseInt(e[2]+r*(i[2]-e[2]),10);return o+=","+(e&&i?parseFloat(e[3]+r*(i[3]-e[3])):1),o+=")"}ni.util.animateColor=function(i,r,o,s){var a=new ni.Color(i).getSource(),c=new ni.Color(r).getSource(),l=s.onComplete,u=s.onChange;return s=s||{},ni.util.animate(ni.util.object.extend(s,{duration:o||500,startValue:a,endValue:c,byValue:c,easing:function(i,r,o,a){return e(r,o,s.colorEasing?s.colorEasing(i,a):1-eQ(i/a*(nt/2)))},onComplete:function(i,r,o){if(l)return l(e(c,c,0),r,o)},onChange:function(i,r,o){if(u){if(Array.isArray(i))return u(e(i,i,0),r,o);u(i,r,o)}}}))}}(),function(){function e(e,i,r,s){return e<o(i)?(e=i,s=r/4):s=0===i&&0===e?r/(2*nt)*1.5707963267948966:r/(2*nt)*Math.asin(i/e),{a:e,c:i,p:r,s:s}}function i(e,i,r){return e.a*l(2,10*(i-=1))*eJ((i*r-e.s)*(2*nt)/e.p)}function r(e,i,r,o){return r-s(o-e,0,r,o)+i}function s(e,i,r,o){return(e/=o)<1/2.75?r*(7.5625*e*e)+i:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+i:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+i:r*(7.5625*(e-=2.625/2.75)*e+.984375)+i}ni.util.ease={easeInQuad:function(e,i,r,o){return r*(e/=o)*e+i},easeOutQuad:function(e,i,r,o){return-r*(e/=o)*(e-2)+i},easeInOutQuad:function(e,i,r,o){return 1>(e/=o/2)?r/2*e*e+i:-r/2*(--e*(e-2)-1)+i},easeInCubic:function(e,i,r,o){return r*(e/=o)*e*e+i},easeOutCubic:function(e,i,r,o){return r*((e=e/o-1)*e*e+1)+i},easeInOutCubic:function(e,i,r,o){return 1>(e/=o/2)?r/2*e*e*e+i:r/2*((e-=2)*e*e+2)+i},easeInQuart:function(e,i,r,o){return r*(e/=o)*e*e*e+i},easeOutQuart:function(e,i,r,o){return-r*((e=e/o-1)*e*e*e-1)+i},easeInOutQuart:function(e,i,r,o){return 1>(e/=o/2)?r/2*e*e*e*e+i:-r/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(e,i,r,o){return r*(e/=o)*e*e*e*e+i},easeOutQuint:function(e,i,r,o){return r*((e=e/o-1)*e*e*e*e+1)+i},easeInOutQuint:function(e,i,r,o){return 1>(e/=o/2)?r/2*e*e*e*e*e+i:r/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(e,i,r,o){return-r*eQ(e/o*(nt/2))+r+i},easeOutSine:function(e,i,r,o){return r*eJ(e/o*(nt/2))+i},easeInOutSine:function(e,i,r,o){return-r/2*(eQ(nt*e/o)-1)+i},easeInExpo:function(e,i,r,o){return 0===e?i:r*l(2,10*(e/o-1))+i},easeOutExpo:function(e,i,r,o){return e===o?i+r:r*(1-l(2,-10*e/o))+i},easeInOutExpo:function(e,i,r,o){return 0===e?i:e===o?i+r:1>(e/=o/2)?r/2*l(2,10*(e-1))+i:r/2*(2-l(2,-10*--e))+i},easeInCirc:function(e,i,r,o){return-r*(nn(1-(e/=o)*e)-1)+i},easeOutCirc:function(e,i,r,o){return r*nn(1-(e=e/o-1)*e)+i},easeInOutCirc:function(e,i,r,o){return 1>(e/=o/2)?-r/2*(nn(1-e*e)-1)+i:r/2*(nn(1-(e-=2)*e)+1)+i},easeInElastic:function(r,o,s,a){var c=0;return 0===r?o:1==(r/=a)?o+s:(c||(c=.3*a),-i(e(s,s,c,1.70158),r,a)+o)},easeOutElastic:function(i,r,o,s){var a=0;if(0===i)return r;if(1==(i/=s))return r+o;a||(a=.3*s);var c=e(o,o,a,1.70158);return c.a*l(2,-10*i)*eJ((i*s-c.s)*(2*nt)/c.p)+c.c+r},easeInOutElastic:function(r,o,s,a){var c=0;if(0===r)return o;if(2==(r/=a/2))return o+s;c||(c=a*(1.5*.3));var u=e(s,s,c,1.70158);return 1>r?-.5*i(u,r,a)+o:u.a*l(2,-10*(r-=1))*eJ((r*a-u.s)*(2*nt)/u.p)*.5+u.c+o},easeInBack:function(e,i,r,o,s){return void 0===s&&(s=1.70158),r*(e/=o)*e*((s+1)*e-s)+i},easeOutBack:function(e,i,r,o,s){return void 0===s&&(s=1.70158),r*((e=e/o-1)*e*((s+1)*e+s)+1)+i},easeInOutBack:function(e,i,r,o,s){return void 0===s&&(s=1.70158),1>(e/=o/2)?r/2*(e*e*((1+(s*=1.525))*e-s))+i:r/2*((e-=2)*e*((1+(s*=1.525))*e+s)+2)+i},easeInBounce:r,easeOutBounce:s,easeInOutBounce:function(e,i,o,a){return e<a/2?.5*r(2*e,0,o,a)+i:.5*s(2*e-a,0,o,a)+.5*o+i}}}(),function(e){"use strict";function i(e){return e in $?$[e]:e}function r(e,i,r,o){var s,a=Array.isArray(i);if("fill"!==e&&"stroke"!==e||"none"!==i){if("strokeUniform"===e)return"non-scaling-stroke"===i;if("strokeDashArray"===e)i="none"===i?null:i.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)i=r&&r.transformMatrix?m(r.transformMatrix,f.parseTransformAttribute(i)):f.parseTransformAttribute(i);else if("visible"===e)i="none"!==i&&"hidden"!==i,r&&!1===r.visible&&(i=!1);else if("opacity"===e)i=parseFloat(i),r&&void 0!==r.opacity&&(i*=r.opacity);else if("textAnchor"===e)i="start"===i?"left":"end"===i?"right":"center";else if("charSpacing"===e)s=v(i,o)/o*1e3;else if("paintFirst"===e){var c=i.indexOf("fill"),l=i.indexOf("stroke");i="fill",(-1<c&&-1<l&&l<c||-1===c&&-1<l)&&(i="stroke")}else{if("href"===e||"xlink:href"===e||"font"===e)return i;if("imageSmoothing"===e)return"optimizeQuality"===i;s=a?i.map(v):v(i,o)}}else i="";return!a&&isNaN(s)?i:s}function o(e){return RegExp("^("+e.join("|")+")\\b","i")}function s(e,i){var r,o,s,a,c=[];for(s=0,a=i.length;s<a;s++)r=i[s],o=e.getElementsByTagName(r),c=c.concat(Array.prototype.slice.call(o));return c}function a(e,i){var r,o=!0;return(r=c(e,i.pop()))&&i.length&&(o=function(e,i){for(var r,o=!0;e.parentNode&&1===e.parentNode.nodeType&&i.length;)o&&(r=i.pop()),o=c(e=e.parentNode,r);return 0===i.length}(e,i)),r&&o&&0===i.length}function c(e,i){var r,o,s=e.nodeName,a=e.getAttribute("class"),c=e.getAttribute("id");if(r=RegExp("^"+s,"i"),i=i.replace(r,""),c&&i.length&&(r=RegExp("#"+c+"(?![a-zA-Z\\-]+)","i"),i=i.replace(r,"")),a&&i.length)for(o=(a=a.split(" ")).length;o--;)r=RegExp("\\."+a[o]+"(?![a-zA-Z\\-]+)","i"),i=i.replace(r,"");return 0===i.length}function l(e,i){if(e.getElementById&&(r=e.getElementById(i)),r)return r;var r,o,s,a,c=e.getElementsByTagName("*");for(s=0,a=c.length;s<a;s++)if(i===(o=c[s]).getAttribute("id"))return o}function u(e){if(!f.svgViewBoxElementsRegEx.test(e.nodeName))return{};var i,r,o,s,a,c,l=e.getAttribute("viewBox"),u=1,h=1,d=e.getAttribute("width"),p=e.getAttribute("height"),g=e.getAttribute("x")||0,m=e.getAttribute("y")||0,$=e.getAttribute("preserveAspectRatio")||"",y=!l||!(l=l.match(C)),b=!d||!p||"100%"===d||"100%"===p,x=y&&b,_={},w="",S=0,T=0;if(_.width=0,_.height=0,_.toBeParsed=x,y&&(g||m)&&e.parentNode&&"#document"!==e.parentNode.nodeName&&(w=" translate("+v(g)+" "+v(m)+") ",a=(e.getAttribute("transform")||"")+w,e.setAttribute("transform",a),e.removeAttribute("x"),e.removeAttribute("y")),x)return _;if(y)return _.width=v(d),_.height=v(p),_;if(i=-parseFloat(l[1]),r=-parseFloat(l[2]),o=parseFloat(l[3]),s=parseFloat(l[4]),_.minX=i,_.minY=r,_.viewBoxWidth=o,_.viewBoxHeight=s,b?(_.width=o,_.height=s):(_.width=v(d),_.height=v(p),u=_.width/o,h=_.height/s),"none"!==($=f.util.parsePreserveAspectRatioAttribute($)).alignX&&("meet"===$.meetOrSlice&&(h=u=u>h?h:u),"slice"===$.meetOrSlice&&(h=u=u>h?u:h),S=_.width-o*u,T=_.height-s*u,"Mid"===$.alignX&&(S/=2),"Mid"===$.alignY&&(T/=2),"Min"===$.alignX&&(S=0),"Min"===$.alignY&&(T=0)),1==u&&1==h&&0==i&&0==r&&0===g&&0===m)return _;if((g||m)&&"#document"!==e.parentNode.nodeName&&(w=" translate("+v(g)+" "+v(m)+") "),a=w+" matrix("+u+" 0 0 "+h+" "+(i*u+S)+" "+(r*h+T)+") ","svg"===e.nodeName){for(c=e.ownerDocument.createElementNS(f.svgNS,"g");e.firstChild;)c.appendChild(e.firstChild);e.appendChild(c)}else(c=e).removeAttribute("x"),c.removeAttribute("y"),a=c.getAttribute("transform")+a;return c.setAttribute("transform",a),_}function h(e,i){var r="xlink:href",o=l(e,i.getAttribute(r).slice(1));if(o&&o.getAttribute(r)&&h(e,o),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(e){o&&!i.hasAttribute(e)&&o.hasAttribute(e)&&i.setAttribute(e,o.getAttribute(e))}),!i.children.length)for(var s=o.cloneNode(!0);s.firstChild;)i.appendChild(s.firstChild);i.removeAttribute(r)}var f=e.fabric||(e.fabric={}),d=f.util.object.extend,p=f.util.object.clone,g=f.util.toFixed,v=f.util.parseUnit,m=f.util.multiplyTransformMatrices,$={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},y={stroke:"strokeOpacity",fill:"fillOpacity"},b="font-size",x="clip-path";f.svgValidTagNamesRegEx=o(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),f.svgViewBoxElementsRegEx=o(["symbol","image","marker","pattern","view","svg"]),f.svgInvalidAncestorsRegEx=o(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),f.svgValidParentsRegEx=o(["symbol","g","a","svg","clipPath","defs"]),f.cssRules={},f.gradientDefs={},f.clipPaths={},f.parseTransformAttribute=function(){function e(e,i,r){e[r]=eZ(f.util.degreesToRadians(i[0]))}var i=f.iMatrix,r=f.reNum,o=f.commaWsp,s="(?:(?:(matrix)\\s*\\(\\s*("+r+")"+o+"("+r+")"+o+"("+r+")"+o+"("+r+")"+o+"("+r+")"+o+"("+r+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+r+")(?:"+o+"("+r+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+r+")(?:"+o+"("+r+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+r+")(?:"+o+"("+r+")"+o+"("+r+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+r+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+r+")\\s*\\)))",a=RegExp("^\\s*(?:(?:"+s+"(?:"+o+"*"+s+")*)?)\\s*$"),c=RegExp(s,"g");return function(r){var o=i.concat(),l=[];if(!r||r&&!a.test(r))return o;r.replace(c,function(r){var a,c,u,h,d,p,g,v,m,$,y,b,x=RegExp(s).exec(r).filter(function(e){return!!e}),C=x[1],_=x.slice(2).map(parseFloat);"translate"===C?(a=o,c=_,a[4]=c[0],2===c.length&&(a[5]=c[1])):"rotate"===C?(_[0]=f.util.degreesToRadians(_[0]),u=o,h=_,d=f.util.cos(h[0]),p=f.util.sin(h[0]),g=0,v=0,3===h.length&&(g=h[1],v=h[2]),u[0]=d,u[1]=p,u[2]=-p,u[3]=d,u[4]=g-(d*g-p*v),u[5]=v-(p*g+d*v)):"scale"===C?(m=o,y=($=_)[0],b=2===$.length?$[1]:$[0],m[0]=y,m[3]=b):"skewX"===C?e(o,_,2):"skewY"===C?e(o,_,1):"matrix"===C&&(o=_),l.push(o.concat()),o=i.concat()});for(var u=l[0];1<l.length;)l.shift(),u=f.util.multiplyTransformMatrices(u,l[0]);return u}}();var C=RegExp("^\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*$");f.parseSVGDocument=function(e,i,r,o){if(e){(function e(i){for(var r=s(i,["use","svg:use"]),o=0;r.length&&o<r.length;){var a=r[o],c=a.getAttribute("xlink:href")||a.getAttribute("href");if(null===c)return;var h,d,p,g,v=c.slice(1),m=a.getAttribute("x")||0,$=a.getAttribute("y")||0,y=l(i,v).cloneNode(!0),b=(y.getAttribute("transform")||"")+" translate("+m+", "+$+")",x=r.length,C=f.svgNS;if(u(y),/^svg$/i.test(y.nodeName)){var _=y.ownerDocument.createElementNS(C,"g");for(d=0,g=(p=y.attributes).length;d<g;d++)h=p.item(d),_.setAttributeNS(C,h.nodeName,h.nodeValue);for(;y.firstChild;)_.appendChild(y.firstChild);y=_}for(d=0,g=(p=a.attributes).length;d<g;d++)"x"!==(h=p.item(d)).nodeName&&"y"!==h.nodeName&&"xlink:href"!==h.nodeName&&"href"!==h.nodeName&&("transform"===h.nodeName?b=h.nodeValue+" "+b:y.setAttribute(h.nodeName,h.nodeValue));y.setAttribute("transform",b),y.setAttribute("instantiated_by_use","1"),y.removeAttribute("id"),a.parentNode.replaceChild(y,a),r.length===x&&o++}})(e);var a,c,h=f.Object.__uid++,d=u(e),g=f.util.toArray(e.getElementsByTagName("*"));if(d.crossOrigin=o&&o.crossOrigin,d.svgUid=h,0===g.length&&f.isLikelyNode){var v=[];for(a=0,c=(g=e.selectNodes('//*[name(.)!="svg"]')).length;a<c;a++)v[a]=g[a];g=v}var m=g.filter(function(e){return u(e),f.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))&&!function(e,i){for(;e&&(e=e.parentNode);)if(e.nodeName&&i.test(e.nodeName.replace("svg:",""))&&!e.getAttribute("instantiated_by_use"))return!0;return!1}(e,f.svgInvalidAncestorsRegEx)});if(!m||m&&!m.length)return void(i&&i([],{}));var $={};g.filter(function(e){return"clipPath"===e.nodeName.replace("svg:","")}).forEach(function(e){$[e.getAttribute("id")]=f.util.toArray(e.getElementsByTagName("*")).filter(function(e){return f.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))})}),f.gradientDefs[h]=f.getGradientDefs(e),f.cssRules[h]=f.getCSSRules(e),f.clipPaths[h]=$,f.parseElements(m,function(e,r){i&&(i(e,d,r,g),delete f.gradientDefs[h],delete f.cssRules[h],delete f.clipPaths[h])},p(d),r,o)}};var _=RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+f.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+f.reNum+"))?\\s+(.*)");d(f,{parseFontDeclaration:function(e,i){var r=e.match(_);if(r){var o=r[1],s=r[3],a=r[4],c=r[5],l=r[6];o&&(i.fontStyle=o),s&&(i.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),a&&(i.fontSize=v(a)),l&&(i.fontFamily=l),c&&(i.lineHeight="normal"===c?1:c)}},getGradientDefs:function(e){var i,r=s(e,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),o=0,a={};for(o=r.length;o--;)(i=r[o]).getAttribute("xlink:href")&&h(e,i),a[i.getAttribute("id")]=i;return a},parseAttributes:function(e,o,s){if(e){var c,l,u,h={};void 0===s&&(s=e.getAttribute("svgUid")),e.parentNode&&f.svgValidParentsRegEx.test(e.parentNode.nodeName)&&(h=f.parseAttributes(e.parentNode,o,s));var p=o.reduce(function(i,r){return(c=e.getAttribute(r))&&(i[r]=c),i},{}),m=d(function e(i,r){var o={};for(var s in f.cssRules[r])if(a(i,s.split(" ")))for(var c in f.cssRules[r][s])o[c]=f.cssRules[r][s][c];return o}(e,s),f.parseStyleAttribute(e));p=d(p,m),m[x]&&e.setAttribute(x,m[x]),l=u=h.fontSize||f.Text.DEFAULT_SVG_FONT_SIZE,p[b]&&(p[b]=l=v(p[b],u));var $,C,_={};for(var w in p)C=r($=i(w),p[w],h,l),_[$]=C;_.font&&f.parseFontDeclaration(_.font,_);var S=d(h,_);return f.svgValidParentsRegEx.test(e.nodeName)?S:function(e){for(var i in y)if(void 0!==e[y[i]]&&""!==e[i]){if(void 0===e[i]){if(!f.Object.prototype[i])continue;e[i]=f.Object.prototype[i]}if(0!==e[i].indexOf("url(")){var r=new f.Color(e[i]);e[i]=r.setAlpha(g(r.getAlpha()*e[y[i]],2)).toRgba()}}return e}(S)}},parseElements:function(e,i,r,o,s){new f.ElementsParser(e,i,r,o,s).parse()},parseStyleAttribute:function(e){var i={},r=e.getAttribute("style");return r&&("string"==typeof r?function(e,i){var r,o;e.replace(/;\s*$/,"").split(";").forEach(function(e){var s=e.split(":");r=s[0].trim().toLowerCase(),o=s[1].trim(),i[r]=o})}(r,i):function(e,i){var r,o;for(var s in e)void 0!==e[s]&&(r=s.toLowerCase(),o=e[s],i[r]=o)}(r,i)),i},parsePointsAttribute:function(e){if(!e)return null;var i,r,o=[];for(i=0,r=(e=(e=e.replace(/,/g," ").trim()).split(/\s+/)).length;i<r;i+=2)o.push({x:parseFloat(e[i]),y:parseFloat(e[i+1])});return o},getCSSRules:function(e){var i,r,o=e.getElementsByTagName("style"),s={};for(i=0,r=o.length;i<r;i++){var a=o[i].textContent;""!==(a=a.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&a.split("}").filter(function(e){return e.trim()}).forEach(function(e){var o=e.split("{"),a={},c=o[1].trim().split(";").filter(function(e){return e.trim()});for(i=0,r=c.length;i<r;i++){var l=c[i].split(":"),u=l[0].trim(),h=l[1].trim();a[u]=h}(e=o[0].trim()).split(",").forEach(function(e){""===(e=e.replace(/^svg/i,"").trim())||(s[e]?f.util.object.extend(s[e],a):s[e]=f.util.object.clone(a))})})}return s},loadSVGFromURL:function(e,i,r,o){e=e.replace(/^\n\s*/,"").trim(),new f.util.request(e,{method:"get",onComplete:function(e){var s=e.responseXML;return s&&s.documentElement?void f.parseSVGDocument(s.documentElement,function(e,r,o,s){i&&i(e,r,o,s)},r,o):(i&&i(null),!1)}})},loadSVGFromString:function(e,i,r,o){var s=new f.window.DOMParser().parseFromString(e.trim(),"text/xml");f.parseSVGDocument(s.documentElement,function(e,r,o,s){i(e,r,o,s)},r,o)}})}(i),ni.ElementsParser=function(e,i,r,o,s,a){this.elements=e,this.callback=i,this.options=r,this.reviver=o,this.svgUid=r&&r.svgUid||0,this.parsingOptions=s,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a},(T=ni.ElementsParser.prototype).parse=function(){this.instances=Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},T.createObjects=function(){var e=this;this.elements.forEach(function(i,r){i.setAttribute("svgUid",e.svgUid),e.createObject(i,r)})},T.findTag=function(e){return ni[ni.util.string.capitalize(e.tagName.replace("svg:",""))]},T.createObject=function(e,i){var r=this.findTag(e);if(r&&r.fromElement)try{r.fromElement(e,this.createCallback(i,e),this.options)}catch(o){ni.log(o)}else this.checkIfDone()},T.createCallback=function(e,i){var r=this;return function(o){var s;r.resolveGradient(o,i,"fill"),r.resolveGradient(o,i,"stroke"),o instanceof ni.Image&&o._originalElement&&(s=o.parsePreserveAspectRatioAttribute(i)),o._removeTransformMatrix(s),r.resolveClipPath(o,i),r.reviver&&r.reviver(i,o),r.instances[e]=o,r.checkIfDone()}},T.extractPropertyDefinition=function(e,i,r){var o=e[i],s=this.regexUrl;if(s.test(o)){s.lastIndex=0;var a=s.exec(o)[1];return s.lastIndex=0,ni[r][this.svgUid][a]}},T.resolveGradient=function(e,i,r){var o=this.extractPropertyDefinition(e,r,"gradientDefs");if(o){var s=i.getAttribute(r+"-opacity"),a=ni.Gradient.fromElement(o,e,s,this.options);e.set(r,a)}},T.createClipPathCallback=function(e,i){return function(e){e._removeTransformMatrix(),e.fillRule=e.clipRule,i.push(e)}},T.resolveClipPath=function(e,i){var r,o,s,a,c=this.extractPropertyDefinition(e,"clipPath","clipPaths");if(c){s=[],o=ni.util.invertTransform(e.calcTransformMatrix());for(var l=c[0].parentNode,u=i;u.parentNode&&u.getAttribute("clip-path")!==e.clipPath;)u=u.parentNode;u.parentNode.appendChild(l);for(var h=0;h<c.length;h++)r=c[h],this.findTag(r).fromElement(r,this.createClipPathCallback(e,s),this.options);c=1===s.length?s[0]:new ni.Group(s),a=ni.util.multiplyTransformMatrices(o,c.calcTransformMatrix()),c.clipPath&&this.resolveClipPath(c,u);var f=ni.util.qrDecompose(a);c.flipX=!1,c.flipY=!1,c.set("scaleX",f.scaleX),c.set("scaleY",f.scaleY),c.angle=f.angle,c.skewX=f.skewX,c.skewY=0,c.setPositionByOrigin({x:f.translateX,y:f.translateY},"center","center"),e.clipPath=c}else delete e.clipPath},T.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(e){return null!=e}),this.callback(this.instances,this.elements))},function(e){"use strict";function i(e,i){this.x=e,this.y=i}var r=e.fabric||(e.fabric={});r.Point?r.warn("fabric.Point is already defined"):(r.Point=i,i.prototype={type:"point",constructor:i,add:function(e){return new i(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new i(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new i(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new i(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new i(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new i(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,r){return void 0===r&&(r=.5),r=s(a(1,r),0),new i(this.x+(e.x-this.x)*r,this.y+(e.y-this.y)*r)},distanceFrom:function(e){var i=this.x-e.x,r=this.y-e.y;return nn(i*i+r*r)},midPointFrom:function(e){return this.lerp(e)},min:function(e){return new i(a(this.x,e.x),a(this.y,e.y))},max:function(e){return new i(s(this.x,e.x),s(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,i){return this.x=e,this.y=i,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setFromPoint:function(e){return this.x=e.x,this.y=e.y,this},swap:function(e){var i=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=i,e.y=r},clone:function(){return new i(this.x,this.y)}})}(i),function(e){"use strict";function i(e){this.status=e,this.points=[]}var r=e.fabric||(e.fabric={});r.Intersection?r.warn("fabric.Intersection is already defined"):(r.Intersection=i,r.Intersection.prototype={constructor:i,appendPoint:function(e){return this.points.push(e),this},appendPoints:function(e){return this.points=this.points.concat(e),this}},r.Intersection.intersectLineLine=function(e,o,s,a){var c,l=(a.x-s.x)*(e.y-s.y)-(a.y-s.y)*(e.x-s.x),u=(o.x-e.x)*(e.y-s.y)-(o.y-e.y)*(e.x-s.x),h=(a.y-s.y)*(o.x-e.x)-(a.x-s.x)*(o.y-e.y);if(0!=h){var f=l/h,d=u/h;0<=f&&1>=f&&0<=d&&1>=d?(c=new i("Intersection")).appendPoint(new r.Point(e.x+f*(o.x-e.x),e.y+f*(o.y-e.y))):c=new i}else c=new i(0==l||0==u?"Coincident":"Parallel");return c},r.Intersection.intersectLinePolygon=function(e,r,o){var s,a,c,l,u=new i,h=o.length;for(l=0;l<h;l++)s=o[l],a=o[(l+1)%h],c=i.intersectLineLine(e,r,s,a),u.appendPoints(c.points);return 0<u.points.length&&(u.status="Intersection"),u},r.Intersection.intersectPolygonPolygon=function(e,r){var o,s=new i,a=e.length;for(o=0;o<a;o++){var c=e[o],l=e[(o+1)%a],u=i.intersectLinePolygon(c,l,r);s.appendPoints(u.points)}return 0<s.points.length&&(s.status="Intersection"),s},r.Intersection.intersectPolygonRectangle=function(e,o,s){var a=o.min(s),c=o.max(s),l=new r.Point(c.x,a.y),u=new r.Point(a.x,c.y),h=i.intersectLinePolygon(a,l,e),f=i.intersectLinePolygon(l,c,e),d=i.intersectLinePolygon(c,u,e),p=i.intersectLinePolygon(u,a,e),g=new i;return g.appendPoints(h.points),g.appendPoints(f.points),g.appendPoints(d.points),g.appendPoints(p.points),0<g.points.length&&(g.status="Intersection"),g})}(i),function(e){"use strict";function i(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}function r(e,i,r){return 0>r&&(r+=1),1<r&&(r-=1),r<1/6?e+6*(i-e)*r:r<.5?i:r<2/3?e+(i-e)*(2/3-r)*6:e}var o=e.fabric||(e.fabric={});o.Color?o.warn("fabric.Color is already defined."):(o.Color=i,o.Color.prototype={_tryParsingColor:function(e){var r;e in i.colorNameMap&&(e=i.colorNameMap[e]),"transparent"===e&&(r=[255,255,255,0]),r||(r=i.sourceFromHex(e)),r||(r=i.sourceFromRgb(e)),r||(r=i.sourceFromHsl(e)),r||(r=[0,0,0,1]),r&&this.setSource(r)},_rgbToHsl:function(e,i,r){e/=255,i/=255,r/=255;var s,a,c,l=o.util.array.max([e,i,r]),u=o.util.array.min([e,i,r]);if(c=(l+u)/2,l===u)s=a=0;else{var h=l-u;a=.5<c?h/(2-l-u):h/(l+u),l===e?s=(i-r)/h+(i<r?6:0):l===i?s=(r-e)/h+2:l===r&&(s=(e-i)/h+4),s/=6}return[eq(360*s),eq(100*a),eq(100*c)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),i=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+i[0]+","+i[1]+"%,"+i[2]+"%)"},toHsla:function(){var e=this.getSource(),i=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+e[3]+")"},toHex:function(){var e,i,r,o=this.getSource();return e=1===(e=o[0].toString(16)).length?"0"+e:e,i=1===(i=o[1].toString(16)).length?"0"+i:i,r=1===(r=o[2].toString(16)).length?"0"+r:r,e.toUpperCase()+i.toUpperCase()+r.toUpperCase()},toHexa:function(){var e;return e=1===(e=(e=eq(255*this.getSource()[3])).toString(16)).length?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var i=this.getSource();return i[3]=e,this.setSource(i),this},toGrayscale:function(){var e=this.getSource(),i=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10),r=e[3];return this.setSource([i,i,i,r]),this},toBlackWhite:function(e){var i=this.getSource(),r=(.3*i[0]+.59*i[1]+.11*i[2]).toFixed(0),o=i[3];return r=+r<+(e=e||127)?0:255,this.setSource([r,r,r,o]),this},overlayWith:function(e){e instanceof i||(e=new i(e));var r,o=[],s=this.getAlpha(),a=this.getSource(),c=e.getSource();for(r=0;3>r;r++)o.push(eq(.5*a[r]+.5*c[r]));return o[3]=s,this.setSource(o),this}},o.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,o.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,o.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,o.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},o.Color.fromRgb=function(e){return i.fromSource(i.sourceFromRgb(e))},o.Color.sourceFromRgb=function(e){var r=e.match(i.reRGBa);if(r){var o=parseInt(r[1],10)/(/%$/.test(r[1])?100:1)*(/%$/.test(r[1])?255:1),s=parseInt(r[2],10)/(/%$/.test(r[2])?100:1)*(/%$/.test(r[2])?255:1),a=parseInt(r[3],10)/(/%$/.test(r[3])?100:1)*(/%$/.test(r[3])?255:1);return[parseInt(o,10),parseInt(s,10),parseInt(a,10),r[4]?parseFloat(r[4]):1]}},o.Color.fromRgba=i.fromRgb,o.Color.fromHsl=function(e){return i.fromSource(i.sourceFromHsl(e))},o.Color.sourceFromHsl=function(e){var o=e.match(i.reHSLa);if(o){var s,a,c,l=(parseFloat(o[1])%360+360)%360/360,u=parseFloat(o[2])/(/%$/.test(o[2])?100:1),h=parseFloat(o[3])/(/%$/.test(o[3])?100:1);if(0==u)s=a=c=h;else{var f=.5>=h?h*(u+1):h+u-h*u,d=2*h-f;s=r(d,f,l+1/3),a=r(d,f,l),c=r(d,f,l-1/3)}return[eq(255*s),eq(255*a),eq(255*c),o[4]?parseFloat(o[4]):1]}},o.Color.fromHsla=i.fromHsl,o.Color.fromHex=function(e){return i.fromSource(i.sourceFromHex(e))},o.Color.sourceFromHex=function(e){if(e.match(i.reHex)){var r=e.slice(e.indexOf("#")+1),o=3===r.length||4===r.length,s=8===r.length||4===r.length,a=o?r.charAt(0)+r.charAt(0):r.substring(0,2),c=o?r.charAt(1)+r.charAt(1):r.substring(2,4),l=o?r.charAt(2)+r.charAt(2):r.substring(4,6),u=s?o?r.charAt(3)+r.charAt(3):r.substring(6,8):"FF";return[parseInt(a,16),parseInt(c,16),parseInt(l,16),parseFloat((parseInt(u,16)/255).toFixed(2))]}},o.Color.fromSource=function(e){var r=new i;return r.setSource(e),r})}(i),function(e){"use strict";function i(e,i){var r;return eq((e.angle+E(ne(i.y,i.x))+360)%360/45)}function r(e,i){var r=i.transform.target,o=r.canvas,s=b.util.object.clone(i);s.target=r,o&&o.fire("object:"+e,s),r.fire(e,i)}function a(e,i){var r=i.canvas,o=e[r.uniScaleKey];return r.uniformScaling&&!o||!r.uniformScaling&&o}function l(e){return e.originX===k&&e.originY===k}function u(e,i,r){var o=e.lockScalingX,s=e.lockScalingY;return!((!o||!s)&&(i||!o&&!s||!r)&&(!o||"x"!==i)&&(!s||"y"!==i))}function h(e,i,r,o){return{e:e,transform:i,pointer:{x:r,y:o}}}function f(e){return function(i,r,o,s){var a=r.target,c=a.getCenterPoint(),l=a.translateToOriginPoint(c,r.originX,r.originY),u=e(i,r,o,s);return a.setPositionByOrigin(l,r.originX,r.originY),u}}function d(e,i){return function(o,s,a,c){var l=i(o,s,a,c);return l&&r(e,h(o,s,a,c)),l}}function p(e,i,r,o,s){var a=e.target,c=a.controls[e.corner],l=a.canvas.getZoom(),u=a.padding/l,h=a.toLocalPoint(new b.Point(o,s),i,r);return h.x>=u&&(h.x-=u),h.x<=-u&&(h.x+=u),h.y>=u&&(h.y-=u),h.y<=u&&(h.y+=u),h.x-=c.offsetX,h.y-=c.offsetY,h}function g(e){return e.flipX!==e.flipY}function v(e,i,r,o,s){if(0!==e[i]){var a=s/e._getTransformedDimensions()[o]*e[r];e.set(r,a)}}function m(e,i,r,s){var a,c=i.target,l=c._getTransformedDimensions(0,c.skewY),u=o(2*p(i,i.originX,i.originY,r,s).x)-l.x,h=c.skewX;2>u?a=0:(a=E(ne(u/c.scaleX,l.y/c.scaleY)),i.originX===w&&i.originY===O&&(a=-a),i.originX===T&&i.originY===S&&(a=-a),g(c)&&(a=-a));var f=h!==a;if(f){var d=c._getTransformedDimensions().y;c.set("skewX",a),v(c,"skewY","scaleY","y",d)}return f}function $(e,i,r,s){var a,c=i.target,l=c._getTransformedDimensions(c.skewX,0),u=o(2*p(i,i.originX,i.originY,r,s).y)-l.y,h=c.skewY;2>u?a=0:(a=E(ne(u/c.scaleY,l.x/c.scaleX)),i.originX===w&&i.originY===O&&(a=-a),i.originX===T&&i.originY===S&&(a=-a),g(c)&&(a=-a));var f=h!==a;if(f){var d=c._getTransformedDimensions().x;c.set("skewY",a),v(c,"skewX","scaleX","x",d)}return f}function y(e,i,r,s,c){c=c||{};var h,f,d,g,v,m,$=i.target,y=$.lockScalingX,b=$.lockScalingY,x=c.by,C=a(e,$),_=u($,x,C),w=i.gestureScale;if(_)return!1;if(w)f=i.scaleX*w,d=i.scaleY*w;else{if(h=p(i,i.originX,i.originY,r,s),v="y"===x?1:A(h.x),m="x"===x?1:A(h.y),i.signX||(i.signX=v),i.signY||(i.signY=m),$.lockScalingFlip&&(i.signX!==v||i.signY!==m))return!1;if(g=$._getTransformedDimensions(),C&&!x){var S=o(h.x)+o(h.y),T=i.original,O=S/(o(g.x*T.scaleX/$.scaleX)+o(g.y*T.scaleY/$.scaleY));f=T.scaleX*O,d=T.scaleY*O}else f=o(h.x*$.scaleX/g.x),d=o(h.y*$.scaleY/g.y);l(i)&&(f*=2,d*=2),i.signX!==v&&"y"!==x&&(i.originX=P[i.originX],f*=-1,i.signX=v),i.signY!==m&&"x"!==x&&(i.originY=P[i.originY],d*=-1,i.signY=m)}var k=$.scaleX,E=$.scaleY;return x?("x"===x&&$.set("scaleX",f),"y"===x&&$.set("scaleY",d)):(y||$.set("scaleX",f),b||$.set("scaleY",d)),k!==$.scaleX||E!==$.scaleY}var b=e.fabric||(e.fabric={}),x=["e","se","s","sw","w","nw","n","ne","e"],C=["ns","nesw","ew","nwse"],_={},w="left",S="top",T="right",O="bottom",k="center",P={top:O,bottom:S,left:T,right:w,center:k},E=b.util.radiansToDegrees,A=Math.sign||function(e){return(0<e)-(0>e)||+e};_.scaleCursorStyleHandler=function(e,r,o){var s=a(e,o),c="";return(0!==r.x&&0===r.y?c="x":0===r.x&&0!==r.y&&(c="y"),u(o,c,s))?"not-allowed":x[i(o,r)]+"-resize"},_.skewCursorStyleHandler=function(e,r,o){return 0!==r.x&&o.lockSkewingY||0!==r.y&&o.lockSkewingX?"not-allowed":C[i(o,r)%4]+"-resize"},_.scaleSkewCursorStyleHandler=function(e,i,r){return e[r.canvas.altActionKey]?_.skewCursorStyleHandler(e,i,r):_.scaleCursorStyleHandler(e,i,r)},_.rotationWithSnapping=d("rotating",f(function(e,i,r,s){var a=i,l=a.target,u=l.translateToOriginPoint(l.getCenterPoint(),a.originX,a.originY);if(l.lockRotation)return!1;var h,f=ne(a.ey-u.y,a.ex-u.x),d=ne(s-u.y,r-u.x),p=E(d-f+a.theta);if(0<l.snapAngle){var g=l.snapAngle,v=l.snapThreshold||g,m=eK(p/g)*g,$=c(p/g)*g;o(p-$)<v?p=$:o(p-m)<v&&(p=m)}return 0>p&&(p=360+p),p%=360,h=l.angle!==p,l.angle=p,h})),_.scalingEqually=d("scaling",f(function(e,i,r,o){return y(e,i,r,o)})),_.scalingX=d("scaling",f(function(e,i,r,o){return y(e,i,r,o,{by:"x"})})),_.scalingY=d("scaling",f(function(e,i,r,o){return y(e,i,r,o,{by:"y"})})),_.scalingYOrSkewingX=function(e,i,r,o){return e[i.target.canvas.altActionKey]?_.skewHandlerX(e,i,r,o):_.scalingY(e,i,r,o)},_.scalingXOrSkewingY=function(e,i,r,o){return e[i.target.canvas.altActionKey]?_.skewHandlerY(e,i,r,o):_.scalingX(e,i,r,o)},_.changeWidth=d("resizing",f(function(e,i,r,a){var c=i.target,u=p(i,i.originX,i.originY,r,a),h=c.strokeWidth/(c.strokeUniform?c.scaleX:1),f=l(i)?2:1,d=c.width,g=o(u.x*f/c.scaleX)-h;return c.set("width",s(g,0)),d!==g})),_.skewHandlerX=function(e,i,r,o){var s,a=i.target,c=a.skewX,l=i.originY;return!a.lockSkewingX&&(0===c?s=0<p(i,k,k,r,o).x?w:T:(0<c&&(s=l===S?w:T),0>c&&(s=l===S?T:w),g(a)&&(s=s===w?T:w)),i.originX=s,d("skewing",f(m))(e,i,r,o))},_.skewHandlerY=function(e,i,r,o){var s,a=i.target,c=a.skewY,l=i.originX;return!a.lockSkewingY&&(0===c?s=0<p(i,k,k,r,o).y?S:O:(0<c&&(s=l===w?S:O),0>c&&(s=l===w?O:S),g(a)&&(s=s===S?O:S)),i.originY=s,d("skewing",f($))(e,i,r,o))},_.dragHandler=function(e,i,o,s){var a=i.target,c=o-i.offsetX,l=s-i.offsetY,u=!a.get("lockMovementX")&&a.left!==c,f=!a.get("lockMovementY")&&a.top!==l;return u&&a.set("left",c),f&&a.set("top",l),(u||f)&&r("moving",h(e,i,o,s)),u||f},_.scaleOrSkewActionName=function(e,i,r){var o=e[r.canvas.altActionKey];return 0===i.x?o?"skewX":"scaleY":0===i.y?o?"skewY":"scaleX":void 0},_.rotationStyleHandler=function(e,i,r){return r.lockRotation?"not-allowed":i.cursorStyle},_.fireEvent=r,_.wrapWithFixedAnchor=f,_.wrapWithFireEvent=d,_.getLocalPoint=p,b.controlsUtils=_}(i),P=(k=(O=i).fabric||(O.fabric={})).util.degreesToRadians,(E=k.controlsUtils).renderCircleControl=function(e,i,r,o,s){o=o||{};var a,c=this.sizeX||o.cornerSize||s.cornerSize,l=this.sizeY||o.cornerSize||s.cornerSize,u=void 0===o.transparentCorners?s.transparentCorners:o.transparentCorners,h=!u&&(o.cornerStrokeColor||s.cornerStrokeColor),f=i,d=r;e.save(),e.fillStyle=o.cornerColor||s.cornerColor,e.strokeStyle=o.cornerStrokeColor||s.cornerStrokeColor,c>l?(a=c,e.scale(1,l/c),d=r*c/l):l>c?(a=l,e.scale(c/l,1),f=i*l/c):a=c,e.lineWidth=1,e.beginPath(),e.arc(f,d,a/2,0,2*nt,!1),e[u?"stroke":"fill"](),h&&e.stroke(),e.restore()},E.renderSquareControl=function(e,i,r,o,s){o=o||{};var a=this.sizeX||o.cornerSize||s.cornerSize,c=this.sizeY||o.cornerSize||s.cornerSize,l=void 0===o.transparentCorners?s.transparentCorners:o.transparentCorners,u=!l&&(o.cornerStrokeColor||s.cornerStrokeColor),h=a/2,f=c/2;e.save(),e.fillStyle=o.cornerColor||s.cornerColor,e.strokeStyle=o.cornerStrokeColor||s.cornerStrokeColor,e.lineWidth=1,e.translate(i,r),e.rotate(P(s.angle)),e[(l?"stroke":"fill")+"Rect"](-h,-f,a,c),u&&e.strokeRect(-h,-f,a,c),e.restore()},(D=(A=i).fabric||(A.fabric={})).Control=function(e){for(var i in e)this[i]=e[i]},D.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(e,i){return i.cursorStyle},getActionName:function(e,i){return i.actionName},getVisibility:function(e,i){var r=e._controlsVisibility;return r&&void 0!==r[i]?r[i]:this.visible},setVisibility:function(e){this.visible=e},positionHandler:function(e,i){return D.util.transformPoint({x:this.x*e.x+this.offsetX,y:this.y*e.y+this.offsetY},i)},calcCornerCoords:function(e,i,r,o,s){var a,c,l,u,h=s?this.touchSizeX:this.sizeX,f=s?this.touchSizeY:this.sizeY;if(h&&f&&h!==f){var d=ne(f,h),p=nn(h*h+f*f)/2,g=d-D.util.degreesToRadians(e),v=nt/2-d-D.util.degreesToRadians(e);a=p*D.util.cos(g),c=p*D.util.sin(g),l=p*D.util.cos(v),u=p*D.util.sin(v)}else p=.7071067812*(h&&f?h:i),g=D.util.degreesToRadians(45-e),a=l=p*D.util.cos(g),c=u=p*D.util.sin(g);return{tl:{x:r-u,y:o-l},tr:{x:r+a,y:o-c},bl:{x:r-a,y:o+c},br:{x:r+u,y:o+l}}},render:function(e,i,r,o,s){"circle"===((o=o||{}).cornerStyle||s.cornerStyle)?D.controlsUtils.renderCircleControl.call(this,e,i,r,o,s):D.controlsUtils.renderSquareControl.call(this,e,i,r,o,s)}},function(){function e(e,i){var r,o,s,a,c=e.getAttribute("style"),l=e.getAttribute("offset")||0;if(l=0>(l=parseFloat(l)/(/%$/.test(l)?100:1))?0:1<l?1:l,c){var u=c.split(/\s*;\s*/);for(""===u[u.length-1]&&u.pop(),a=u.length;a--;){var h=u[a].split(/\s*:\s*/),f=h[0].trim(),d=h[1].trim();"stop-color"===f?r=d:"stop-opacity"===f&&(s=d)}}return r||(r=e.getAttribute("stop-color")||"rgb(0,0,0)"),s||(s=e.getAttribute("stop-opacity")),o=(r=new ni.Color(r)).getAlpha(),s=isNaN(parseFloat(s))?1:parseFloat(s),s*=o*i,{offset:l,color:r.toRgb(),opacity:s}}var i=ni.util.object.clone;ni.Gradient=ni.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){e||(e={}),e.coords||(e.coords={});var i,r=this;Object.keys(e).forEach(function(i){r[i]=e[i]}),this.id?this.id+="_"+ni.Object.__uid++:this.id=ni.Object.__uid++,i={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},"radial"===this.type&&(i.r1=e.coords.r1||0,i.r2=e.coords.r2||0),this.coords=i,this.colorStops=e.colorStops.slice()},addColorStop:function(e){for(var i in e){var r=new ni.Color(e[i]);this.colorStops.push({offset:parseFloat(i),color:r.toRgb(),opacity:r.getAlpha()})}return this},toObject:function(e){var i={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return ni.util.populateWithProperties(this,i,e),i},toSVG:function(e,r){var o,c,l,u,h=i(this.coords,!0),f=(r=r||{},i(this.colorStops,!0)),d=h.r1>h.r2,p=this.gradientTransform?this.gradientTransform.concat():ni.iMatrix.concat(),g=-this.offsetX,v=-this.offsetY,m=!!r.additionalTransform,$="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(f.sort(function(e,i){return e.offset-i.offset}),"objectBoundingBox"==$?(g/=e.width,v/=e.height):(g+=e.width/2,v+=e.height/2),"path"===e.type&&"percentage"!==this.gradientUnits&&(g-=e.pathOffset.x,v-=e.pathOffset.y),p[4]-=g,p[5]-=v,u='id="SVGID_'+this.id+'" gradientUnits="'+$+'"',u+=' gradientTransform="'+(m?r.additionalTransform+" ":"")+ni.util.matrixToSVG(p)+'" ',"linear"===this.type?l=["<linearGradient ",u,' x1="',h.x1,'" y1="',h.y1,'" x2="',h.x2,'" y2="',h.y2,'">\n']:"radial"===this.type&&(l=["<radialGradient ",u,' cx="',d?h.x1:h.x2,'" cy="',d?h.y1:h.y2,'" r="',d?h.r1:h.r2,'" fx="',d?h.x2:h.x1,'" fy="',d?h.y2:h.y1,'">\n']),"radial"===this.type){if(d)for((f=f.concat()).reverse(),o=0,c=f.length;o<c;o++)f[o].offset=1-f[o].offset;var y=a(h.r1,h.r2);if(0<y){var b=s(h.r1,h.r2);for(o=0,c=f.length;o<c;o++)f[o].offset+=y/b*(1-f[o].offset)}}for(o=0,c=f.length;o<c;o++){var x=f[o];l.push("<stop ",'offset="',100*x.offset+"%",'" style="stop-color:',x.color,void 0===x.opacity?";":";stop-opacity: "+x.opacity,'"/>\n')}return l.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),l.join("")},toLive:function(e){var i,r,o,s=ni.util.object.clone(this.coords);if(this.type){for("linear"===this.type?i=e.createLinearGradient(s.x1,s.y1,s.x2,s.y2):"radial"===this.type&&(i=e.createRadialGradient(s.x1,s.y1,s.r1,s.x2,s.y2,s.r2)),r=0,o=this.colorStops.length;r<o;r++){var a=this.colorStops[r].color,c=this.colorStops[r].opacity,l=this.colorStops[r].offset;void 0!==c&&(a=new ni.Color(a).setAlpha(c).toRgba()),i.addColorStop(l,a)}return i}}}),ni.util.object.extend(ni.Gradient,{fromElement:function(i,r,o,s){var a=parseFloat(o)/(/%$/.test(o)?100:1);isNaN(a=0>a?0:1<a?1:a)&&(a=1);var c,l,u,h,f,d,p=i.getElementsByTagName("stop"),g="userSpaceOnUse"===i.getAttribute("gradientUnits")?"pixels":"percentage",v=i.getAttribute("gradientTransform")||"",m=[],$=0,y=0;for("linearGradient"===i.nodeName||"LINEARGRADIENT"===i.nodeName?(c="linear",l={x1:(f=i).getAttribute("x1")||0,y1:f.getAttribute("y1")||0,x2:f.getAttribute("x2")||"100%",y2:f.getAttribute("y2")||0}):(c="radial",l={x1:(d=i).getAttribute("fx")||d.getAttribute("cx")||"50%",y1:d.getAttribute("fy")||d.getAttribute("cy")||"50%",r1:0,x2:d.getAttribute("cx")||"50%",y2:d.getAttribute("cy")||"50%",r2:d.getAttribute("r")||"50%"}),u=p.length;u--;)m.push(e(p[u],a));return h=ni.parseTransformAttribute(v),function(e,i,r,o){var s,a;Object.keys(i).forEach(function(e){"Infinity"===(s=i[e])?a=1:"-Infinity"===s?a=0:(a=parseFloat(i[e],10),"string"==typeof s&&/^(\d+\.\d+)%|(\d+)%$/.test(s)&&(a*=.01,"pixels"===o&&(("x1"===e||"x2"===e||"r2"===e)&&(a*=r.viewBoxWidth||r.width),("y1"===e||"y2"===e)&&(a*=r.viewBoxHeight||r.height)))),i[e]=a})}(0,l,s,g),"pixels"==g&&($=-r.left,y=-r.top),new ni.Gradient({id:i.getAttribute("id"),type:c,coords:l,colorStops:m,gradientUnits:g,gradientTransform:h,offsetX:$,offsetY:y})}})}(),L=ni.util.toFixed,ni.Pattern=ni.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(e,i){if(e||(e={}),this.id=ni.Object.__uid++,this.setOptions(e),!e.source||e.source&&"string"!=typeof e.source)i&&i(this);else{var r=this;this.source=ni.util.createImage(),ni.util.loadImage(e.source,function(e,o){r.source=e,i&&i(r,o)},null,this.crossOrigin)}},toObject:function(e){var i,r,o=ni.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?i=this.source.src:"object"===u(this.source)&&this.source.toDataURL&&(i=this.source.toDataURL()),r={type:"pattern",source:i,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:L(this.offsetX,o),offsetY:L(this.offsetY,o),patternTransform:this.patternTransform?this.patternTransform.concat():null},ni.util.populateWithProperties(this,r,e),r},toSVG:function(e){var i="function"==typeof this.source?this.source():this.source,r=i.width/e.width,s=i.height/e.height,a=this.offsetX/e.width,c=this.offsetY/e.height,l="";return("repeat-x"===this.repeat||"no-repeat"===this.repeat)&&(s=1,c&&(s+=o(c))),("repeat-y"===this.repeat||"no-repeat"===this.repeat)&&(r=1,a&&(r+=o(a))),i.src?l=i.src:i.toDataURL&&(l=i.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+a+'" y="'+c+'" width="'+r+'" height="'+s+'">\n<image x="0" y="0" width="'+i.width+'" height="'+i.height+'" xlink:href="'+l+'"></image>\n</pattern>\n'},setOptions:function(e){for(var i in e)this[i]=e[i]},toLive:function(e){var i=this.source;return i&&(void 0===i.src||i.complete&&0!==i.naturalWidth&&0!==i.naturalHeight)?e.createPattern(i,this.repeat):""}}),F=(I=(j=i).fabric||(j.fabric={})).util.toFixed,I.Shadow?I.warn("fabric.Shadow is already defined."):(I.Shadow=I.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(e){for(var i in"string"==typeof e&&(e=this._parseShadow(e)),e)this[i]=e[i];this.id=I.Object.__uid++},_parseShadow:function(e){var i=e.trim(),r=I.Shadow.reOffsetsAndBlur.exec(i)||[];return{color:(i.replace(I.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(r[1],10)||0,offsetY:parseFloat(r[2],10)||0,blur:parseFloat(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(e){var i=40,r=40,s=I.Object.NUM_FRACTION_DIGITS,a=I.util.rotateVector({x:this.offsetX,y:this.offsetY},I.util.degreesToRadians(-e.angle)),c=new I.Color(this.color);return e.width&&e.height&&(i=100*F((o(a.x)+this.blur)/e.width,s)+20,r=100*F((o(a.y)+this.blur)/e.height,s)+20),e.flipX&&(a.x*=-1),e.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+i+'%" width="'+(100+2*i)+'%" >\n  <feGaussianBlur in="SourceAlpha" stdDeviation="'+F(this.blur?this.blur/2:0,s)+'"></feGaussianBlur>\n    <feOffset dx="'+F(a.x,s)+'" dy="'+F(a.y,s)+'" result="oBlur" ></feOffset>\n <feFlood flood-color="'+c.toRgb()+'" flood-opacity="'+c.getAlpha()+'"/>\n   <feComposite in2="oBlur" operator="in" />\n <feMerge>\n     <feMergeNode></feMergeNode>\n       <feMergeNode in="SourceGraphic"></feMergeNode>\n    </feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var e={},i=I.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(r){this[r]!==i[r]&&(e[r]=this[r])},this),e}}),I.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/),function(){"use strict";if(ni.StaticCanvas)ni.warn("fabric.StaticCanvas is already defined.");else{var e=ni.util.object.extend,i=ni.util.getElementOffset,r=ni.util.removeFromArray,o=ni.util.toFixed,a=ni.util.transformPoint,c=ni.util.invertTransform,l=ni.util.getNodeCanvas,u=ni.util.createCanvasElement,h=Error("Could not initialize `canvas` element");ni.StaticCanvas=ni.util.createClass(ni.CommonMethods,{initialize:function(e,i){i||(i={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,i)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:ni.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(e,i){var r=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(e),this._initOptions(i),this.interactive||this._initRetinaScaling(),i.overlayImage&&this.setOverlayImage(i.overlayImage,r),i.backgroundImage&&this.setBackgroundImage(i.backgroundImage,r),i.backgroundColor&&this.setBackgroundColor(i.backgroundColor,r),i.overlayColor&&this.setOverlayColor(i.overlayColor,r),this.calcOffset()},_isRetinaScaling:function(){return 1<ni.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?s(1,ni.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var e=ni.devicePixelRatio;this.__initRetinaScaling(e,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(e,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(e,i,r){i.setAttribute("width",this.width*e),i.setAttribute("height",this.height*e),r.scale(e,e)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(e,i,r){return this.__setBgOverlayImage("overlayImage",e,i,r)},setBackgroundImage:function(e,i,r){return this.__setBgOverlayImage("backgroundImage",e,i,r)},setOverlayColor:function(e,i){return this.__setBgOverlayColor("overlayColor",e,i)},setBackgroundColor:function(e,i){return this.__setBgOverlayColor("backgroundColor",e,i)},__setBgOverlayImage:function(e,i,r,o){return"string"==typeof i?ni.util.loadImage(i,function(i,s){if(i){var a=new ni.Image(i,o);this[e]=a,a.canvas=this}r&&r(i,s)},this,o&&o.crossOrigin):(o&&i.setOptions(o),this[e]=i,i&&(i.canvas=this),r&&r(i,!1)),this},__setBgOverlayColor:function(e,i,r){return this[e]=i,this._initGradient(i,e),this._initPattern(i,e,r),this},_createCanvasElement:function(){var e=u();if(!e||(e.style||(e.style={}),void 0===e.getContext))throw h;return e},_initOptions:function(e){var i=this.lowerCanvasEl;this._setOptions(e),this.width=this.width||parseInt(i.width,10)||0,this.height=this.height||parseInt(i.height,10)||0,this.lowerCanvasEl.style&&(i.width=this.width,i.height=this.height,i.style.width=this.width+"px",i.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(e){this.lowerCanvasEl=e&&e.getContext?e:ni.util.getById(e)||this._createCanvasElement(),ni.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,i){return this.setDimensions({width:e},i)},setHeight:function(e,i){return this.setDimensions({height:e},i)},setDimensions:function(e,i){var r;for(var o in i=i||{},e)r=e[o],i.cssOnly||(this._setBackstoreDimension(o,e[o]),r+="px",this.hasLostContext=!0),i.backstoreOnly||this._setCssDimension(o,r);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),i.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(e,i){return this.lowerCanvasEl[e]=i,this.upperCanvasEl&&(this.upperCanvasEl[e]=i),this.cacheCanvasEl&&(this.cacheCanvasEl[e]=i),this[e]=i,this},_setCssDimension:function(e,i){return this.lowerCanvasEl.style[e]=i,this.upperCanvasEl&&(this.upperCanvasEl.style[e]=i),this.wrapperEl&&(this.wrapperEl.style[e]=i),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(e){var i,r,o,s=this._activeObject,a=this.backgroundImage,c=this.overlayImage;for(this.viewportTransform=e,r=0,o=this._objects.length;r<o;r++)(i=this._objects[r]).group||i.setCoords(!0);return s&&s.setCoords(),a&&a.setCoords(!0),c&&c.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(e,i){var r=e,o=this.viewportTransform.slice(0);e=a(e,c(this.viewportTransform)),o[0]=i,o[3]=i;var s=a(e,o);return o[4]+=r.x-s.x,o[5]+=r.y-s.y,this.setViewportTransform(o)},setZoom:function(e){return this.zoomToPoint(new ni.Point(0,0),e),this},absolutePan:function(e){var i=this.viewportTransform.slice(0);return i[4]=-e.x,i[5]=-e.y,this.setViewportTransform(i)},relativePan:function(e){return this.absolutePan(new ni.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(e){this.stateful&&e.setupState(),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added")},_onObjectRemoved:function(e){this.fire("object:removed",{target:e}),e.fire("removed"),delete e.canvas},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var e=this.contextContainer;return this.renderCanvas(e,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=ni.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var e={},i=this.width,r=this.height,o=c(this.viewportTransform);return e.tl=a({x:0,y:0},o),e.br=a({x:i,y:r},o),e.tr=new ni.Point(e.br.x,e.tl.y),e.bl=new ni.Point(e.tl.x,e.br.y),this.vptCoords=e,e},cancelRequestedRender:function(){this.isRendering&&(ni.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(e,i){var r=this.viewportTransform,o=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(e),ni.util.setImageSmoothing(e,this.imageSmoothingEnabled),this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,i),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),o&&(o.canvas=this,o.shouldCache(),o._transformDone=!0,o.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e)),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render",{ctx:e})},drawClipPathOnCanvas:function(e){var i=this.viewportTransform,r=this.clipPath;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e.globalCompositeOperation="destination-in",r.transform(e),e.scale(1/r.zoomX,1/r.zoomY),e.drawImage(r._cacheCanvas,-r.cacheTranslationX,-r.cacheTranslationY),e.restore()},_renderObjects:function(e,i){var r,o;for(r=0,o=i.length;r<o;++r)i[r]&&i[r].render(e)},_renderBackgroundOrOverlay:function(e,i){var r=this[i+"Color"],o=this[i+"Image"],s=this.viewportTransform,a=this[i+"Vpt"];if(r||o){if(r){e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=r.toLive?r.toLive(e,this):r,a&&e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);var c=r.gradientTransform||r.patternTransform;c&&e.transform(c[0],c[1],c[2],c[3],c[4],c[5]),e.fill(),e.restore()}o&&(e.save(),a&&e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),o.render(e),e.restore())}},_renderBackground:function(e){this._renderBackgroundOrOverlay(e,"background")},_renderOverlay:function(e){this._renderBackgroundOrOverlay(e,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new ni.Point(this.width/2,this.height/2)},centerObjectH:function(e){return this._centerObject(e,new ni.Point(this.getCenterPoint().x,e.getCenterPoint().y))},centerObjectV:function(e){return this._centerObject(e,new ni.Point(e.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(e){var i=this.getCenterPoint();return this._centerObject(e,i)},viewportCenterObject:function(e){var i=this.getVpCenter();return this._centerObject(e,i)},viewportCenterObjectH:function(e){var i=this.getVpCenter();return this._centerObject(e,new ni.Point(i.x,e.getCenterPoint().y)),this},viewportCenterObjectV:function(e){var i=this.getVpCenter();return this._centerObject(e,new ni.Point(e.getCenterPoint().x,i.y))},getVpCenter:function(){var e;return a(this.getCenterPoint(),c(this.viewportTransform))},_centerObject:function(e,i){return e.setPositionByOrigin(i,"center","center"),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(i,r){var o=this.clipPath,s={version:ni.version,objects:this._toObjects(i,r)};return o&&!o.excludeFromExport&&(s.clipPath=this._toObject(this.clipPath,i,r)),e(s,this.__serializeBgOverlay(i,r)),ni.util.populateWithProperties(this,s,r),s},_toObjects:function(e,i){return this._objects.filter(function(e){return!e.excludeFromExport}).map(function(r){return this._toObject(r,e,i)},this)},_toObject:function(e,i,r){this.includeDefaultValues||(o=e.includeDefaultValues,e.includeDefaultValues=!1);var o,s=e[i](r);return this.includeDefaultValues||(e.includeDefaultValues=o),s},__serializeBgOverlay:function(e,i){var r={},o=this.backgroundImage,s=this.overlayImage,a=this.backgroundColor,c=this.overlayColor;return a&&a.toObject?a.excludeFromExport||(r.background=a.toObject(i)):a&&(r.background=a),c&&c.toObject?c.excludeFromExport||(r.overlay=c.toObject(i)):c&&(r.overlay=c),o&&!o.excludeFromExport&&(r.backgroundImage=this._toObject(o,e,i)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,i)),r},svgViewportTransformation:!0,toSVG:function(e,i){e||(e={}),e.reviver=i;var r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",i),this._setSVGObjects(r,i),this.clipPath&&r.push("</g>\n"),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",i),r.push("</svg>"),r.join("")},_setSVGPreamble:function(e,i){i.suppressPreamble||e.push('<?xml version="1.0" encoding="',i.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(e,i){var r,s=i.width||this.width,a=i.height||this.height,c='viewBox="0 0 '+this.width+" "+this.height+'" ',l=ni.Object.NUM_FRACTION_DIGITS;i.viewBox?c='viewBox="'+i.viewBox.x+" "+i.viewBox.y+" "+i.viewBox.width+" "+i.viewBox.height+'" ':this.svgViewportTransformation&&(c='viewBox="'+o(-(r=this.viewportTransform)[4]/r[0],l)+" "+o(-r[5]/r[3],l)+" "+o(this.width/r[0],l)+" "+o(this.height/r[3],l)+'" '),e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',s,'" ','height="',a,'" ',c,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",ni.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(i),"</defs>\n")},createSVGClipPathMarkup:function(e){var i=this.clipPath;return i?(i.clipPathId="CLIPPATH_"+ni.Object.__uid++,'<clipPath id="'+i.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(e.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var e=this;return["background","overlay"].map(function(i){var r=e[i+"Color"];if(r&&r.toLive){var o=e[i+"Vpt"],s=e.viewportTransform,a={width:e.width/(o?s[0]:1),height:e.height/(o?s[3]:1)};return r.toSVG(a,{additionalTransform:o?ni.util.matrixToSVG(s):""})}}).join("")},createSVGFontFacesMarkup:function(){var e,i,r,o,s,a,c,l,u="",h={},f=ni.fontPaths,d=[];for(this._objects.forEach(function e(i){d.push(i),i._objects&&i._objects.forEach(e)}),c=0,l=d.length;c<l;c++)if(i=(e=d[c]).fontFamily,-1!==e.type.indexOf("text")&&!h[i]&&f[i]&&(h[i]=!0,e.styles))for(s in r=e.styles)for(a in o=r[s])!h[i=o[a].fontFamily]&&f[i]&&(h[i]=!0);for(var p in h)u+=["      @font-face {\n","           font-family: '",p,"';\n","          src: url('",f[p],"');\n","      }\n"].join("");return u&&(u=['  <style type="text/css">',"<![CDATA[\n",u,"]]>","</style>\n"].join("")),u},_setSVGObjects:function(e,i){var r,o,s,a=this._objects;for(o=0,s=a.length;o<s;o++)(r=a[o]).excludeFromExport||this._setSVGObject(e,r,i)},_setSVGObject:function(e,i,r){e.push(i.toSVG(r))},_setSVGBgOverlayImage:function(e,i,r){this[i]&&!this[i].excludeFromExport&&this[i].toSVG&&e.push(this[i].toSVG(r))},_setSVGBgOverlayColor:function(e,i){var r=this[i+"Color"],o=this.viewportTransform,s=this.width,a=this.height;if(r){if(r.toLive){var c=r.repeat,l=ni.util.invertTransform(o),u=this[i+"Vpt"]?ni.util.matrixToSVG(l):"";e.push('<rect transform="'+u+" translate(",s/2,",",a/2,')"',' x="',r.offsetX-s/2,'" y="',r.offsetY-a/2,'" ','width="',"repeat-y"===c||"no-repeat"===c?r.source.width:s,'" height="',"repeat-x"===c||"no-repeat"===c?r.source.height:a,'" fill="url(#SVGID_'+r.id+')"',"></rect>\n")}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',"></rect>\n")}},sendToBack:function(e){if(!e)return this;var i,o,s,a=this._activeObject;if(e===a&&"activeSelection"===e.type)for(i=(s=a._objects).length;i--;)o=s[i],r(this._objects,o),this._objects.unshift(o);else r(this._objects,e),this._objects.unshift(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(e){if(!e)return this;var i,o,s,a=this._activeObject;if(e===a&&"activeSelection"===e.type)for(s=a._objects,i=0;i<s.length;i++)o=s[i],r(this._objects,o),this._objects.push(o);else r(this._objects,e),this._objects.push(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(e,i){if(!e)return this;var o,s,a,c,l,u=this._activeObject,h=0;if(e===u&&"activeSelection"===e.type)for(l=u._objects,o=0;o<l.length;o++)s=l[o],(a=this._objects.indexOf(s))>0+h&&(c=a-1,r(this._objects,s),this._objects.splice(c,0,s)),h++;else 0!==(a=this._objects.indexOf(e))&&(c=this._findNewLowerIndex(e,a,i),r(this._objects,e),this._objects.splice(c,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(e,i,r){var o,s;if(r){for(o=i,s=i-1;0<=s;--s)if(e.intersectsWithObject(this._objects[s])||e.isContainedWithinObject(this._objects[s])||this._objects[s].isContainedWithinObject(e)){o=s;break}}else o=i-1;return o},bringForward:function(e,i){if(!e)return this;var o,s,a,c,l,u=this._activeObject,h=0;if(e===u&&"activeSelection"===e.type)for(o=(l=u._objects).length;o--;)s=l[o],(a=this._objects.indexOf(s))<this._objects.length-1-h&&(c=a+1,r(this._objects,s),this._objects.splice(c,0,s)),h++;else(a=this._objects.indexOf(e))!==this._objects.length-1&&(c=this._findNewUpperIndex(e,a,i),r(this._objects,e),this._objects.splice(c,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(e,i,r){var o,s,a;if(r){for(o=i,s=i+1,a=this._objects.length;s<a;++s)if(e.intersectsWithObject(this._objects[s])||e.isContainedWithinObject(this._objects[s])||this._objects[s].isContainedWithinObject(e)){o=s;break}}else o=i+1;return o},moveTo:function(e,i){return r(this._objects,e),this._objects.splice(i,0,e),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(ni.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(e){e.dispose&&e.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),ni.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),ni.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),e(ni.StaticCanvas.prototype,ni.Observable),e(ni.StaticCanvas.prototype,ni.Collection),e(ni.StaticCanvas.prototype,ni.DataURLExporter),e(ni.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var i=u();if(!i||!i.getContext)return null;var r=i.getContext("2d");return r&&"setLineDash"===e?void 0!==r.setLineDash:null}}),ni.StaticCanvas.prototype.toJSON=ni.StaticCanvas.prototype.toObject,ni.isLikelyNode&&(ni.StaticCanvas.prototype.createPNGStream=function(){var e=l(this.lowerCanvasEl);return e&&e.createPNGStream()},ni.StaticCanvas.prototype.createJPEGStream=function(e){var i=l(this.lowerCanvasEl);return i&&i.createJPEGStream(e)})}}(),ni.BaseBrush=ni.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(e){var i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(this.shadow){var e=this.canvas,i=this.shadow,r=e.contextTop,o=e.getZoom();e&&e._isRetinaScaling()&&(o*=ni.devicePixelRatio),r.shadowColor=i.color,r.shadowBlur=i.blur*o,r.shadowOffsetX=i.offsetX*o,r.shadowOffsetY=i.offsetY*o}},needsFullRender:function(){return 1>new ni.Color(this.color).getAlpha()||!!this.shadow},_resetShadow:function(){var e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0},_isOutSideCanvas:function(e){return 0>e.x||e.x>this.canvas.getWidth()||0>e.y||e.y>this.canvas.getHeight()}}),ni.PencilBrush=ni.util.createClass(ni.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(e){this.canvas=e,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(e,i,r){var o=i.midPointFrom(r);return e.quadraticCurveTo(i.x,i.y,o.x,o.y),o},onMouseDown:function(e,i){this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],this._prepareForDrawing(e),this._captureDrawingPath(e),this._render())},onMouseMove:function(e,i){if(this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(e))&&this._captureDrawingPath(e)&&1<this._points.length){if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var r=this._points,o=r.length,s=this.canvas.contextTop;this._saveAndTransform(s),this.oldEnd&&(s.beginPath(),s.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(s,r[o-2],r[o-1],!0),s.stroke(),s.restore()}}},onMouseUp:function(e){return!this.canvas._isMainEvent(e.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(e){var i=new ni.Point(e.x,e.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(e){return!(1<this._points.length&&e.eq(this._points[this._points.length-1])||(this.drawStraightLine&&1<this._points.length&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(e){var i=new ni.Point(e.x,e.y);return this._addPoint(i)},_render:function(e){var i,r,o=this._points[0],s=this._points[1];if(e=e||this.canvas.contextTop,this._saveAndTransform(e),e.beginPath(),2===this._points.length&&o.x===s.x&&o.y===s.y){var a=this.width/1e3;o=new ni.Point(o.x,o.y),s=new ni.Point(s.x,s.y),o.x-=a,s.x+=a}for(e.moveTo(o.x,o.y),i=1,r=this._points.length;i<r;i++)this._drawSegment(e,o,s),o=this._points[i],s=this._points[i+1];e.lineTo(o.x,o.y),e.stroke(),e.restore()},convertPointsToSVGPath:function(e){var i=this.width/1e3;return ni.util.getSmoothPathFromPoints(e,i)},_isEmptySVGPath:function(e){return"M 0 0 Q 0 0 0 0 L 0 0"===ni.util.joinPath(e)},createPath:function(e){var i=new ni.Path(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.shadow=new ni.Shadow(this.shadow)),i},decimatePoints:function(e,i){if(2>=e.length)return e;var r,o=l(i/this.canvas.getZoom(),2),s=e.length-1,a=e[0],c=[a];for(r=1;r<s-1;r++)l(a.x-e[r].x,2)+l(a.y-e[r].y,2)>=o&&(a=e[r],c.push(a));return c.push(e[s]),c},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(e))this.canvas.requestRenderAll();else{var i=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.requestRenderAll(),i.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:i})}}}),ni.CircleBrush=ni.util.createClass(ni.BaseBrush,{width:10,initialize:function(e){this.canvas=e,this.points=[]},drawDot:function(e){var i=this.addPoint(e),r=this.canvas.contextTop;this._saveAndTransform(r),this.dot(r,i),r.restore()},dot:function(e,i){e.fillStyle=i.fill,e.beginPath(),e.arc(i.x,i.y,i.radius,0,2*nt,!1),e.closePath(),e.fill()},onMouseDown:function(e){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)},_render:function(){var e,i,r=this.canvas.contextTop,o=this.points;for(this._saveAndTransform(r),e=0,i=o.length;e<i;e++)this.dot(r,o[e]);r.restore()},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e))},onMouseUp:function(){var e,i,r=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var o=[];for(e=0,i=this.points.length;e<i;e++){var s=this.points[e],a=new ni.Circle({radius:s.radius,left:s.x,top:s.y,originX:"center",originY:"center",fill:s.fill});this.shadow&&(a.shadow=new ni.Shadow(this.shadow)),o.push(a)}var c=new ni.Group(o);c.canvas=this.canvas,this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=r,this.canvas.requestRenderAll()},addPoint:function(e){var i=new ni.Point(e.x,e.y),r=ni.util.getRandomInt(s(0,this.width-20),this.width+20)/2,o=new ni.Color(this.color).setAlpha(ni.util.getRandomInt(0,100)/100).toRgba();return i.radius=r,i.fill=o,this.points.push(i),i}}),ni.SprayBrush=ni.util.createClass(ni.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(e){this.canvas=e,this.sprayChunks=[]},onMouseDown:function(e){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.render(this.sprayChunkPoints)},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.addSprayChunk(e),this.render(this.sprayChunkPoints))},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i,r=[],o=0,s=this.sprayChunks.length;o<s;o++)for(var a,c=0,l=(i=this.sprayChunks[o]).length;c<l;c++)a=new ni.Rect({width:i[c].width,height:i[c].width,left:i[c].x+1,top:i[c].y+1,originX:"center",originY:"center",fill:this.color}),r.push(a);this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var u=new ni.Group(r);this.shadow&&u.set("shadow",new ni.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.fire("path:created",{path:u}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()},_getOptimizedRects:function(e){var i,r,o,s={};for(r=0,o=e.length;r<o;r++)s[i=e[r].left+""+e[r].top]||(s[i]=e[r]);var a=[];for(i in s)a.push(s[i]);return a},render:function(e){var i,r,o=this.canvas.contextTop;for(o.fillStyle=this.color,this._saveAndTransform(o),i=0,r=e.length;i<r;i++){var s=e[i];void 0!==s.opacity&&(o.globalAlpha=s.opacity),o.fillRect(s.x,s.y,s.width,s.width)}o.restore()},_render:function(){var e,i,r=this.canvas.contextTop;for(r.fillStyle=this.color,this._saveAndTransform(r),e=0,i=this.sprayChunks.length;e<i;e++)this.render(this.sprayChunks[e]);r.restore()},addSprayChunk:function(e){this.sprayChunkPoints=[];var i,r,o,a,c=this.width/2;for(a=0;a<this.density;a++){i=ni.util.getRandomInt(e.x-c,e.x+c),r=ni.util.getRandomInt(e.y-c,e.y+c),o=this.dotWidthVariance?ni.util.getRandomInt(s(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var l=new ni.Point(i,r);l.width=o,this.randomOpacity&&(l.opacity=ni.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(l)}this.sprayChunks.push(this.sprayChunkPoints)}}),ni.PatternBrush=ni.util.createClass(ni.PencilBrush,{getPatternSrc:function(){var e=ni.util.createCanvasElement(),i=e.getContext("2d");return e.width=e.height=25,i.fillStyle=this.color,i.beginPath(),i.arc(10,10,10,0,2*nt,!1),i.closePath(),i.fill(),e},getPatternSrcFunction:function(){return(this.getPatternSrc+"").replace("this.color",'"'+this.color+'"')},getPattern:function(e){return e.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(e){this.callSuper("_setBrushStyles",e),e.strokeStyle=this.getPattern(e)},createPath:function(e){var i=this.callSuper("createPath",e),r=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new ni.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-r.x,offsetY:-r.y}),i}}),function(){var e=ni.util.getPointer,i=ni.util.degreesToRadians,r=ni.util.isTouchEvent;for(var c in ni.Canvas=ni.util.createClass(ni.StaticCanvas,{initialize:function(e,i){i||(i={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,i),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=ni.PencilBrush&&new ni.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e,i,r,o=this.getActiveObjects();if(0<o.length&&!this.preserveObjectStacking){i=[],r=[];for(var s=0,a=this._objects.length;s<a;s++)e=this._objects[s],-1===o.indexOf(e)?i.push(e):r.push(e);1<o.length&&(this._activeObject._objects=r),i.push.apply(i,r)}else i=this._objects;return i},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_normalizePointer:function(e,i){var r=e.calcTransformMatrix(),o=ni.util.invertTransform(r),s=this.restorePointerVpt(i);return ni.util.transformPoint(s,o)},isTargetTransparent:function(e,i,r){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var o=this._normalizePointer(e,{x:i,y:r}),a=s(e.cacheTranslationX+o.x*e.zoomX,0),c=s(e.cacheTranslationY+o.y*e.zoomY,0);return ni.util.isTransparent(e._cacheContext,eq(a),eq(c),this.targetFindTolerance)}var l=this.contextCache,u=e.selectionBackgroundColor,h=this.viewportTransform;return e.selectionBackgroundColor="",this.clearContext(l),l.save(),l.transform(h[0],h[1],h[2],h[3],h[4],h[5]),e.render(l),l.restore(),e.selectionBackgroundColor=u,ni.util.isTransparent(l,i,r,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(i){return!0===e[i]}):e[this.selectionKey]},_shouldClearSelection:function(e,i){var r=this.getActiveObjects(),o=this._activeObject;return!i||i&&o&&1<r.length&&-1===r.indexOf(i)&&o!==i&&!this._isSelectionKeyPressed(e)||i&&!i.evented||i&&!i.selectable&&o&&o!==i},_shouldCenterTransform:function(e,i,r){var o;if(e)return"scale"===i||"scaleX"===i||"scaleY"===i||"resizing"===i?o=this.centeredScaling||e.centeredScaling:"rotate"==i&&(o=this.centeredRotation||e.centeredRotation),o?!r:r},_getOriginFromCorner:function(e,i){var r={x:e.originX,y:e.originY};return"ml"===i||"tl"===i||"bl"===i?r.x="right":("mr"==i||"tr"==i||"br"==i)&&(r.x="left"),"tl"===i||"mt"===i||"tr"===i?r.y="bottom":("bl"==i||"mb"==i||"br"==i)&&(r.y="top"),r},_getActionFromCorner:function(e,i,r,o){if(!i||!e)return"drag";var s=o.controls[i];return s.getActionName(r,s,o)},_setupCurrentTransform:function(e,r,o){if(r){var s=this.getPointer(e),a=r.__corner,c=r.controls[a],l=o&&a?c.getActionHandler(e,r,c):ni.controlsUtils.dragHandler,u=this._getActionFromCorner(o,a,e,r),h=this._getOriginFromCorner(r,a),f=e[this.centeredKey],d={target:r,action:u,actionHandler:l,corner:a,scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,offsetX:s.x-r.left,offsetY:s.y-r.top,originX:h.x,originY:h.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:i(r.angle),width:r.width*r.scaleX,shiftKey:e.shiftKey,altKey:f,original:ni.util.saveObjectTransform(r)};this._shouldCenterTransform(r,u,f)&&(d.originX="center",d.originY="center"),d.original.originX=h.x,d.original.originY=h.y,this._currentTransform=d,this._beforeTransform(e)}},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var i=this._groupSelector,r=new ni.Point(i.ex,i.ey),o=ni.util.transformPoint(r,this.viewportTransform),c=new ni.Point(i.ex+i.left,i.ey+i.top),l=ni.util.transformPoint(c,this.viewportTransform),u=a(o.x,l.x),h=a(o.y,l.y),f=s(o.x,l.x),d=s(o.y,l.y),p=this.selectionLineWidth/2;this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(u,h,f-u,d-h)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,u+=p,h+=p,f-=p,d-=p,ni.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(u,h,f-u,d-h))},findTarget:function(e,i){if(!this.skipTargetFind){var o,s,a=this.getPointer(e,!0),c=this._activeObject,l=this.getActiveObjects(),u=r(e),h=1<l.length&&!i||1===l.length;if(this.targets=[],h&&c._findTargetCorner(a,u)||1<l.length&&!i&&c===this._searchPossibleTargets([c],a))return c;if(1===l.length&&c===this._searchPossibleTargets([c],a)){if(!this.preserveObjectStacking)return c;o=c,s=this.targets,this.targets=[]}var f=this._searchPossibleTargets(this._objects,a);return e[this.altSelectionKey]&&f&&o&&f!==o&&(f=o,this.targets=s),f}},_checkTarget:function(e,i,r){if(i&&i.visible&&i.evented&&i.containsPoint(e)&&(!this.perPixelTargetFind&&!i.perPixelTargetFind||i.isEditing||!this.isTargetTransparent(i,r.x,r.y)))return!0},_searchPossibleTargets:function(e,i){for(var r,o,s=e.length;s--;){var a=e[s],c=a.group?this._normalizePointer(a.group,i):i;if(this._checkTarget(c,a,i)){(r=e[s]).subTargetCheck&&r instanceof ni.Group&&(o=this._searchPossibleTargets(r._objects,i))&&this.targets.push(o);break}}return r},restorePointerVpt:function(e){return ni.util.transformPoint(e,ni.util.invertTransform(this.viewportTransform))},getPointer:function(i,r){if(this._absolutePointer&&!r)return this._absolutePointer;if(this._pointer&&r)return this._pointer;var s,a=e(i),c=this.upperCanvasEl,l=c.getBoundingClientRect(),u=l.width||0,h=l.height||0;u&&h||("top"in l&&"bottom"in l&&(h=o(l.top-l.bottom)),"right"in l&&"left"in l&&(u=o(l.right-l.left))),this.calcOffset(),a.x-=this._offset.left,a.y-=this._offset.top,r||(a=this.restorePointerVpt(a));var f=this.getRetinaScaling();return 1!==f&&(a.x/=f,a.y/=f),s=0===u||0===h?{width:1,height:1}:{width:c.width/u,height:c.height/h},{x:a.x*s.width,y:a.y*s.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),i=this.lowerCanvasEl,r=this.upperCanvasEl;r?r.className="":(r=this._createCanvasElement(),this.upperCanvasEl=r),ni.util.addClass(r,"upper-canvas "+e),this.wrapperEl.appendChild(r),this._copyCanvasStyle(i,r),this._applyCanvasStyle(r),this.contextTop=r.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=ni.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),ni.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),ni.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var i=this.width||e.width,r=this.height||e.height;ni.util.setStyle(e,{position:"absolute",width:i+"px",height:r+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=i,e.height=r,ni.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,i){i.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?"activeSelection"===e.type&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,i){var r=!1,o=this.getActiveObjects(),s=[],a=[];e.forEach(function(e){-1===o.indexOf(e)&&(r=!0,e.fire("deselected",{e:i,target:e}),a.push(e))}),o.forEach(function(o){-1===e.indexOf(o)&&(r=!0,o.fire("selected",{e:i,target:o}),s.push(o))}),0<e.length&&0<o.length?r&&this.fire("selection:updated",{e:i,selected:s,deselected:a}):0<o.length?this.fire("selection:created",{e:i,selected:s}):0<e.length&&this.fire("selection:cleared",{e:i,deselected:a})},setActiveObject:function(e,i){var r=this.getActiveObjects();return this._setActiveObject(e,i),this._fireSelectionEvents(r,i),this},_setActiveObject:function(e,i){return this._activeObject!==e&&!!this._discardActiveObject(i,e)&&!e.onSelect({e:i})&&(this._activeObject=e,!0)},_discardActiveObject:function(e,i){var r=this._activeObject;if(r){if(r.onDeselect({e:e,object:i}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var i=this.getActiveObjects(),r=this.getActiveObject();return i.length&&this.fire("before:selection:cleared",{target:r,e:e}),this._discardActiveObject(e),this._fireSelectionEvents(i,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(e){ni.util.cleanUpJsdomNode(this[e]),this[e]=void 0}).bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,ni.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var i=this._activeObject;i&&i._renderControls(e)},_toObject:function(e,i,r){var o=this._realizeGroupTransformOnObject(e),s=this.callSuper("_toObject",e,i,r);return this._unwindGroupTransformOnObject(e,o),s},_realizeGroupTransformOnObject:function(e){if(e.group&&"activeSelection"===e.group.type&&this._activeObject===e.group){var i={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(r){i[r]=e[r]}),ni.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),i}return null},_unwindGroupTransformOnObject:function(e,i){i&&e.set(i)},_setSVGObject:function(e,i,r){var o=this._realizeGroupTransformOnObject(i);this.callSuper("_setSVGObject",e,i,r),this._unwindGroupTransformOnObject(i,o)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),ni.StaticCanvas.prototype.setViewportTransform.call(this,e)}}),ni.StaticCanvas)"prototype"!==c&&(ni.Canvas[c]=ni.StaticCanvas[c])}(),function(){function e(e,i){return e.button&&e.button===i-1}var i=ni.util.addListener,r=ni.util.removeListener,o={passive:!1};ni.util.object.extend(ni.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(i,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(e,i){var r=this.upperCanvasEl,s=this._getEventPrefix();e(ni.window,"resize",this._onResize),e(r,s+"down",this._onMouseDown),e(r,s+"move",this._onMouseMove,o),e(r,s+"out",this._onMouseOut),e(r,s+"enter",this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,o),"undefined"!=typeof eventjs&&i in eventjs&&(eventjs[i](r,"gesture",this._onGesture),eventjs[i](r,"drag",this._onDrag),eventjs[i](r,"orientation",this._onOrientationChange),eventjs[i](r,"shake",this._onShake),eventjs[i](r,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var e=this._getEventPrefix();r(ni.document,e+"up",this._onMouseUp),r(ni.document,"touchend",this._onTouchEnd,o),r(ni.document,e+"move",this._onMouseMove,o),r(ni.document,"touchmove",this._onMouseMove,o)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(e,i){this.__onTransformGesture&&this.__onTransformGesture(e,i)},_onDrag:function(e,i){this.__onDrag&&this.__onDrag(e,i)},_onMouseWheel:function(e){this.__onMouseWheel(e)},_onMouseOut:function(e){var i=this._hoveredTarget;this.fire("mouse:out",{target:i,e:e}),this._hoveredTarget=null,i&&i.fire("mouseout",{e:e});var r=this;this._hoveredTargets.forEach(function(o){r.fire("mouse:out",{target:i,e:e}),o&&i.fire("mouseout",{e:e})}),this._hoveredTargets=[]},_onMouseEnter:function(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",{target:null,e:e}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(e,i){this.__onOrientationChange&&this.__onOrientationChange(e,i)},_onShake:function(e,i){this.__onShake&&this.__onShake(e,i)},_onLongPress:function(e,i){this.__onLongPress&&this.__onLongPress(e,i)},_onDragOver:function(e){e.preventDefault();var i=this._simpleEventHandler("dragover",e);this._fireEnterLeaveEvents(i,e)},_onDrop:function(e){return this._simpleEventHandler("drop:before",e),this._simpleEventHandler("drop",e)},_onContextMenu:function(e){return this.stopContextMenu&&(e.stopPropagation(),e.preventDefault()),!1},_onDoubleClick:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData(e)},getPointerId:function(e){var i=e.changedTouches;return i?i[0]&&i[0].identifier:this.enablePointerEvents?e.pointerId:-1},_isMainEvent:function(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(e){e.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),this._resetTransformEventData();var s=this.upperCanvasEl,a=this._getEventPrefix();i(ni.document,"touchend",this._onTouchEnd,o),i(ni.document,"touchmove",this._onMouseMove,o),r(s,a+"down",this._onMouseDown)},_onMouseDown:function(e){this.__onMouseDown(e),this._resetTransformEventData();var s=this.upperCanvasEl,a=this._getEventPrefix();r(s,a+"move",this._onMouseMove,o),i(ni.document,a+"up",this._onMouseUp),i(ni.document,a+"move",this._onMouseMove,o)},_onTouchEnd:function(e){if(!(0<e.touches.length)){this.__onMouseUp(e),this._resetTransformEventData(),this.mainTouchId=null;var s=this._getEventPrefix();r(ni.document,"touchend",this._onTouchEnd,o),r(ni.document,"touchmove",this._onMouseMove,o);var a=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){i(a.upperCanvasEl,s+"down",a._onMouseDown),a._willAddMouseDown=0},400)}},_onMouseUp:function(e){this.__onMouseUp(e),this._resetTransformEventData();var s=this.upperCanvasEl,a=this._getEventPrefix();this._isMainEvent(e)&&(r(ni.document,a+"up",this._onMouseUp),r(ni.document,a+"move",this._onMouseMove,o),i(s,a+"move",this._onMouseMove,o))},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e){var i=this._activeObject;return!!(!!i!=!!e||i&&e&&i!==e)||!(i&&i.isEditing)&&!1},__onMouseUp:function(i){var r,o=this._currentTransform,s=this._groupSelector,a=!1,c=!s||0===s.left&&0===s.top;if(this._cacheTransformEventData(i),r=this._target,this._handleEvent(i,"up:before"),e(i,3))this.fireRightClick&&this._handleEvent(i,"up",3,c);else{if(e(i,2))return this.fireMiddleClick&&this._handleEvent(i,"up",2,c),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(i);else if(this._isMainEvent(i)){if(o&&(this._finalizeCurrentTransform(i),a=o.actionPerformed),!c){var l,u,h=r===this._activeObject;this._maybeGroupObjects(i),a||(a=this._shouldRender(r)||!h&&r===this._activeObject)}if(r){if(l=r._findTargetCorner(this.getPointer(i,!0),ni.util.isTouchEvent(i)),r.selectable&&r!==this._activeObject&&"up"===r.activeOn)this.setActiveObject(r,i),a=!0;else{var f=r.controls[l],d=f&&f.getMouseUpHandler(i,r,f);d&&d(i,o,(u=this.getPointer(i)).x,u.y)}r.isMoving=!1}if(o&&(o.target!==r||o.corner!==l)){var p=o.target&&o.target.controls[o.corner],g=p&&p.getMouseUpHandler(i,r,f);u=u||this.getPointer(i),g&&g(i,o,u.x,u.y)}this._setCursorFromEvent(i,r),this._handleEvent(i,"up",1,c),this._groupSelector=null,this._currentTransform=null,r&&(r.__corner=0),a?this.requestRenderAll():c||this.renderTop()}}},_simpleEventHandler:function(e,i){var r=this.findTarget(i),o=this.targets,s={e:i,target:r,subTargets:o};if(this.fire(e,s),r&&r.fire(e,s),!o)return r;for(var a=0;a<o.length;a++)o[a].fire(e,s);return r},_handleEvent:function(e,i,r,o){var s=this._target,a=this.targets||[],c={e:e,target:s,subTargets:a,button:r||1,isClick:o||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===i&&(c.currentTarget=this.findTarget(e),c.currentSubTargets=this.targets),this.fire("mouse:"+i,c),s&&s.fire("mouse"+i,c);for(var l=0;l<a.length;l++)a[l].fire("mouse"+i,c)},_finalizeCurrentTransform:function(e){var i=this._currentTransform,r=i.target,o={e:e,target:r,transform:i,action:i.action};r._scaling&&(r._scaling=!1),r.setCoords(),(i.actionPerformed||this.stateful&&r.hasStateChanged())&&this._fire("modified",o)},_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(e).requestRenderAll();var i=this.getPointer(e);this.freeDrawingBrush.onMouseDown(i,{e:e,pointer:i}),this._handleEvent(e,"down")},_onMouseMoveInDrawingMode:function(e){if(this._isCurrentlyDrawing){var i=this.getPointer(e);this.freeDrawingBrush.onMouseMove(i,{e:e,pointer:i})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")},_onMouseUpInDrawingMode:function(e){var i=this.getPointer(e);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:e,pointer:i}),this._handleEvent(e,"up")},__onMouseDown:function(i){this._cacheTransformEventData(i),this._handleEvent(i,"down:before");var r=this._target;if(e(i,3))this.fireRightClick&&this._handleEvent(i,"down",3);else if(e(i,2))this.fireMiddleClick&&this._handleEvent(i,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(i);else if(this._isMainEvent(i)&&!this._currentTransform){var o=this._pointer;this._previousPointer=o;var s=this._shouldRender(r),a=this._shouldGroup(i,r);if(this._shouldClearSelection(i,r)?this.discardActiveObject(i):a&&(this._handleGrouping(i,r),r=this._activeObject),!this.selection||r&&(r.selectable||r.isEditing||r===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),r){var c=r===this._activeObject;r.selectable&&"down"===r.activeOn&&this.setActiveObject(r,i);var l=r._findTargetCorner(this.getPointer(i,!0),ni.util.isTouchEvent(i));if(r.__corner=l,r===this._activeObject&&(l||!a)){this._setupCurrentTransform(i,r,c);var u=r.controls[l],h=(o=this.getPointer(i),u&&u.getMouseDownHandler(i,r,u));h&&h(i,this._currentTransform,o.x,o.y)}}this._handleEvent(i,"down"),(s||a)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(e){this._resetTransformEventData(),this._pointer=this.getPointer(e,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)||null},_beforeTransform:function(e){var i=this._currentTransform;this.stateful&&i.target.saveState(),this.fire("before:transform",{e:e,transform:i})},__onMouseMove:function(e){var i,r;if(this._handleEvent(e,"move:before"),this._cacheTransformEventData(e),this.isDrawingMode)this._onMouseMoveInDrawingMode(e);else if(this._isMainEvent(e)){var o=this._groupSelector;o?(r=this._absolutePointer,o.left=r.x-o.ex,o.top=r.y-o.ey,this.renderTop()):this._currentTransform?this._transformObject(e):(i=this.findTarget(e)||null,this._setCursorFromEvent(e,i),this._fireOverOutEvents(i,e)),this._handleEvent(e,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(e,i){var r=this._hoveredTarget,o=this._hoveredTargets,a=this.targets,c=s(o.length,a.length);this.fireSyntheticInOutEvents(e,i,{oldTarget:r,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var l=0;l<c;l++)this.fireSyntheticInOutEvents(a[l],i,{oldTarget:o[l],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(e,i){var r=this._draggedoverTarget,o=this._hoveredTargets,a=this.targets,c=s(o.length,a.length);this.fireSyntheticInOutEvents(e,i,{oldTarget:r,evtOut:"dragleave",evtIn:"dragenter"});for(var l=0;l<c;l++)this.fireSyntheticInOutEvents(a[l],i,{oldTarget:o[l],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=e},fireSyntheticInOutEvents:function(e,i,r){var o,s,a,c=r.oldTarget,l=c!==e,u=r.canvasEvtIn,h=r.canvasEvtOut;l&&(o={e:i,target:e,previousTarget:c},s={e:i,target:c,nextTarget:e}),a=e&&l,c&&l&&(h&&this.fire(h,s),c.fire(r.evtOut,s)),a&&(u&&this.fire(u,o),e.fire(r.evtIn,o))},__onMouseWheel:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()},_transformObject:function(e){var i=this.getPointer(e),r=this._currentTransform;r.reset=!1,r.shiftKey=e.shiftKey,r.altKey=e[this.centeredKey],this._performTransformAction(e,r,i),r.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(e,i,r){var o=r.x,s=r.y,a=i.action,c=!1,l=i.actionHandler;l&&(c=l(e,i,o,s)),"drag"===a&&c&&(i.target.isMoving=!0,this.setCursor(i.target.moveCursor||this.moveCursor)),i.actionPerformed=i.actionPerformed||c},_fire:ni.controlsUtils.fireEvent,_setCursorFromEvent:function(e,i){if(!i)return this.setCursor(this.defaultCursor),!1;var r=i.hoverCursor||this.hoverCursor,o=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,s=(!o||!o.contains(i))&&i._findTargetCorner(this.getPointer(e,!0));s?this.setCursor(this.getCornerCursor(s,i,e)):(i.subTargetCheck&&this.targets.concat().reverse().map(function(e){r=e.hoverCursor||r}),this.setCursor(r))},getCornerCursor:function(e,i,r){var o=i.controls[e];return o.cursorStyleHandler(r,o,i)}})}(),M=a,R=s,ni.util.object.extend(ni.Canvas.prototype,{_shouldGroup:function(e,i){var r=this._activeObject;return r&&this._isSelectionKeyPressed(e)&&i&&i.selectable&&this.selection&&(r!==i||"activeSelection"===r.type)&&!i.onSelect({e:e})},_handleGrouping:function(e,i){var r=this._activeObject;!r.__corner&&(i!==r||(i=this.findTarget(e,!0))&&i.selectable)&&(r&&"activeSelection"===r.type?this._updateActiveSelection(i,e):this._createActiveSelection(i,e))},_updateActiveSelection:function(e,i){var r=this._activeObject,o=r._objects.slice(0);r.contains(e)?(r.removeWithUpdate(e),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat(),1===r.size()&&this._setActiveObject(r.item(0),i)):(r.addWithUpdate(e),this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(o,i)},_createActiveSelection:function(e,i){var r=this.getActiveObjects(),o=this._createGroup(e);this._hoveredTarget=o,this._setActiveObject(o,i),this._fireSelectionEvents(r,i)},_createGroup:function(e){var i=this._objects,r=i.indexOf(this._activeObject)<i.indexOf(e)?[this._activeObject,e]:[e,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new ni.ActiveSelection(r,{canvas:this})},_groupSelectedObjects:function(e){var i,r=this._collectObjects(e);1===r.length?this.setActiveObject(r[0],e):1<r.length&&(i=new ni.ActiveSelection(r.reverse(),{canvas:this}),this.setActiveObject(i,e))},_collectObjects:function(e){for(var i,r=[],o=this._groupSelector.ex,s=this._groupSelector.ey,a=o+this._groupSelector.left,c=s+this._groupSelector.top,l=new ni.Point(M(o,a),M(s,c)),u=new ni.Point(R(o,a),R(s,c)),h=!this.selectionFullyContained,f=this._objects.length;f--&&!((i=this._objects[f])&&i.selectable&&i.visible&&(h&&i.intersectsWithRect(l,u,!0)||i.isContainedWithinRect(l,u,!0)||h&&i.containsPoint(l,null,!0)||h&&i.containsPoint(u,null,!0))&&(r.push(i),o===a&&s===c)););return 1<r.length&&(r=r.filter(function(i){return!i.onSelect({e:e})})),r},_maybeGroupObjects:function(e){this.selection&&this._groupSelector&&this._groupSelectedObjects(e),this.setCursor(this.defaultCursor),this._groupSelector=null}}),ni.util.object.extend(ni.StaticCanvas.prototype,{toDataURL:function(e){e||(e={});var i=e.format||"png",r=e.quality||1,o=(e.multiplier||1)*(e.enableRetinaScaling?this.getRetinaScaling():1),s=this.toCanvasElement(o,e);return ni.util.toDataURL(s,i,r)},toCanvasElement:function(e,i){e=e||1;var r=((i=i||{}).width||this.width)*e,o=(i.height||this.height)*e,s=this.getZoom(),a=this.width,c=this.height,l=s*e,u=this.viewportTransform,h=(u[4]-(i.left||0))*e,f=(u[5]-(i.top||0))*e,d=this.interactive,p=this.enableRetinaScaling,g=ni.util.createCanvasElement(),v=this.contextTop;return g.width=r,g.height=o,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=[l,0,0,l,h,f],this.width=r,this.height=o,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),this._objects),this.viewportTransform=u,this.width=a,this.height=c,this.calcViewportBoundaries(),this.interactive=d,this.enableRetinaScaling=p,this.contextTop=v,g}}),ni.util.object.extend(ni.StaticCanvas.prototype,{loadFromJSON:function(e,i,r){if(e){var o="string"==typeof e?JSON.parse(e):ni.util.object.clone(e),s=this,a=o.clipPath,c=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete o.clipPath,this._enlivenObjects(o.objects,function(e){s.clear(),s._setBgOverlay(o,function(){a?s._enlivenObjects([a],function(r){s.clipPath=r[0],s.__setupCanvas.call(s,o,e,c,i)}):s.__setupCanvas.call(s,o,e,c,i)})},r),this}},__setupCanvas:function(e,i,r,o){var s=this;i.forEach(function(e,i){s.insertAt(e,i)}),this.renderOnAddRemove=r,delete e.objects,delete e.backgroundImage,delete e.overlayImage,delete e.background,delete e.overlay,this._setOptions(e),this.renderAll(),o&&o()},_setBgOverlay:function(e,i){var r={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(e.backgroundImage||e.overlayImage||e.background||e.overlay){var o=function(){r.backgroundImage&&r.overlayImage&&r.backgroundColor&&r.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",e.backgroundImage,r,o),this.__setBgOverlay("overlayImage",e.overlayImage,r,o),this.__setBgOverlay("backgroundColor",e.background,r,o),this.__setBgOverlay("overlayColor",e.overlay,r,o)}else i&&i()},__setBgOverlay:function(e,i,r,o){var s=this;return i?void("backgroundImage"===e||"overlayImage"===e?ni.util.enlivenObjects([i],function(i){s[e]=i[0],r[e]=!0,o&&o()}):this["set"+ni.util.string.capitalize(e,!0)](i,function(){r[e]=!0,o&&o()})):(r[e]=!0,void(o&&o()))},_enlivenObjects:function(e,i,r){return e&&0!==e.length?void ni.util.enlivenObjects(e,function(e){i&&i(e)},null,r):void(i&&i([]))},_toDataURL:function(e,i){this.clone(function(r){i(r.toDataURL(e))})},_toDataURLWithMultiplier:function(e,i,r){this.clone(function(o){r(o.toDataURLWithMultiplier(e,i))})},clone:function(e,i){var r=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(i){i.loadFromJSON(r,function(){e&&e(i)})})},cloneWithoutData:function(e){var i=ni.util.createCanvasElement();i.width=this.width,i.height=this.height;var r=new ni.Canvas(i);this.backgroundImage?(r.setBackgroundImage(this.backgroundImage.src,function(){r.renderAll(),e&&e(r)}),r.backgroundImageOpacity=this.backgroundImageOpacity,r.backgroundImageStretch=this.backgroundImageStretch):e&&e(r)}}),U=(z=(B=i).fabric||(B.fabric={})).util.object.extend,Y=z.util.object.clone,N=z.util.toFixed,W=z.util.string.capitalize,V=z.util.degreesToRadians,H=!z.isLikelyNode,z.Object||(z.Object=z.util.createClass(z.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:H,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:["top","left","width","height","scaleX","scaleY","flipX","flipY","originX","originY","transformMatrix","stroke","strokeWidth","strokeDashArray","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","angle","opacity","fill","globalCompositeOperation","shadow","visible","backgroundColor","skewX","skewY","fillRule","paintFirst","clipPath","strokeUniform",],cacheProperties:["fill","stroke","strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath",],colorProperties:["fill","stroke","backgroundColor"],clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(e){e&&this.setOptions(e)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=z.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(e){var i=z.perfLimitSizeTotal,r=e.width,o=e.height,s=z.maxCacheSideLimit,a=z.minCacheSideLimit;if(r<=s&&o<=s&&r*o<=i)return r<a&&(e.width=a),o<a&&(e.height=a),e;var c=z.util.limitDimsByArea(r/o,i),l=z.util.capValue,u=l(a,c.x,s),h=l(a,c.y,s);return r>u&&(e.zoomX/=r/u,e.width=u,e.capped=!0),o>h&&(e.zoomY/=o/h,e.height=h,e.capped=!0),e},_getCacheCanvasDimensions:function(){var e=this.getTotalObjectScaling(),i=this._getTransformedDimensions(0,0),r=i.x*e.scaleX/this.scaleX,o=i.y*e.scaleY/this.scaleY;return{width:r+2,height:o+2,zoomX:e.scaleX,zoomY:e.scaleY,x:r,y:o}},_updateCacheCanvas:function(){var e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){var i=e._currentTransform.target,r=e._currentTransform.action;if(this===i&&r.slice&&"scale"===r.slice(0,5))return!1}var o,s,a=this._cacheCanvas,c=this._limitCacheSize(this._getCacheCanvasDimensions()),l=z.minCacheSideLimit,u=c.width,h=c.height,f=c.zoomX,d=c.zoomY,p=u!==this.cacheWidth||h!==this.cacheHeight,g=this.zoomX!==f||this.zoomY!==d,v=p||g,m=0,$=0,y=!1;if(p){var b=this._cacheCanvas.width,x=this._cacheCanvas.height,C=u>b||h>x;y=C||(u<.9*b||h<.9*x)&&b>l&&x>l,C&&!c.capped&&(u>l||h>l)&&(m=.1*u,$=.1*h)}return this instanceof z.Text&&this.path&&(v=!0,y=!0,m+=this.getHeightOfLine(0)*this.zoomX,$+=this.getHeightOfLine(0)*this.zoomY),!!v&&(y?(a.width=eK(u+m),a.height=eK(h+$)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,a.width,a.height)),o=c.x/2,s=c.y/2,this.cacheTranslationX=eq(a.width/2-o)+o,this.cacheTranslationY=eq(a.height/2-s)+s,this.cacheWidth=u,this.cacheHeight=h,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(f,d),this.zoomX=f,this.zoomY=d,!0)},setOptions:function(e){this._setOptions(e),this._initGradient(e.fill,"fill"),this._initGradient(e.stroke,"stroke"),this._initPattern(e.fill,"fill"),this._initPattern(e.stroke,"stroke")},transform:function(e){var i=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!i);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])},toObject:function(e){var i=z.Object.NUM_FRACTION_DIGITS,r={type:this.type,version:z.version,originX:this.originX,originY:this.originY,left:N(this.left,i),top:N(this.top,i),width:N(this.width,i),height:N(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:N(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:N(this.strokeMiterLimit,i),scaleX:N(this.scaleX,i),scaleY:N(this.scaleY,i),angle:N(this.angle,i),flipX:this.flipX,flipY:this.flipY,opacity:N(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:N(this.skewX,i),skewY:N(this.skewY,i)};return this.clipPath&&!this.clipPath.excludeFromExport&&(r.clipPath=this.clipPath.toObject(e),r.clipPath.inverted=this.clipPath.inverted,r.clipPath.absolutePositioned=this.clipPath.absolutePositioned),z.util.populateWithProperties(this,r,e),this.includeDefaultValues||(r=this._removeDefaultValues(r)),r},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var i=z.util.getKlass(e.type).prototype;return i.stateProperties.forEach(function(r){"left"===r||"top"===r||(e[r]===i[r]&&delete e[r],Array.isArray(e[r])&&Array.isArray(i[r])&&0===e[r].length&&0===i[r].length&&delete e[r])}),e},toString:function(){return"#<fabric."+W(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var e=z.util.qrDecompose(this.calcTransformMatrix());return{scaleX:o(e.scaleX),scaleY:o(e.scaleY)}},getTotalObjectScaling:function(){var e=this.getObjectScaling(),i=e.scaleX,r=e.scaleY;if(this.canvas){var o=this.canvas.getZoom(),s=this.canvas.getRetinaScaling();i*=o*s,r*=o*s}return{scaleX:i,scaleY:r}},getObjectOpacity:function(){var e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e},_set:function(e,i){var r=this[e]!==i,o=!1;return("scaleX"===e||"scaleY"===e)&&(i=this._constrainScale(i)),"scaleX"===e&&0>i?(this.flipX=!this.flipX,i*=-1):"scaleY"===e&&0>i?(this.flipY=!this.flipY,i*=-1):"shadow"!==e||!i||i instanceof z.Shadow?"dirty"==e&&this.group&&this.group.set("dirty",i):i=new z.Shadow(i),this[e]=i,r&&(o=this.group&&this.group.isOnACache(),-1<this.cacheProperties.indexOf(e)?(this.dirty=!0,o&&this.group.set("dirty",!0)):o&&-1<this.stateProperties.indexOf(e)&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:z.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(e),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),e.restore())},renderCache:function(e){e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!==u(this.shadow))||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(e,i){if(e.save(),e.globalCompositeOperation=i.inverted?"destination-out":"destination-in",i.absolutePositioned){var r=z.util.invertTransform(this.calcTransformMatrix());e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}i.transform(e),e.scale(1/i.zoomX,1/i.zoomY),e.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),e.restore()},drawObject:function(e,i){var r=this.fill,o=this.stroke;i?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath),this.fill=r,this.stroke=o},_drawClipPath:function(e,i){i&&(i.canvas=this.canvas,i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCache(e,i))},drawCacheOnCanvas:function(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(e){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!e&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!e){var i=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-r/2,i,r)}return!0}return!1},_renderBackground:function(e){if(this.backgroundColor){var i=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-i.x/2,-i.y/2,i.x,i.y),this._removeShadow(e)}},_setOpacity:function(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity},_setStrokeStyles:function(e,i){var r=i.stroke;r&&(e.lineWidth=i.strokeWidth,e.lineCap=i.strokeLineCap,e.lineDashOffset=i.strokeDashOffset,e.lineJoin=i.strokeLineJoin,e.miterLimit=i.strokeMiterLimit,r.toLive?"percentage"===r.gradientUnits||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e,this),this._applyPatternGradientTransform(e,r)):e.strokeStyle=i.stroke)},_setFillStyles:function(e,i){var r=i.fill;r&&(r.toLive?(e.fillStyle=r.toLive(e,this),this._applyPatternGradientTransform(e,i.fill)):e.fillStyle=r)},_setClippingProperties:function(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"},_setLineDash:function(e,i){i&&0!==i.length&&(1&i.length&&i.push.apply(i,i),e.setLineDash(i))},_renderControls:function(e,i){var r,o,s,a=this.getViewportTransform(),c=this.calcTransformMatrix();o=void 0===(i=i||{}).hasBorders?this.hasBorders:i.hasBorders,s=void 0===i.hasControls?this.hasControls:i.hasControls,c=z.util.multiplyTransformMatrices(a,c),r=z.util.qrDecompose(c),e.save(),e.translate(r.translateX,r.translateY),e.lineWidth=1*this.borderScaleFactor,this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(r.angle-=180),e.rotate(V(this.group?r.angle:this.angle)),i.forActiveSelection||this.group?o&&this.drawBordersInGroup(e,r,i):o&&this.drawBorders(e,i),s&&this.drawControls(e,i),e.restore()},_setShadow:function(e){if(this.shadow){var i,r=this.shadow,o=this.canvas,s=o&&o.viewportTransform[0]||1,a=o&&o.viewportTransform[3]||1;i=r.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),o&&o._isRetinaScaling()&&(s*=z.devicePixelRatio,a*=z.devicePixelRatio),e.shadowColor=r.color,e.shadowBlur=r.blur*z.browserShadowBlurConstant*(s+a)*(i.scaleX+i.scaleY)/4,e.shadowOffsetX=r.offsetX*s*i.scaleX,e.shadowOffsetY=r.offsetY*a*i.scaleY}},_removeShadow:function(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)},_applyPatternGradientTransform:function(e,i){if(!i||!i.toLive)return{offsetX:0,offsetY:0};var r=i.gradientTransform||i.patternTransform,o=-this.width/2+i.offsetX||0,s=-this.height/2+i.offsetY||0;return"percentage"===i.gradientUnits?e.transform(this.width,0,0,this.height,o,s):e.transform(1,0,0,1,o,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:o,offsetY:s}},_renderPaintInOrder:function(e){"stroke"===this.paintFirst?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))},_render:function(){},_renderFill:function(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())},_renderStroke:function(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform&&this.group){var i=this.getObjectScaling();e.scale(1/i.scaleX,1/i.scaleY)}else this.strokeUniform&&e.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}},_applyPatternForTransformedGradient:function(e,i){var r,o=this._limitCacheSize(this._getCacheCanvasDimensions()),s=z.util.createCanvasElement(),a=this.canvas.getRetinaScaling(),c=o.x/this.scaleX/a,l=o.y/this.scaleY/a;s.width=c,s.height=l,(r=s.getContext("2d")).beginPath(),r.moveTo(0,0),r.lineTo(c,0),r.lineTo(c,l),r.lineTo(0,l),r.closePath(),r.translate(c/2,l/2),r.scale(o.zoomX/this.scaleX/a,o.zoomY/this.scaleY/a),this._applyPatternGradientTransform(r,i),r.fillStyle=i.toLive(e),r.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/o.zoomX,a*this.scaleY/o.zoomY),e.strokeStyle=r.createPattern(s,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var e=z.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",e.scaleX),this.set("scaleY",e.scaleY),this.angle=e.angle,this.skewX=e.skewX,this.skewY=0}},_removeTransformMatrix:function(e){var i=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),i=z.util.transformPoint(i,this.transformMatrix)),this.transformMatrix=null,e&&(this.scaleX*=e.scaleX,this.scaleY*=e.scaleY,this.cropX=e.cropX,this.cropY=e.cropY,i.x+=e.offsetLeft,i.y+=e.offsetTop,this.width=e.width,this.height=e.height),this.setPositionByOrigin(i,"center","center")},clone:function(e,i){var r=this.toObject(i);this.constructor.fromObject?this.constructor.fromObject(r,e):z.Object._fromObject("Object",r,e)},cloneAsImage:function(e,i){var r=this.toCanvasElement(i);return e&&e(new z.Image(r)),this},toCanvasElement:function(e){e||(e={});var i=z.util,r=i.saveObjectTransform(this),s=this.group,a=this.shadow,c=o,l=(e.multiplier||1)*(e.enableRetinaScaling?z.devicePixelRatio:1);delete this.group,e.withoutTransform&&i.resetObjectTransform(this),e.withoutShadow&&(this.shadow=null);var u,h,f,d,p=z.util.createCanvasElement(),g=this.getBoundingRect(!0,!0),v=this.shadow,m={x:0,y:0};v&&(h=v.blur,u=v.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),m.x=2*eq(c(v.offsetX)+h)*c(u.scaleX),m.y=2*eq(c(v.offsetY)+h)*c(u.scaleY)),f=g.width+m.x,d=g.height+m.y,p.width=eK(f),p.height=eK(d);var $=new z.StaticCanvas(p,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===e.format&&($.backgroundColor="#fff"),this.setPositionByOrigin(new z.Point($.width/2,$.height/2),"center","center");var y=this.canvas;$.add(this);var b=$.toCanvasElement(l||1,e);return this.shadow=a,this.set("canvas",y),s&&(this.group=s),this.set(r).setCoords(),$._objects=[],$.dispose(),$=null,b},toDataURL:function(e){return e||(e={}),z.util.toDataURL(this.toCanvasElement(e),e.format||"png",e.quality||1)},isType:function(e){return 1<arguments.length?Array.from(arguments).includes(this.type):this.type===e},complexity:function(){return 1},toJSON:function(e){return this.toObject(e)},rotate:function(e){var i=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return i&&this._setOriginToCenter(),this.set("angle",e),i&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(e,i){i=i||this.canvas.getPointer(e);var r=new z.Point(i.x,i.y),o=this._getLeftTopCoords();return this.angle&&(r=z.util.rotatePoint(r,o,V(-this.angle))),{x:r.x-o.x,y:r.y-o.y}},_setupCompositeOperation:function(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){z.runningAnimations&&z.runningAnimations.cancelByTarget(this)}}),z.util.createAccessors&&z.util.createAccessors(z.Object),U(z.Object.prototype,z.Observable),z.Object.NUM_FRACTION_DIGITS=2,z.Object.ENLIVEN_PROPS=["clipPath"],z.Object._fromObject=function(e,i,r,o){var s=z[e];i=Y(i,!0),z.util.enlivenPatterns([i.fill,i.stroke],function(e){void 0!==e[0]&&(i.fill=e[0]),void 0!==e[1]&&(i.stroke=e[1]),z.util.enlivenObjectEnlivables(i,i,function(){var e=o?new s(i[o],i):new s(i);r&&r(e)})})},z.Object.__uid=0),X=ni.util.degreesToRadians,G={left:-.5,center:0,right:.5},q={top:-.5,center:0,bottom:.5},ni.util.object.extend(ni.Object.prototype,{translateToGivenOrigin:function(e,i,r,o,s){var a,c,l,u=e.x,h=e.y;return"string"==typeof i?i=G[i]:i-=.5,"string"==typeof o?o=G[o]:o-=.5,"string"==typeof r?r=q[r]:r-=.5,"string"==typeof s?s=q[s]:s-=.5,c=s-r,((a=o-i)||c)&&(l=this._getTransformedDimensions(),u=e.x+a*l.x,h=e.y+c*l.y),new ni.Point(u,h)},translateToCenterPoint:function(e,i,r){var o=this.translateToGivenOrigin(e,i,r,"center","center");return this.angle?ni.util.rotatePoint(o,e,X(this.angle)):o},translateToOriginPoint:function(e,i,r){var o=this.translateToGivenOrigin(e,"center","center",i,r);return this.angle?ni.util.rotatePoint(o,e,X(this.angle)):o},getCenterPoint:function(){var e=new ni.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,i){var r=this.getCenterPoint();return this.translateToOriginPoint(r,e,i)},toLocalPoint:function(e,i,r){var o,s,a=this.getCenterPoint();return o=void 0!==i&&void 0!==r?this.translateToGivenOrigin(a,"center","center",i,r):new ni.Point(this.left,this.top),s=new ni.Point(e.x,e.y),this.angle&&(s=ni.util.rotatePoint(s,a,-X(this.angle))),s.subtractEquals(o)},setPositionByOrigin:function(e,i,r){var o=this.translateToCenterPoint(e,i,r),s=this.translateToOriginPoint(o,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(e){var i,r,o=X(this.angle),s=this.getScaledWidth(),a=ni.util.cos(o)*s,c=ni.util.sin(o)*s;i="string"==typeof this.originX?G[this.originX]:this.originX-.5,r="string"==typeof e?G[e]:e-.5,this.left+=a*(r-i),this.top+=c*(r-i),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center",this.originY="center",this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),Z=(K=ni.util).degreesToRadians,J=K.multiplyTransformMatrices,Q=K.transformPoint,K.object.extend(ni.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(e,i){return i?e?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),e?this.aCoords:this.lineCoords)},getCoords:function(e,i){var r;return r=this._getCoords(e,i),[new ni.Point(r.tl.x,r.tl.y),new ni.Point(r.tr.x,r.tr.y),new ni.Point(r.br.x,r.br.y),new ni.Point(r.bl.x,r.bl.y)]},intersectsWithRect:function(e,i,r,o){var s=this.getCoords(r,o);return"Intersection"===ni.Intersection.intersectPolygonRectangle(s,e,i).status},intersectsWithObject:function(e,i,r){return"Intersection"===ni.Intersection.intersectPolygonPolygon(this.getCoords(i,r),e.getCoords(i,r)).status||e.isContainedWithinObject(this,i,r)||this.isContainedWithinObject(e,i,r)},isContainedWithinObject:function(e,i,r){for(var o=this.getCoords(i,r),s=i?e.aCoords:e.lineCoords,a=0,c=e._getImageLines(s);4>a;a++)if(!e.containsPoint(o[a],c))return!1;return!0},isContainedWithinRect:function(e,i,r,o){var s=this.getBoundingRect(r,o);return s.left>=e.x&&s.left+s.width<=i.x&&s.top>=e.y&&s.top+s.height<=i.y},containsPoint:function(e,i,r,o){var s=this._getCoords(r,o),a=(i=i||this._getImageLines(s),this._findCrossPoints(e,i));return 0!==a&&1==a%2},isOnScreen:function(e){if(!this.canvas)return!1;var i=this.canvas.vptCoords.tl,r=this.canvas.vptCoords.br;return!!this.getCoords(!0,e).some(function(e){return e.x<=r.x&&e.x>=i.x&&e.y<=r.y&&e.y>=i.y})||!!this.intersectsWithRect(i,r,!0,e)||this._containsCenterOfCanvas(i,r,e)},_containsCenterOfCanvas:function(e,i,r){var o={x:(e.x+i.x)/2,y:(e.y+i.y)/2};return!!this.containsPoint(o,null,!0,r)},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var i=this.canvas.vptCoords.tl,r=this.canvas.vptCoords.br;return!!this.intersectsWithRect(i,r,!0,e)||this.getCoords(!0,e).every(function(e){return(e.x>=r.x||e.x<=i.x)&&(e.y>=r.y||e.y<=i.y)})&&this._containsCenterOfCanvas(i,r,e)},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,i){var r,o,s,a,c,l=0;for(var u in i)if((!((c=i[u]).o.y<e.y)||!(c.d.y<e.y))&&(!(c.o.y>=e.y)||!(c.d.y>=e.y))&&(c.o.x===c.d.x&&c.o.x>=e.x?a=c.o.x:(r=(c.d.y-c.o.y)/(c.d.x-c.o.x),a=-((o=e.y-0*e.x)-(s=c.o.y-r*c.o.x))/(0-r)),a>=e.x&&(l+=1),2==l))break;return l},getBoundingRect:function(e,i){var r=this.getCoords(e,i);return K.makeBoundingBoxFromPoints(r)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return o(e)<this.minScaleLimit?0>e?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,i){var r=this.getBoundingRect(i).width/this.getScaledWidth();return this.scale(e/this.width/r)},scaleToHeight:function(e,i){var r=this.getBoundingRect(i).height/this.getScaledHeight();return this.scale(e/this.height/r)},calcLineCoords:function(){var e=this.getViewportTransform(),i=this.padding,r=Z(this.angle),o=K.cos(r)*i,s=K.sin(r)*i,a=o+s,c=o-s,l=this.calcACoords(),u={tl:Q(l.tl,e),tr:Q(l.tr,e),bl:Q(l.bl,e),br:Q(l.br,e)};return i&&(u.tl.x-=c,u.tl.y-=a,u.tr.x+=a,u.tr.y-=c,u.bl.x-=a,u.bl.y+=c,u.br.x+=c,u.br.y+=a),u},calcOCoords:function(){var e=this._calcRotateMatrix(),i=this._calcTranslateMatrix(),r=this.getViewportTransform(),o=J(r,i),s=J(o,e),a=(s=J(s,[1/r[0],0,0,1/r[3],0,0]),this._calculateCurrentDimensions()),c={};return this.forEachControl(function(e,i,r){c[i]=e.positionHandler(a,s,r)}),c},calcACoords:function(){var e=this._calcRotateMatrix(),i=J(this._calcTranslateMatrix(),e),r=this._getTransformedDimensions(),o=r.x/2,s=r.y/2;return{tl:Q({x:-o,y:-s},i),tr:Q({x:o,y:-s},i),bl:Q({x:-o,y:s},i),br:Q({x:o,y:s},i)}},setCoords:function(e){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),e||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return K.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var i="";return!e&&this.group&&(i=this.group.transformMatrixKey(e)+"_"),i+this.top+"_"+this.left+"_"+this.scaleX+"_"+this.scaleY+"_"+this.skewX+"_"+this.skewY+"_"+this.angle+"_"+this.originX+"_"+this.originY+"_"+this.width+"_"+this.height+"_"+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){var i=this.calcOwnMatrix();if(e||!this.group)return i;var r=this.transformMatrixKey(e),o=this.matrixCache||(this.matrixCache={});return o.key===r?o.value:(this.group&&(i=J(this.group.calcTransformMatrix(!1),i)),o.key=r,o.value=i,i)},calcOwnMatrix:function(){var e=this.transformMatrixKey(!0),i=this.ownMatrixCache||(this.ownMatrixCache={});if(i.key===e)return i.value;var r=this._calcTranslateMatrix(),o={angle:this.angle,translateX:r[4],translateY:r[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return i.key=e,i.value=K.composeMatrix(o),i.value},_getNonTransformedDimensions:function(){var e=this.strokeWidth;return{x:this.width+e,y:this.height+e}},_getTransformedDimensions:function(e,i){void 0===e&&(e=this.skewX),void 0===i&&(i=this.skewY);var r,o,s,a=0===e&&0===i;if(this.strokeUniform?(o=this.width,s=this.height):(o=(r=this._getNonTransformedDimensions()).x,s=r.y),a)return this._finalizeDimensions(o*this.scaleX,s*this.scaleY);var c=K.sizeAfterTransform(o,s,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:e,skewY:i});return this._finalizeDimensions(c.x,c.y)},_finalizeDimensions:function(e,i){return this.strokeUniform?{x:e+this.strokeWidth,y:i+this.strokeWidth}:{x:e,y:i}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform();return Q(this._getTransformedDimensions(),e,!0).scalarAdd(2*this.padding)}}),ni.util.object.extend(ni.Object.prototype,{sendToBack:function(){return this.group?ni.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?ni.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(e){return this.group?ni.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas&&this.canvas.sendBackwards(this,e),this},bringForward:function(e){return this.group?ni.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas&&this.canvas.bringForward(this,e),this},moveTo:function(e){return this.group&&"activeSelection"!==this.group.type?ni.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas&&this.canvas.moveTo(this,e),this}}),function(){function e(e,i){if(!i)return e+": none; ";if(i.toLive)return e+": url(#SVGID_"+i.id+"); ";var r=new ni.Color(i),o=e+": "+r.toRgb()+"; ",s=r.getAlpha();return 1!==s&&(o+=e+"-opacity: "+s.toString()+"; "),o}var i=ni.util.toFixed;ni.util.object.extend(ni.Object.prototype,{getSvgStyles:function(i){var r=this.fillRule?this.fillRule:"nonzero",o=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):"none",a=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",l=this.strokeLineJoin?this.strokeLineJoin:"miter",u=this.strokeMiterLimit?this.strokeMiterLimit:"4",h=void 0===this.opacity?"1":this.opacity,f=this.visible?"":" visibility: hidden;",d=i?"":this.getSvgFilter(),p=e("fill",this.fill);return[e("stroke",this.stroke),"stroke-width: ",o,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",l,"; ","stroke-miterlimit: ",u,"; ",p,"fill-rule: ",r,"; ","opacity: ",h,";",d,f,].join("")},getSvgSpanStyles:function(i,r){var o=i.fontFamily?"font-family: "+(-1===i.fontFamily.indexOf("'")&&-1===i.fontFamily.indexOf('"')?"'"+i.fontFamily+"'":i.fontFamily)+"; ":"",s=i.strokeWidth?"stroke-width: "+i.strokeWidth+"; ":"",a=i.fontSize?"font-size: "+i.fontSize+"px; ":"",c=i.fontStyle?"font-style: "+i.fontStyle+"; ":"",l=i.fontWeight?"font-weight: "+i.fontWeight+"; ":"",u=i.fill?e("fill",i.fill):"",h=i.stroke?e("stroke",i.stroke):"",f=this.getSvgTextDecoration(i);return f&&(f="text-decoration: "+f+"; "),[h,s,o,a,c,l,f,u,i.deltaY?"baseline-shift: "+-i.deltaY+"; ":"",r?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(e){return["overline","underline","line-through"].filter(function(i){return e[i.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(e,i){var r=e?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+ni.util.matrixToSVG(r)+(i||"")+'" '},_setSVGBg:function(e){if(this.backgroundColor){var r=ni.Object.NUM_FRACTION_DIGITS;e.push("      <rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,r),'" y="',i(-this.height/2,r),'" width="',i(this.width,r),'" height="',i(this.height,r),'"></rect>\n')}},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})},toClipPathSVG:function(e){return"    "+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})},_createBaseClipPathSVGMarkup:function(e,i){var r=(i=i||{}).reviver,o=i.additionalTransform||"",s=[this.getSvgTransform(!0,o),this.getSvgCommons()].join("");return e[e.indexOf("COMMON_PARTS")]=s,r?r(e.join("")):e.join("")},_createBaseSVGMarkup:function(e,i){var r,o,s=(i=i||{}).noStyle,a=i.reviver,c=s?"":'style="'+this.getSvgStyles()+'" ',l=i.withShadow?'style="'+this.getSvgFilter()+'" ':"",u=this.clipPath,h=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",f=u&&u.absolutePositioned,d=this.stroke,p=this.fill,g=this.shadow,v=[],m=e.indexOf("COMMON_PARTS"),$=i.additionalTransform;return u&&(u.clipPathId="CLIPPATH_"+ni.Object.__uid++,o='<clipPath id="'+u.clipPathId+'" >\n'+u.toClipPathSVG(a)+"</clipPath>\n"),f&&v.push("<g ",l,this.getSvgCommons()," >\n"),v.push("<g ",this.getSvgTransform(!1),f?"":l+this.getSvgCommons()," >\n"),r=[c,h,s?"":this.addPaintOrder()," ",$?'transform="'+$+'" ':""].join(""),e[m]=r,p&&p.toLive&&v.push(p.toSVG(this)),d&&d.toLive&&v.push(d.toSVG(this)),g&&v.push(g.toSVG(this)),u&&v.push(o),v.push(e.join("")),v.push("</g>\n"),f&&v.push("</g>\n"),a?a(v.join("")):v.join("")},addPaintOrder:function(){return"fill"===this.paintFirst?"":' paint-order="'+this.paintFirst+'" '}})}(),function(){function e(e,r,o){var s={};o.forEach(function(i){s[i]=e[i]}),i(e[r],s,!0)}var i=ni.util.object.extend,r="stateProperties";ni.util.object.extend(ni.Object.prototype,{hasStateChanged:function(e){var i="_"+(e=e||r);return Object.keys(this[i]).length<this[e].length||!function e(i,r,o){if(i===r)return!0;if(Array.isArray(i)){if(!Array.isArray(r)||i.length!==r.length)return!1;for(var s=0,a=i.length;s<a;s++)if(!e(i[s],r[s]))return!1;return!0}if(i&&"object"===u(i)){var c,l=Object.keys(i);if(!r||"object"!==u(r)||!o&&l.length!==Object.keys(r).length)return!1;for(s=0,a=l.length;s<a;s++)if("canvas"!==(c=l[s])&&"group"!==c&&!e(i[c],r[c]))return!1;return!0}}(this[i],this,!0)},saveState:function(i){var o=i&&i.propertySet||r,s="_"+o;return this[s]?(e(this,s,this[o]),i&&i.stateProperties&&e(this,s,i.stateProperties),this):this.setupState(i)},setupState:function(e){var i=(e=e||{}).propertySet||r;return e.propertySet=i,this["_"+i]={},this.saveState(e),this}})}(),tt=ni.util.degreesToRadians,ni.util.object.extend(ni.Object.prototype,{_findTargetCorner:function(e,i){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var r,o,s,a=e.x,c=e.y,l=Object.keys(this.oCoords),u=l.length-1;for(this.__corner=0;0<=u;u--)if(s=l[u],this.isControlVisible(s)&&(o=this._getImageLines(i?this.oCoords[s].touchCorner:this.oCoords[s].corner),0!==(r=this._findCrossPoints({x:a,y:c},o))&&1==r%2))return this.__corner=s,s;return!1},forEachControl:function(e){for(var i in this.controls)e(this.controls[i],i,this)},_setCornerCoords:function(){var e=this.oCoords;for(var i in e){var r=this.controls[i];e[i].corner=r.calcCornerCoords(this.angle,this.cornerSize,e[i].x,e[i].y,!1),e[i].touchCorner=r.calcCornerCoords(this.angle,this.touchCornerSize,e[i].x,e[i].y,!0)}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var i=this.getCenterPoint(),r=this._calculateCurrentDimensions(),o=this.canvas.viewportTransform;return e.translate(i.x,i.y),e.scale(1/o[0],1/o[3]),e.rotate(tt(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore(),this},drawBorders:function(e,i){i=i||{};var r=this._calculateCurrentDimensions(),o=this.borderScaleFactor,s=r.x+o,a=r.y+o,c=void 0===i.hasControls?this.hasControls:i.hasControls,l=!1;return e.save(),e.strokeStyle=i.borderColor||this.borderColor,this._setLineDash(e,i.borderDashArray||this.borderDashArray),e.strokeRect(-s/2,-a/2,s,a),c&&(e.beginPath(),this.forEachControl(function(i,r,o){i.withConnection&&i.getVisibility(o,r)&&(l=!0,e.moveTo(i.x*s,i.y*a),e.lineTo(i.x*s+i.offsetX,i.y*a+i.offsetY))}),l&&e.stroke()),e.restore(),this},drawBordersInGroup:function(e,i,r){r=r||{};var o=ni.util.sizeAfterTransform(this.width,this.height,i),s=this.strokeWidth,a=this.strokeUniform,c=this.borderScaleFactor,l=o.x+s*(a?this.canvas.getZoom():i.scaleX)+c,u=o.y+s*(a?this.canvas.getZoom():i.scaleY)+c;return e.save(),this._setLineDash(e,r.borderDashArray||this.borderDashArray),e.strokeStyle=r.borderColor||this.borderColor,e.strokeRect(-l/2,-u/2,l,u),e.restore(),this},drawControls:function(e,i){i=i||{},e.save();var r,o,s=this.canvas.getRetinaScaling();return e.setTransform(s,0,0,s,0,0),e.strokeStyle=e.fillStyle=i.cornerColor||this.cornerColor,this.transparentCorners||(e.strokeStyle=i.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(e,i.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(r=this.group.calcTransformMatrix()),this.forEachControl(function(s,a,c){o=c.oCoords[a],s.getVisibility(c,a)&&(r&&(o=ni.util.transformPoint(o,r)),s.render(e,o.x,o.y,i,c))}),e.restore(),this},isControlVisible:function(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)},setControlVisible:function(e,i){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=i,this},setControlsVisibility:function(e){for(var i in e||(e={}),e)this.setControlVisible(i,e[i]);return this},onDeselect:function(){},onSelect:function(){}}),ni.util.object.extend(ni.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,i){var r=function(){},o=(i=i||{}).onComplete||r,s=i.onChange||r,a=this;return ni.util.animate({target:this,startValue:e.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(i){e.set("left",i),a.requestRenderAll(),s()},onComplete:function(){e.setCoords(),o()}})},fxCenterObjectV:function(e,i){var r=function(){},o=(i=i||{}).onComplete||r,s=i.onChange||r,a=this;return ni.util.animate({target:this,startValue:e.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(i){e.set("top",i),a.requestRenderAll(),s()},onComplete:function(){e.setCoords(),o()}})},fxRemove:function(e,i){var r=function(){},o=(i=i||{}).onComplete||r,s=i.onChange||r,a=this;return ni.util.animate({target:this,startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(i){e.set("opacity",i),a.requestRenderAll(),s()},onComplete:function(){a.remove(e),o()}})}}),ni.util.object.extend(ni.Object.prototype,{animate:function(){if(arguments[0]&&"object"===u(arguments[0])){var e,i,r=[],o=[];for(e in arguments[0])r.push(e);for(var s=0,a=r.length;s<a;s++)e=r[s],i=s!==a-1,o.push(this._animate(e,arguments[0][e],arguments[1],i));return o}return this._animate.apply(this,arguments)},_animate:function(e,i,r,o){var s,a=this;i=i.toString(),r=r?ni.util.object.clone(r):{},~e.indexOf(".")&&(s=e.split("."));var c=-1<a.colorProperties.indexOf(e)||s&&-1<a.colorProperties.indexOf(s[1]),l=s?this.get(s[0])[s[1]]:this.get(e);"from"in r||(r.from=l),c||(i=~i.indexOf("=")?l+parseFloat(i.replace("=","")):parseFloat(i));var u={target:this,startValue:r.from,endValue:i,byValue:r.by,easing:r.easing,duration:r.duration,abort:r.abort&&function(e,i,o){return r.abort.call(a,e,i,o)},onChange:function(i,c,l){s?a[s[0]][s[1]]=i:a.set(e,i),o||r.onChange&&r.onChange(i,c,l)},onComplete:function(e,i,s){o||(a.setCoords(),r.onComplete&&r.onComplete(e,i,s))}};return c?ni.util.animateColor(u.startValue,u.endValue,u.duration,u):ni.util.animate(u)}}),function(e){"use strict";function i(e,i){var r=e.origin,o=e.axis1,c=e.axis2,l=e.dimension,u=i.nearest,h=i.center,f=i.farthest;return function(){switch(this.get(r)){case u:return a(this.get(o),this.get(c));case h:return a(this.get(o),this.get(c))+.5*this.get(l);case f:return s(this.get(o),this.get(c))}}}var r=e.fabric||(e.fabric={}),c=r.util.object.extend,l=r.util.object.clone,u={x1:1,x2:1,y1:1,y2:1};r.Line?r.warn("fabric.Line is already defined"):(r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,i){e||(e=[0,0,0,0]),this.callSuper("initialize",i),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(i)},_setWidthHeight:function(e){e||(e={}),this.width=o(this.x2-this.x1),this.height=o(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,i){return this.callSuper("_set",e,i),void 0!==u[e]&&this._setWidthHeight(),this},_getLeftToOriginX:i({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:i({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){e.beginPath();var i=this.calcLinePoints();e.moveTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineWidth=this.strokeWidth;var r=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return c(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,i=this.y1<=this.y2?-1:1,r=e*this.width*.5,o=i*this.height*.5;return{x1:r,x2:-(e*this.width*.5),y1:o,y2:-(i*this.height*.5)}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'" />\n']}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["x1","y1","x2","y2"]),r.Line.fromElement=function(e,i,o){o=o||{};var s=r.parseAttributes(e,r.Line.ATTRIBUTE_NAMES),a=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];i(new r.Line(a,c(s,o)))},r.Line.fromObject=function(e,i){var o=l(e,!0);o.points=[e.x1,e.y1,e.x2,e.y2],r.Object._fromObject("Line",o,function(e){delete e.points,i&&i(e)},"points")})}(i),ti=(tn=(te=i).fabric||(te.fabric={})).util.degreesToRadians,tn.Circle?tn.warn("fabric.Circle is already defined."):(tn.Circle=tn.util.createClass(tn.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:tn.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,i){return this.callSuper("_set",e,i),"radius"===e&&this.setRadius(i),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,i=(this.endAngle-this.startAngle)%360;if(0==i)e=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var r=ti(this.startAngle),o=ti(this.endAngle),s=this.radius;e=['<path d="M '+tn.util.cos(r)*s+" "+tn.util.sin(r)*s," A "+s+" "+s," 0 ",+(180<i?"1":"0")+" 1"," "+tn.util.cos(o)*s+" "+tn.util.sin(o)*s,'" ',"COMMON_PARTS"," />\n",]}return e},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,ti(this.startAngle),ti(this.endAngle),!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",2*e).set("height",2*e)}}),tn.Circle.ATTRIBUTE_NAMES=tn.SHARED_ATTRIBUTES.concat(["cx","cy","r"]),tn.Circle.fromElement=function(e,i){var r,o=tn.parseAttributes(e,tn.Circle.ATTRIBUTE_NAMES);if(!("radius"in(r=o))||!(0<=r.radius))throw Error("value of `r` attribute is required and can not be negative");o.left=(o.left||0)-o.radius,o.top=(o.top||0)-o.radius,i(new tn.Circle(o))},tn.Circle.fromObject=function(e,i){tn.Object._fromObject("Circle",e,i)}),(to=(tr=i).fabric||(tr.fabric={})).Triangle?to.warn("fabric.Triangle is already defined"):(to.Triangle=to.util.createClass(to.Object,{type:"triangle",width:100,height:100,_render:function(e){var i=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-i,r),e.lineTo(0,-r),e.lineTo(i,r),e.closePath(),this._renderPaintInOrder(e)},_toSVG:function(){var e=this.width/2,i=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-e+" "+i,"0 "+-i,e+" "+i].join(","),'" />']}}),to.Triangle.fromObject=function(e,i){return to.Object._fromObject("Triangle",e,i)}),(ta=(ts=i).fabric||(ts.fabric={})).Ellipse?ta.warn("fabric.Ellipse is already defined."):(ta.Ellipse=ta.util.createClass(ta.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:ta.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this.set("rx",e&&e.rx||0),this.set("ry",e&&e.ry||0)},_set:function(e,i){return this.callSuper("_set",e,i),"rx"===e?(this.rx=i,this.set("width",2*i)):"ry"===e&&(this.ry=i,this.set("height",2*i)),this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,2*nt,!1),e.restore(),this._renderPaintInOrder(e)}}),ta.Ellipse.ATTRIBUTE_NAMES=ta.SHARED_ATTRIBUTES.concat(["cx","cy","rx","ry"]),ta.Ellipse.fromElement=function(e,i){var r=ta.parseAttributes(e,ta.Ellipse.ATTRIBUTE_NAMES);r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,i(new ta.Ellipse(r))},ta.Ellipse.fromObject=function(e,i){ta.Object._fromObject("Ellipse",e,i)}),tu=(tl=(tc=i).fabric||(tc.fabric={})).util.object.extend,tl.Rect?tl.warn("fabric.Rect is already defined"):(tl.Rect=tl.util.createClass(tl.Object,{stateProperties:tl.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:tl.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(e){var i=this.rx?a(this.rx,this.width/2):0,r=this.ry?a(this.ry,this.height/2):0,o=this.width,s=this.height,c=-this.width/2,l=-this.height/2,u=0!==i||0!==r;e.beginPath(),e.moveTo(c+i,l),e.lineTo(c+o-i,l),u&&e.bezierCurveTo(c+o-.4477152502*i,l,c+o,l+.4477152502*r,c+o,l+r),e.lineTo(c+o,l+s-r),u&&e.bezierCurveTo(c+o,l+s-.4477152502*r,c+o-.4477152502*i,l+s,c+o-i,l+s),e.lineTo(c+i,l+s),u&&e.bezierCurveTo(c+.4477152502*i,l+s,c,l+s-.4477152502*r,c,l+s-r),e.lineTo(c,l+r),u&&e.bezierCurveTo(c,l+.4477152502*r,c+.4477152502*i,l,c+i,l),e.closePath(),this._renderPaintInOrder(e)},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),tl.Rect.ATTRIBUTE_NAMES=tl.SHARED_ATTRIBUTES.concat(["x","y","rx","ry","width","height"]),tl.Rect.fromElement=function(e,i,r){if(!e)return i(null);r=r||{};var o=tl.parseAttributes(e,tl.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var s=new tl.Rect(tu(r?tl.util.object.clone(r):{},o));s.visible=s.visible&&0<s.width&&0<s.height,i(s)},tl.Rect.fromObject=function(e,i){return tl.Object._fromObject("Rect",e,i)}),td=(tf=(th=i).fabric||(th.fabric={})).util.object.extend,tp=tf.util.array.min,tg=tf.util.array.max,tv=tf.util.toFixed,tm=tf.util.projectStrokeOnPoints,tf.Polyline?tf.warn("fabric.Polyline is already defined"):(tf.Polyline=tf.util.createClass(tf.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:tf.Object.prototype.cacheProperties.concat("points"),initialize:function(e,i){i=i||{},this.points=e||[],this.callSuper("initialize",i),this._setPositionDimensions(i)},_projectStrokeOnPoints:function(){return tm(this.points,this,!0)},_setPositionDimensions:function(e){var i,r=this._calcDimensions(e),o=this.exactBoundingBox?this.strokeWidth:0;this.width=r.width-o,this.height=r.height-o,e.fromSVG||(i=this.translateToGivenOrigin({x:r.left-this.strokeWidth/2+o/2,y:r.top-this.strokeWidth/2+o/2},"left","top",this.originX,this.originY)),void 0===e.left&&(this.left=e.fromSVG?r.left:i.x),void 0===e.top&&(this.top=e.fromSVG?r.top:i.y),this.pathOffset={x:r.left+this.width/2+o/2,y:r.top+this.height/2+o/2}},_calcDimensions:function(){var e=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,i=tp(e,"x")||0,r=tp(e,"y")||0;return{left:i,top:r,width:(tg(e,"x")||0)-i,height:(tg(e,"y")||0)-r}},toObject:function(e){return td(this.callSuper("toObject",e),{points:this.points.concat()})},_toSVG:function(){for(var e=[],i=this.pathOffset.x,r=this.pathOffset.y,o=tf.Object.NUM_FRACTION_DIGITS,s=0,a=this.points.length;s<a;s++)e.push(tv(this.points[s].x-i,o),",",tv(this.points[s].y-r,o)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',e.join(""),'" />\n']},commonRender:function(e){var i,r=this.points.length,o=this.pathOffset.x,s=this.pathOffset.y;if(!r||isNaN(this.points[r-1].y))return!1;e.beginPath(),e.moveTo(this.points[0].x-o,this.points[0].y-s);for(var a=0;a<r;a++)i=this.points[a],e.lineTo(i.x-o,i.y-s);return!0},_render:function(e){this.commonRender(e)&&this._renderPaintInOrder(e)},complexity:function(){return this.get("points").length}}),tf.Polyline.ATTRIBUTE_NAMES=tf.SHARED_ATTRIBUTES.concat(),tf.Polyline.fromElementGenerator=function(e){return function(i,r,o){if(!i)return r(null);o||(o={});var s=tf.parsePointsAttribute(i.getAttribute("points")),a=tf.parseAttributes(i,tf[e].ATTRIBUTE_NAMES);a.fromSVG=!0,r(new tf[e](s,td(a,o)))}},tf.Polyline.fromElement=tf.Polyline.fromElementGenerator("Polyline"),tf.Polyline.fromObject=function(e,i){return tf.Object._fromObject("Polyline",e,i,"points")}),t8=(ty=(t$=i).fabric||(t$.fabric={})).util.projectStrokeOnPoints,ty.Polygon?ty.warn("fabric.Polygon is already defined"):(ty.Polygon=ty.util.createClass(ty.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return t8(this.points,this)},_render:function(e){this.commonRender(e)&&(e.closePath(),this._renderPaintInOrder(e))}}),ty.Polygon.ATTRIBUTE_NAMES=ty.SHARED_ATTRIBUTES.concat(),ty.Polygon.fromElement=ty.Polyline.fromElementGenerator("Polygon"),ty.Polygon.fromObject=function(e,i){ty.Object._fromObject("Polygon",e,i,"points")}),tC=(tx=(tb=i).fabric||(tb.fabric={})).util.array.min,t_=tx.util.array.max,tw=tx.util.object.extend,tS=tx.util.object.clone,tT=tx.util.toFixed,tx.Path?tx.warn("fabric.Path is already defined"):(tx.Path=tx.util.createClass(tx.Object,{type:"path",path:null,cacheProperties:tx.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:tx.Object.prototype.stateProperties.concat("path"),initialize:function(e,i){delete(i=tS(i||{})).path,this.callSuper("initialize",i),this._setPath(e||[],i)},_setPath:function(e,i){this.path=tx.util.makePathSimpler(Array.isArray(e)?e:tx.util.parsePath(e)),tx.Polyline.prototype._setPositionDimensions.call(this,i||{})},_renderPathCommands:function(e){var i,r=0,o=0,s=0,a=0,c=0,l=0,u=-this.pathOffset.x,h=-this.pathOffset.y;e.beginPath();for(var f=0,d=this.path.length;f<d;++f)switch((i=this.path[f])[0]){case"L":s=i[1],a=i[2],e.lineTo(s+u,a+h);break;case"M":r=s=i[1],o=a=i[2],e.moveTo(s+u,a+h);break;case"C":s=i[5],a=i[6],c=i[3],l=i[4],e.bezierCurveTo(i[1]+u,i[2]+h,c+u,l+h,s+u,a+h);break;case"Q":e.quadraticCurveTo(i[1]+u,i[2]+h,i[3]+u,i[4]+h),s=i[3],a=i[4],c=i[1],l=i[2];break;case"z":case"Z":s=r,a=o,e.closePath()}},_render:function(e){this._renderPathCommands(e),this._renderPaintInOrder(e)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(e){return tw(this.callSuper("toObject",e),{path:this.path.map(function(e){return e.slice()})})},toDatalessObject:function(e){var i=this.toObject(["sourcePath"].concat(e));return i.sourcePath&&delete i.path,i},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',tx.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var e=tx.Object.NUM_FRACTION_DIGITS;return" translate("+tT(-this.pathOffset.x,e)+", "+tT(-this.pathOffset.y,e)+")"},toClipPathSVG:function(e){var i=this._getOffsetTransform();return"   "+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:i})},toSVG:function(e){var i=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:i})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var e,i,r=[],o=[],s=0,a=0,c=0,l=0,u=0,h=this.path.length;u<h;++u){switch((e=this.path[u])[0]){case"L":c=e[1],l=e[2],i=[];break;case"M":s=c=e[1],a=l=e[2],i=[];break;case"C":i=tx.util.getBoundsOfCurve(c,l,e[1],e[2],e[3],e[4],e[5],e[6]),c=e[5],l=e[6];break;case"Q":i=tx.util.getBoundsOfCurve(c,l,e[1],e[2],e[1],e[2],e[3],e[4]),c=e[3],l=e[4];break;case"z":case"Z":c=s,l=a}i.forEach(function(e){r.push(e.x),o.push(e.y)}),r.push(c),o.push(l)}var f=tC(r)||0,d=tC(o)||0;return{left:f,top:d,width:(t_(r)||0)-f,height:(t_(o)||0)-d}}}),tx.Path.fromObject=function(e,i){if("string"==typeof e.sourcePath){var r=e.sourcePath;tx.loadSVGFromURL(r,function(r){var o=r[0];o.setOptions(e),e.clipPath?tx.util.enlivenObjects([e.clipPath],function(e){o.clipPath=e[0],i&&i(o)}):i&&i(o)})}else tx.Object._fromObject("Path",e,i,"path")},tx.Path.ATTRIBUTE_NAMES=tx.SHARED_ATTRIBUTES.concat(["d"]),tx.Path.fromElement=function(e,i,r){var o=tx.parseAttributes(e,tx.Path.ATTRIBUTE_NAMES);o.fromSVG=!0,i(new tx.Path(o.d,tw(o,r)))}),tk=(tO=(t0=i).fabric||(t0.fabric={})).util.array.min,tP=tO.util.array.max,tO.Group||(tO.Group=tO.util.createClass(tO.Object,tO.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,i,r){i=i||{},this._objects=[],r&&this.callSuper("initialize",i),this._objects=e||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;if(r)this._updateObjectsACoords();else{var s=i&&i.centerPoint;void 0!==i.originX&&(this.originX=i.originX),void 0!==i.originY&&(this.originY=i.originY),s||this._calcBounds(),this._updateObjectsCoords(s),delete i.centerPoint,this.callSuper("initialize",i)}this.setCoords()},_updateObjectsACoords:function(){for(var e=this._objects.length;e--;)this._objects[e].setCoords(!0)},_updateObjectsCoords:function(e){e=e||this.getCenterPoint();for(var i=this._objects.length;i--;)this._updateObjectCoords(this._objects[i],e)},_updateObjectCoords:function(e,i){var r=e.left,o=e.top;e.set({left:r-i.x,top:o-i.y}),e.group=this,e.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){var i=!!this.group;return this._restoreObjectsState(),tO.util.resetObjectTransform(this),e&&(i&&tO.util.removeTransformFromObject(e,this.group.calcTransformMatrix()),this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,i?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),tO.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,i){var r=this._objects.length;if(this.useSetOnGroup)for(;r--;)this._objects[r].setOnGroup(e,i);if("canvas"===e)for(;r--;)this._objects[r]._set(e,i);tO.Object.prototype._set.call(this,e,i)},toObject:function(e){var i=this.includeDefaultValues,r=this._objects.filter(function(e){return!e.excludeFromExport}).map(function(r){var o=r.includeDefaultValues;r.includeDefaultValues=i;var s=r.toObject(e);return r.includeDefaultValues=o,s}),o=tO.Object.prototype.toObject.call(this,e);return o.objects=r,o},toDatalessObject:function(e){var i,r=this.sourcePath;if(r)i=r;else{var o=this.includeDefaultValues;i=this._objects.map(function(i){var r=i.includeDefaultValues;i.includeDefaultValues=o;var s=i.toDatalessObject(e);return i.includeDefaultValues=r,s})}var s=tO.Object.prototype.toDatalessObject.call(this,e);return s.objects=i,s},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=tO.Object.prototype.shouldCache.call(this);if(e){for(var i=0,r=this._objects.length;i<r;i++)if(this._objects[i].willDrawShadow())return this.ownCaching=!1,!1}return e},willDrawShadow:function(){if(tO.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var i=0,r=this._objects.length;i<r;i++)this._objects[i].render(e);this._drawClipPath(e,this.clipPath)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var i=0,r=this._objects.length;i<r;i++)if(this._objects[i].isCacheDirty(!0)){if(this._cacheCanvas){var o=this.cacheWidth/this.zoomX,s=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-o/2,-s/2,o,s)}return!0}return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach(function(i){tO.util.addTransformToObject(i,e),delete i.group,i.setCoords()}),this},destroy:function(){return this._objects.forEach(function(e){e.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(e){e.dispose&&e.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var e=this._objects,i=this.canvas;this._objects=[];var r=this.toObject();delete r.objects;var o=new tO.ActiveSelection([]);return o.set(r),o.type="activeSelection",i.remove(this),e.forEach(function(e){e.group=o,e.dirty=!0,i.add(e)}),o.canvas=i,o._objects=e,i._activeObject=o,o.setCoords(),o}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(e){e.setCoords(!0)}),this},_calcBounds:function(e){for(var i,r,o,s,a=[],c=[],l=["tr","br","bl","tl"],u=0,h=this._objects.length,f=l.length;u<h;++u){for(o=(i=this._objects[u]).calcACoords(),s=0;s<f;s++)r=l[s],a.push(o[r].x),c.push(o[r].y);i.aCoords=o}this._getBounds(a,c,e)},_getBounds:function(e,i,r){var o=new tO.Point(tk(e),tk(i)),s=new tO.Point(tP(e),tP(i)),a=o.y||0,c=o.x||0,l=s.x-o.x||0,u=s.y-o.y||0;this.width=l,this.height=u,r||this.setPositionByOrigin({x:c,y:a},"left","top")},_toSVG:function(e){for(var i=["<g ","COMMON_PARTS"," >\n"],r=0,o=this._objects.length;r<o;r++)i.push("     ",this._objects[r].toSVG(e));return i.push("</g>\n"),i},getSvgStyles:function(){var e=void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",i=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),i].join("")},toClipPathSVG:function(e){for(var i=[],r=0,o=this._objects.length;r<o;r++)i.push(" ",this._objects[r].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(i,{reviver:e})}}),tO.Group.fromObject=function(e,i){var r=e.objects,o=tO.util.object.clone(e,!0);return delete o.objects,"string"==typeof r?void tO.loadSVGFromURL(r,function(s){var a=tO.util.groupSVGElements(s,e,r),c=o.clipPath;delete o.clipPath,a.set(o),c?tO.util.enlivenObjects([c],function(e){a.clipPath=e[0],i&&i(a)}):i&&i(a)}):void tO.util.enlivenObjects(r,function(r){tO.util.enlivenObjectEnlivables(e,o,function(){i&&i(new tO.Group(r,o,!0))})})}),(tA=(tE=i).fabric||(tE.fabric={})).ActiveSelection||(tA.ActiveSelection=tA.util.createClass(tA.Group,{type:"activeSelection",initialize:function(e,i){i=i||{},this._objects=e||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;i.originX&&(this.originX=i.originX),i.originY&&(this.originY=i.originY),this._calcBounds(),this._updateObjectsCoords(),tA.Object.prototype.initialize.call(this,i),this.setCoords()},toGroup:function(){var e=this._objects.concat();this._objects=[];var i=tA.Object.prototype.toObject.call(this),r=new tA.Group([]);if(delete i.type,r.set(i),e.forEach(function(e){e.canvas.remove(e),e.group=r}),r._objects=e,!this.canvas)return r;var o=this.canvas;return o.add(r),o._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(e,i,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",e,i),void 0===(r=r||{}).hasControls&&(r.hasControls=!1),r.forActiveSelection=!0;for(var o=0,s=this._objects.length;o<s;o++)this._objects[o]._renderControls(e,r);e.restore()}}),tA.ActiveSelection.fromObject=function(e,i){tA.util.enlivenObjects(e.objects,function(r){delete e.objects,i&&i(new tA.ActiveSelection(r,e,!0))})}),tD=i,tL=ni.util.object.extend,tD.fabric||(tD.fabric={}),tD.fabric.Image?ni.warn("fabric.Image is already defined."):(ni.Image=ni.util.createClass(ni.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:ni.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:ni.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(e,i){i||(i={}),this.filters=[],this.cacheKey="texture"+ni.Object.__uid++,this.callSuper("initialize",i),this._initElement(e,i)},getElement:function(){return this._element||{}},setElement:function(e,i){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=e,this._originalElement=e,this._initConfig(i),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(e){var i=ni.filterBackend;i&&i.evictCachesForKey&&i.evictCachesForKey(e)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(e){ni.util.cleanUpJsdomNode(this[e]),this[e]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var e=this.getElement();return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}},_stroke:function(e){if(this.stroke&&0!==this.strokeWidth){var i=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-i,-r),e.lineTo(i,-r),e.lineTo(i,r),e.lineTo(-i,r),e.lineTo(-i,-r),e.closePath()}},toObject:function(e){var i=[];this.filters.forEach(function(e){e&&i.push(e.toObject())});var r=tL(this.callSuper("toObject",["cropX","cropY"].concat(e)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:i});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var e,i=[],r=[],o=this._element,s=-this.width/2,a=-this.height/2,c="",l="";if(!o)return[];if(this.hasCrop()){var u=ni.Object.__uid++;i.push('<clipPath id="imageCrop_'+u+'">\n','   <rect x="'+s+'" y="'+a+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),c=' clip-path="url(#imageCrop_'+u+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),r.push("    <image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',s-this.cropX,'" y="',a-this.cropY,'" width="',o.width||o.naturalWidth,'" height="',o.height||o.height,l,'"',c,"></image>\n"),this.stroke||this.strokeDashArray){var h=this.fill;this.fill=null,e=["   <rect ",'x="',s,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=h}return"fill"===this.paintFirst?i.concat(r,e):i.concat(e,r)},getSrc:function(e){var i=e?this._element:this._originalElement;return i?i.toDataURL?i.toDataURL():this.srcFromAttribute?i.getAttribute("src"):i.src:this.src||""},setSrc:function(e,i,r){return ni.util.loadImage(e,function(e,o){this.setElement(e,r),this._setWidthHeight(),i&&i(this,o)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var e=this.resizeFilter,i=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),o=r.scaleX,s=r.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||o>i&&s>i)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,void(this._lastScaleY=s);ni.filterBackend||(ni.filterBackend=ni.initFilterBackend());var c=ni.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,u=a.width,h=a.height;c.width=u,c.height=h,this._element=c,this._lastScaleX=e.scaleX=o,this._lastScaleY=e.scaleY=s,ni.filterBackend.applyFilters([e],a,u,h,this._element,l),this._filterScalingX=c.width/this._originalElement.width,this._filterScalingY=c.height/this._originalElement.height},applyFilters:function(e){if(e=(e=e||this.filters||[]).filter(function(e){return e&&!e.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===e.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var i=this._originalElement,r=i.naturalWidth||i.width,o=i.naturalHeight||i.height;if(this._element===this._originalElement){var s=ni.util.createCanvasElement();s.width=r,s.height=o,this._element=s,this._filteredEl=s}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,o),this._lastScaleX=1,this._lastScaleY=1;return ni.filterBackend||(ni.filterBackend=ni.initFilterBackend()),ni.filterBackend.applyFilters(e,this._originalElement,r,o,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(e){ni.util.setImageSmoothing(e,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)},drawCacheOnCanvas:function(e){ni.util.setImageSmoothing(e,this.imageSmoothing),ni.Object.prototype.drawCacheOnCanvas.call(this,e)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(e){var i=this._element;if(i){var r=this._filterScalingX,o=this._filterScalingY,c=this.width,l=this.height,u=a,h=s,f=h(this.cropX,0),d=h(this.cropY,0),p=i.naturalWidth||i.width,g=i.naturalHeight||i.height,v=f*r,m=d*o,$=u(c*r,p-v),y=u(l*o,g-m),b=u(c,p/r-f),x=u(l,g/o-d);i&&e.drawImage(i,v,m,$,y,-c/2,-l/2,b,x)}},_needsResize:function(){var e=this.getTotalObjectScaling();return e.scaleX!==this._lastScaleX||e.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(e,i){this.setElement(ni.util.getById(e),i),ni.util.addClass(this.getElement(),ni.Image.CSS_CANVAS)},_initConfig:function(e){e||(e={}),this.setOptions(e),this._setWidthHeight(e)},_initFilters:function(e,i){e&&e.length?ni.util.enlivenObjects(e,function(e){i&&i(e)},"fabric.Image.filters"):i&&i()},_setWidthHeight:function(e){e||(e={});var i=this.getElement();this.width=e.width||i.naturalWidth||i.width||0,this.height=e.height||i.naturalHeight||i.height||0},parsePreserveAspectRatioAttribute:function(){var e,i=ni.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),r=this._element.width,o=this._element.height,s=1,a=1,c=0,l=0,u=0,h=0,f=this.width,d=this.height,p={width:f,height:d};return i&&("none"!==i.alignX||"none"!==i.alignY)?("meet"===i.meetOrSlice&&(e=(f-r*(s=a=ni.util.findScaleToFit(this._element,p)))/2,"Min"===i.alignX&&(c=-e),"Max"===i.alignX&&(c=e),e=(d-o*a)/2,"Min"===i.alignY&&(l=-e),"Max"===i.alignY&&(l=e)),"slice"===i.meetOrSlice&&(e=r-f/(s=a=ni.util.findScaleToCover(this._element,p)),"Mid"===i.alignX&&(u=e/2),"Max"===i.alignX&&(u=e),e=o-d/a,"Mid"===i.alignY&&(h=e/2),"Max"===i.alignY&&(h=e),r=f/s,o=d/a)):(s=f/r,a=d/o),{width:r,height:o,scaleX:s,scaleY:a,offsetLeft:c,offsetTop:l,cropX:u,cropY:h}}}),ni.Image.CSS_CANVAS="canvas-img",ni.Image.prototype.getSvgSrc=ni.Image.prototype.getSrc,ni.Image.fromObject=function(e,i){var r=ni.util.object.clone(e);ni.util.loadImage(r.src,function(e,o){return o?void(i&&i(null,!0)):void ni.Image.prototype._initFilters.call(r,r.filters,function(o){r.filters=o||[],ni.Image.prototype._initFilters.call(r,[r.resizeFilter],function(o){r.resizeFilter=o[0],ni.util.enlivenObjectEnlivables(r,r,function(){i(new ni.Image(e,r),!1)})})})},null,r.crossOrigin)},ni.Image.fromURL=function(e,i,r){ni.util.loadImage(e,function(e,o){i&&i(new ni.Image(e,r),o)},null,r&&r.crossOrigin)},ni.Image.ATTRIBUTE_NAMES=ni.SHARED_ATTRIBUTES.concat(["x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),ni.Image.fromElement=function(e,i,r){var o=ni.parseAttributes(e,ni.Image.ATTRIBUTE_NAMES);ni.Image.fromURL(o["xlink:href"],i,tL(r?ni.util.object.clone(r):{},o))}),ni.util.object.extend(ni.Object.prototype,{_getAngleValueForStraighten:function(){var e=this.angle%360;return 0<e?90*eq((e-1)/90):90*eq(e/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(e){var i=function(){},r=(e=e||{}).onComplete||i,o=e.onChange||i,s=this;return ni.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){s.rotate(e),o()},onComplete:function(){s.setCoords(),r()}})}}),ni.util.object.extend(ni.StaticCanvas.prototype,{straightenObject:function(e){return e.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(e){return e.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function e(e,i){var r=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(r,"precision "+i+" float;\nvoid main(){}"),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS)}function i(e){e&&e.tileSize&&(this.tileSize=e.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}ni.isWebglSupported=function(i){if(ni.isLikelyNode)return!1;i=i||ni.WebglFilterBackend.prototype.tileSize;var r=document.createElement("canvas"),o=r.getContext("webgl")||r.getContext("experimental-webgl"),s=!1;if(o){ni.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),s=ni.maxTextureSize>=i;for(var a=["highp","mediump","lowp"],c=0;3>c;c++)if(e(o,a[c])){ni.webGlPrecision=a[c];break}}return this.isSupported=s,s},ni.WebglFilterBackend=i,i.prototype={tileSize:2048,resources:{},setupGLContext:function(e,i){this.dispose(),this.createWebGLCanvas(e,i),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(e,i)},chooseFastestCopyGLTo2DMethod:function(e,i){var r,o=void 0!==window.performance;try{new ImageData(1,1),r=!0}catch(s){r=!1}var a="undefined"!=typeof ArrayBuffer,c="undefined"!=typeof Uint8ClampedArray;if(o&&r&&a&&c){var l=ni.util.createCanvasElement(),u=new ArrayBuffer(e*i*4);if(ni.forceGLPutImageData)return this.imageBuffer=u,void(this.copyGLTo2D=f);var d,p,g={imageBuffer:u,destinationWidth:e,destinationHeight:i,targetCanvas:l};l.width=e,l.height=i,d=window.performance.now(),h.call(g,this.gl,g),p=window.performance.now()-d,d=window.performance.now(),f.call(g,this.gl,g),p>window.performance.now()-d?(this.imageBuffer=u,this.copyGLTo2D=f):this.copyGLTo2D=h}},createWebGLCanvas:function(e,i){var r=ni.util.createCanvasElement();r.width=e,r.height=i;var o={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},s=r.getContext("webgl",o);s||(s=r.getContext("experimental-webgl",o)),s&&(s.clearColor(0,0,0,0),this.canvas=r,this.gl=s)},applyFilters:function(e,i,r,o,s,a){var c,l=this.gl;a&&(c=this.getCachedTexture(a,i));var u,h,f,d,p,g,v={originalWidth:i.width||i.originalWidth,originalHeight:i.height||i.originalHeight,sourceWidth:r,sourceHeight:o,destinationWidth:r,destinationHeight:o,context:l,sourceTexture:this.createTexture(l,r,o,!c&&i),targetTexture:this.createTexture(l,r,o),originalTexture:c||this.createTexture(l,r,o,!c&&i),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},m=l.createFramebuffer();return l.bindFramebuffer(l.FRAMEBUFFER,m),e.forEach(function(e){e&&e.applyTo(v)}),f=(h=(u=v).targetCanvas).width,d=h.height,p=u.destinationWidth,g=u.destinationHeight,(f!==p||d!==g)&&(h.width=p,h.height=g),this.copyGLTo2D(l,v),l.bindTexture(l.TEXTURE_2D,null),l.deleteTexture(v.sourceTexture),l.deleteTexture(v.targetTexture),l.deleteFramebuffer(m),s.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(e,i,r,o){var s=e.createTexture();return e.bindTexture(e.TEXTURE_2D,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,i,r,0,e.RGBA,e.UNSIGNED_BYTE,null),s},getCachedTexture:function(e,i){if(this.textureCache[e])return this.textureCache[e];var r=this.createTexture(this.gl,i.width,i.height,i);return this.textureCache[e]=r,r},evictCachesForKey:function(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])},copyGLTo2D:h,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var e=this.gl,i={renderer:"",vendor:""};if(!e)return i;var r=e.getExtension("WEBGL_debug_renderer_info");if(r){var o=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);o&&(i.renderer=o.toLowerCase()),s&&(i.vendor=s.toLowerCase())}return this.gpuInfo=i,i}}}(),function(){"use strict";function e(){}var i=function(){};ni.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:i,dispose:i,clearWebGLCaches:i,resources:{},applyFilters:function(e,i,r,o,s){var a=s.getContext("2d");a.drawImage(i,0,0,r,o);var c={sourceWidth:r,sourceHeight:o,imageData:a.getImageData(0,0,r,o),originalEl:i,originalImageData:a.getImageData(0,0,r,o),canvasEl:s,ctx:a,filterBackend:this};return e.forEach(function(e){e.applyTo(c)}),(c.imageData.width!==r||c.imageData.height!==o)&&(s.width=c.imageData.width,s.height=c.imageData.height),a.putImageData(c.imageData,0,0),c}}}(),ni.Image=ni.Image||{},ni.Image.filters=ni.Image.filters||{},ni.Image.filters.BaseFilter=ni.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(e){e&&this.setOptions(e)},setOptions:function(e){for(var i in e)this[i]=e[i]},createProgram:function(e,i,r){i=i||this.fragmentSource,r=r||this.vertexSource,"highp"!==ni.webGlPrecision&&(i=i.replace(/precision highp float/g,"precision "+ni.webGlPrecision+" float"));var o=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(o,r),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw Error("Vertex shader compile error for "+this.type+": "+e.getShaderInfoLog(o));var s=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(s,i),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw Error("Fragment shader compile error for "+this.type+": "+e.getShaderInfoLog(s));var a=e.createProgram();if(e.attachShader(a,o),e.attachShader(a,s),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(a));var c=this.getAttributeLocations(e,a),l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:c,uniformLocations:l}},getAttributeLocations:function(e,i){return{aPosition:e.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(e,i,r){var o=i.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)},_setupFrameBuffer:function(e){var i,r,o=e.context;1<e.passes?(i=e.destinationWidth,r=e.destinationHeight,(e.sourceWidth!==i||e.sourceHeight!==r)&&(o.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(o,i,r)),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e.targetTexture,0)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.finish())},_swapTextures:function(e){e.passes--,e.pass++;var i=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=i},isNeutralState:function(){var e=this.mainParameter,i=ni.Image.filters[this.type].prototype;if(e){if(Array.isArray(i[e])){for(var r=i[e].length;r--;)if(this[e][r]!==i[e][r])return!1;return!0}return i[e]===this[e]}return!1},applyTo:function(e){e.webgl?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},retrieveShader:function(e){return e.programCache.hasOwnProperty(this.type)||(e.programCache[this.type]=this.createProgram(e.context)),e.programCache[this.type]},applyToWebGL:function(e){var i=e.context,r=this.retrieveShader(e);0===e.pass&&e.originalTexture?i.bindTexture(i.TEXTURE_2D,e.originalTexture):i.bindTexture(i.TEXTURE_2D,e.sourceTexture),i.useProgram(r.program),this.sendAttributeData(i,r.attributeLocations,e.aPosition),i.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),i.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(i,r.uniformLocations),i.viewport(0,0,e.destinationWidth,e.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(e,i,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,i),e.activeTexture(e.TEXTURE0)},unbindAdditionalTexture:function(e,i){e.activeTexture(i),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(e){this[this.mainParameter]=e},sendUniformData:function(){},createHelpLayer:function(e){if(!e.helpLayer){var i=document.createElement("canvas");i.width=e.sourceWidth,i.height=e.sourceHeight,e.helpLayer=i}},toObject:function(){var e={type:this.type},i=this.mainParameter;return i&&(e[i]=this[i]),e},toJSON:function(){return this.toObject()}}),ni.Image.filters.BaseFilter.fromObject=function(e,i){var r=new ni.Image.filters[e.type](e);return i&&i(r),r},tF=(tI=(tj=i).fabric||(tj.fabric={})).Image.filters,tM=tI.util.createClass,tF.ColorMatrix=tM(tF.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var i,r,o,s,a,c=e.imageData.data,l=c.length,u=this.matrix,h=this.colorsOnly;for(a=0;a<l;a+=4)i=c[a],r=c[a+1],o=c[a+2],h?(c[a]=i*u[0]+r*u[1]+o*u[2]+255*u[4],c[a+1]=i*u[5]+r*u[6]+o*u[7]+255*u[9],c[a+2]=i*u[10]+r*u[11]+o*u[12]+255*u[14]):(s=c[a+3],c[a]=i*u[0]+r*u[1]+o*u[2]+s*u[3]+255*u[4],c[a+1]=i*u[5]+r*u[6]+o*u[7]+s*u[8]+255*u[9],c[a+2]=i*u[10]+r*u[11]+o*u[12]+s*u[13]+255*u[14],c[a+3]=i*u[15]+r*u[16]+o*u[17]+s*u[18]+255*u[19])},getUniformLocations:function(e,i){return{uColorMatrix:e.getUniformLocation(i,"uColorMatrix"),uConstants:e.getUniformLocation(i,"uConstants")}},sendUniformData:function(e,i){var r=this.matrix,o=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(i.uColorMatrix,!1,o),e.uniform4fv(i.uConstants,s)}}),tI.Image.filters.ColorMatrix.fromObject=tI.Image.filters.BaseFilter.fromObject,tB=(t3=(tR=i).fabric||(tR.fabric={})).Image.filters,t1=t3.util.createClass,tB.Brightness=t1(tB.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(0!==this.brightness){var i,r=e.imageData.data,o=r.length,s=eq(255*this.brightness);for(i=0;i<o;i+=4)r[i]+=s,r[i+1]=r[i+1]+s,r[i+2]=r[i+2]+s}},getUniformLocations:function(e,i){return{uBrightness:e.getUniformLocation(i,"uBrightness")}},sendUniformData:function(e,i){e.uniform1f(i.uBrightness,this.brightness)}}),t3.Image.filters.Brightness.fromObject=t3.Image.filters.BaseFilter.fromObject,tU=(tz=(t2=i).fabric||(t2.fabric={})).util.object.extend,tY=tz.Image.filters,t9=tz.util.createClass,tY.Convolute=t9(tY.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var i=nn(this.matrix.length),r=this.type+"_"+i+"_"+(this.opaque?1:0),o=this.fragmentSource[r];return e.programCache.hasOwnProperty(r)||(e.programCache[r]=this.createProgram(e.context,o)),e.programCache[r]},applyTo2d:function(e){var i,r,o,s,a,l,u,h,f,d,p,g,v,m=e.imageData,$=m.data,y=this.matrix,b=eq(nn(y.length)),x=c(b/2),C=m.width,_=m.height,w=e.ctx.createImageData(C,_),S=w.data,T=this.opaque?1:0;for(p=0;p<_;p++)for(d=0;d<C;d++){for(a=4*(p*C+d),i=0,r=0,o=0,s=0,v=0;v<b;v++)for(g=0;g<b;g++)l=d+g-x,!(0>(u=p+v-x)||u>=_||0>l||l>=C)&&(h=4*(u*C+l),f=y[v*b+g],i+=$[h]*f,r+=$[h+1]*f,o+=$[h+2]*f,T||(s+=$[h+3]*f));S[a]=i,S[a+1]=r,S[a+2]=o,S[a+3]=T?$[a+3]:s}e.imageData=w},getUniformLocations:function(e,i){return{uMatrix:e.getUniformLocation(i,"uMatrix"),uOpaque:e.getUniformLocation(i,"uOpaque"),uHalfSize:e.getUniformLocation(i,"uHalfSize"),uSize:e.getUniformLocation(i,"uSize")}},sendUniformData:function(e,i){e.uniform1fv(i.uMatrix,this.matrix)},toObject:function(){return tU(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),tz.Image.filters.Convolute.fromObject=tz.Image.filters.BaseFilter.fromObject,tV=(tW=(tN=i).fabric||(tN.fabric={})).Image.filters,tH=tW.util.createClass,tV.Grayscale=tH(tV.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(e){var i,r,o=e.imageData.data,c=o.length,l=this.mode;for(i=0;i<c;i+=4)"average"===l?r=(o[i]+o[i+1]+o[i+2])/3:"lightness"===l?r=(a(o[i],o[i+1],o[i+2])+s(o[i],o[i+1],o[i+2]))/2:"luminosity"===l&&(r=.21*o[i]+.72*o[i+1]+.07*o[i+2]),o[i]=r,o[i+1]=r,o[i+2]=r},retrieveShader:function(e){var i=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(i)){var r=this.fragmentSource[this.mode];e.programCache[i]=this.createProgram(e.context,r)}return e.programCache[i]},getUniformLocations:function(e,i){return{uMode:e.getUniformLocation(i,"uMode")}},sendUniformData:function(e,i){e.uniform1i(i.uMode,1)},isNeutralState:function(){return!1}}),tW.Image.filters.Grayscale.fromObject=tW.Image.filters.BaseFilter.fromObject,tG=(t4=(tX=i).fabric||(tX.fabric={})).Image.filters,t6=t4.util.createClass,tG.Invert=t6(tG.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(e){var i,r=e.imageData.data,o=r.length;for(i=0;i<o;i+=4)r[i]=255-r[i],r[i+1]=255-r[i+1],r[i+2]=255-r[i+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,i){return{uInvert:e.getUniformLocation(i,"uInvert")}},sendUniformData:function(e,i){e.uniform1i(i.uInvert,this.invert)}}),t4.Image.filters.Invert.fromObject=t4.Image.filters.BaseFilter.fromObject,tq=(t5=(t7=i).fabric||(t7.fabric={})).util.object.extend,tK=t5.Image.filters,tZ=t5.util.createClass,tK.Noise=tZ(tK.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var i,r,o=e.imageData.data,s=o.length,a=this.noise;for(i=0,s=o.length;i<s;i+=4)r=(.5-Math.random())*a,o[i]+=r,o[i+1]+=r,o[i+2]+=r}},getUniformLocations:function(e,i){return{uNoise:e.getUniformLocation(i,"uNoise"),uSeed:e.getUniformLocation(i,"uSeed")}},sendUniformData:function(e,i){e.uniform1f(i.uNoise,this.noise/255),e.uniform1f(i.uSeed,Math.random())},toObject:function(){return tq(this.callSuper("toObject"),{noise:this.noise})}}),t5.Image.filters.Noise.fromObject=t5.Image.filters.BaseFilter.fromObject,et=(tQ=(tJ=i).fabric||(tJ.fabric={})).Image.filters,ee=tQ.util.createClass,et.Pixelate=ee(et.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(e){var i,r,o,s,c,l,u,h,f,d,p,g=e.imageData,v=g.data,m=g.height,$=g.width;for(r=0;r<m;r+=this.blocksize)for(o=0;o<$;o+=this.blocksize)for(s=v[i=4*r*$+4*o],c=v[i+1],l=v[i+2],u=v[i+3],d=a(r+this.blocksize,m),p=a(o+this.blocksize,$),h=r;h<d;h++)for(f=o;f<p;f++)v[i=4*h*$+4*f]=s,v[i+1]=c,v[i+2]=l,v[i+3]=u},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(e,i){return{uBlocksize:e.getUniformLocation(i,"uBlocksize"),uStepW:e.getUniformLocation(i,"uStepW"),uStepH:e.getUniformLocation(i,"uStepH")}},sendUniformData:function(e,i){e.uniform1f(i.uBlocksize,this.blocksize)}}),tQ.Image.filters.Pixelate.fromObject=tQ.Image.filters.BaseFilter.fromObject,er=(ei=(en=i).fabric||(en.fabric={})).util.object.extend,eo=ei.Image.filters,es=ei.util.createClass,eo.RemoveColor=es(eo.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var i,r,o,s,a=e.imageData.data,c=255*this.distance,l=new ei.Color(this.color).getSource(),u=[l[0]-c,l[1]-c,l[2]-c],h=[l[0]+c,l[1]+c,l[2]+c];for(i=0;i<a.length;i+=4)r=a[i],o=a[i+1],s=a[i+2],r>u[0]&&o>u[1]&&s>u[2]&&r<h[0]&&o<h[1]&&s<h[2]&&(a[i+3]=0)},getUniformLocations:function(e,i){return{uLow:e.getUniformLocation(i,"uLow"),uHigh:e.getUniformLocation(i,"uHigh")}},sendUniformData:function(e,i){var r=new ei.Color(this.color).getSource(),o=parseFloat(this.distance),s=[0+r[0]/255-o,0+r[1]/255-o,0+r[2]/255-o,1],a=[r[0]/255+o,r[1]/255+o,r[2]/255+o,1];e.uniform4fv(i.uLow,s),e.uniform4fv(i.uHigh,a)},toObject:function(){return er(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),ei.Image.filters.RemoveColor.fromObject=ei.Image.filters.BaseFilter.fromObject,function(e){"use strict";var i=e.fabric||(e.fabric={}),r=i.Image.filters,o=i.util.createClass,s={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in s)r[a]=o(r.ColorMatrix,{type:a,matrix:s[a],mainParameter:!1,colorsOnly:!0}),i.Image.filters[a].fromObject=i.Image.filters.BaseFilter.fromObject}(i),el=(ec=i.fabric).Image.filters,eu=ec.util.createClass,el.BlendColor=eu(el.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(e){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[e]+"}\n}"},retrieveShader:function(e){var i,r=this.type+"_"+this.mode;return e.programCache.hasOwnProperty(r)||(i=this.buildSource(this.mode),e.programCache[r]=this.createProgram(e.context,i)),e.programCache[r]},applyTo2d:function(e){var i,r,c,l,u,h,f,d=e.imageData.data,p=d.length,g=1-this.alpha;i=(f=new ec.Color(this.color).getSource())[0]*this.alpha,r=f[1]*this.alpha,c=f[2]*this.alpha;for(var v=0;v<p;v+=4)switch(l=d[v],u=d[v+1],h=d[v+2],this.mode){case"multiply":d[v]=l*i/255,d[v+1]=u*r/255,d[v+2]=h*c/255;break;case"screen":d[v]=255-(255-l)*(255-i)/255,d[v+1]=255-(255-u)*(255-r)/255,d[v+2]=255-(255-h)*(255-c)/255;break;case"add":d[v]=l+i,d[v+1]=u+r,d[v+2]=h+c;break;case"diff":case"difference":d[v]=o(l-i),d[v+1]=o(u-r),d[v+2]=o(h-c);break;case"subtract":d[v]=l-i,d[v+1]=u-r,d[v+2]=h-c;break;case"darken":d[v]=a(l,i),d[v+1]=a(u,r),d[v+2]=a(h,c);break;case"lighten":d[v]=s(l,i),d[v+1]=s(u,r),d[v+2]=s(h,c);break;case"overlay":d[v]=128>i?2*l*i/255:255-2*(255-l)*(255-i)/255,d[v+1]=128>r?2*u*r/255:255-2*(255-u)*(255-r)/255,d[v+2]=128>c?2*h*c/255:255-2*(255-h)*(255-c)/255;break;case"exclusion":d[v]=i+l-2*i*l/255,d[v+1]=r+u-2*r*u/255,d[v+2]=c+h-2*c*h/255;break;case"tint":d[v]=i+l*g,d[v+1]=r+u*g,d[v+2]=c+h*g}},getUniformLocations:function(e,i){return{uColor:e.getUniformLocation(i,"uColor")}},sendUniformData:function(e,i){var r=new ec.Color(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(i.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),ec.Image.filters.BlendColor.fromObject=ec.Image.filters.BaseFilter.fromObject,ed=(ef=i.fabric).Image.filters,ep=ef.util.createClass,ed.BlendImage=ep(ed.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(e){var i=this.type+"_"+this.mode,r=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(i)||(e.programCache[i]=this.createProgram(e.context,r)),e.programCache[i]},applyToWebGL:function(e){var i=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(i,r,i.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(i,i.TEXTURE1)},createTexture:function(e,i){return e.getCachedTexture(i.cacheKey,i._element)},calculateMatrix:function(){var e=this.image,i=e._element.width,r=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/i,-e.top/r,1]},applyTo2d:function(e){var i,r,o,s,a,c,l,u,h,f,d,p=e.imageData,g=e.filterBackend.resources,v=p.data,m=v.length,$=p.width,y=p.height,b=this.image;g.blendImage||(g.blendImage=ef.util.createCanvasElement()),f=(h=g.blendImage).getContext("2d"),h.width!==$||h.height!==y?(h.width=$,h.height=y):f.clearRect(0,0,$,y),f.setTransform(b.scaleX,0,0,b.scaleY,b.left,b.top),f.drawImage(b._element,0,0,$,y),d=f.getImageData(0,0,$,y).data;for(var x=0;x<m;x+=4)switch(a=v[x],c=v[x+1],l=v[x+2],u=v[x+3],i=d[x],r=d[x+1],o=d[x+2],s=d[x+3],this.mode){case"multiply":v[x]=a*i/255,v[x+1]=c*r/255,v[x+2]=l*o/255,v[x+3]=u*s/255;break;case"mask":v[x+3]=s}},getUniformLocations:function(e,i){return{uTransformMatrix:e.getUniformLocation(i,"uTransformMatrix"),uImage:e.getUniformLocation(i,"uImage")}},sendUniformData:function(e,i){var r=this.calculateMatrix();e.uniform1i(i.uImage,1),e.uniformMatrix3fv(i.uTransformMatrix,!1,r)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),ef.Image.filters.BlendImage.fromObject=function(e,i){ef.Image.fromObject(e.image,function(r){var o=ef.util.object.clone(e);o.image=r,i(new ef.Image.filters.BlendImage(o))})},ev=(eg=i).fabric||(eg.fabric={}),em=l,e$=c,ey=nn,e8=o,eb=eq,ex=eJ,eC=eK,e_=ev.Image.filters,ew=ev.util.createClass,e_.Resize=ew(e_.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(e,i){return{uDelta:e.getUniformLocation(i,"uDelta"),uTaps:e.getUniformLocation(i,"uTaps")}},sendUniformData:function(e,i){e.uniform2fv(i.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(i.uTaps,this.taps)},retrieveShader:function(e){var i=this.getFilterWindow(),r=this.type+"_"+i;if(!e.programCache.hasOwnProperty(r)){var o=this.generateShader(i);e.programCache[r]=this.createProgram(e.context,o)}return e.programCache[r]},getFilterWindow:function(){var e=this.tempScale;return eK(this.lanczosLobes/e)},getTaps:function(){for(var e=this.lanczosCreate(this.lanczosLobes),i=this.tempScale,r=this.getFilterWindow(),o=Array(r),s=1;s<=r;s++)o[s-1]=e(s*i);return o},generateShader:function(e){for(var i=Array(e),r=this.fragmentSourceTOP,o=1;o<=e;o++)i[o-1]=o+".0 * uDelta";return r+="uniform float uTaps["+e+"];\n",r+="void main() {\n",r+="  vec4 color = texture2D(uTexture, vTexCoord);\n",r+="  float sum = 1.0;\n",i.forEach(function(e,i){r+="  color += texture2D(uTexture, vTexCoord + "+e+") * uTaps["+i+"];\n",r+="  color += texture2D(uTexture, vTexCoord - "+e+") * uTaps["+i+"];\n",r+="  sum += 2.0 * uTaps["+i+"];\n"}),r+="  gl_FragColor = color / sum;\n",r+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(e){e.webgl?(e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=eq(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=eq(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceHeight=e.destinationHeight):this.applyTo2d(e)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(e){return function(i){if(i>=e||i<=-e)return 0;if(11920929e-14>i&&-.00000011920929<i)return 1;var r=(i*=nt)/e;return ex(i)/i*ex(r)/r}},applyTo2d:function(e){var i=e.imageData,r=this.scaleX,o=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/o;var s,a=i.width,c=i.height,l=eb(a*r),u=eb(c*o);"sliceHack"===this.resizeType?s=this.sliceByTwo(e,a,c,l,u):"hermite"===this.resizeType?s=this.hermiteFastResize(e,a,c,l,u):"bilinear"===this.resizeType?s=this.bilinearFiltering(e,a,c,l,u):"lanczos"===this.resizeType&&(s=this.lanczosResize(e,a,c,l,u)),e.imageData=s},sliceByTwo:function(e,i,r,o,s){var a,c,l=e.imageData,u=!1,h=!1,f=.5*i,d=.5*r,p=ev.filterBackend.resources,g=0,v=0,m=i,$=0;for(p.sliceByTwo||(p.sliceByTwo=document.createElement("canvas")),((a=p.sliceByTwo).width<1.5*i||a.height<r)&&(a.width=1.5*i,a.height=r),(c=a.getContext("2d")).clearRect(0,0,1.5*i,r),c.putImageData(l,0,0),o=e$(o),s=e$(s);!u||!h;)i=f,r=d,o<e$(.5*f)?f=e$(.5*f):(f=o,u=!0),s<e$(.5*d)?d=e$(.5*d):(d=s,h=!0),c.drawImage(a,g,v,i,r,m,$,f,d),g=m,v=$,$+=d;return c.getImageData(g,v,o,s)},lanczosResize:function(e,i,r,o,s){var a=e.imageData.data,c=e.ctx.createImageData(o,s),l=c.data,u=this.lanczosCreate(this.lanczosLobes),h=this.rcpScaleX,f=this.rcpScaleY,d=2/this.rcpScaleX,p=2/this.rcpScaleY,g=eC(h*this.lanczosLobes/2),v=eC(f*this.lanczosLobes/2),m={},$={},y={};return function e(b){var x,C,_,w,S,T,O,k,P,E,A;for($.x=(b+.5)*h,y.x=e$($.x),x=0;x<s;x++){for($.y=(x+.5)*f,y.y=e$($.y),S=0,T=0,O=0,k=0,P=0,C=y.x-g;C<=y.x+g;C++)if(!(0>C||C>=i)){m[E=e$(1e3*e8(C-$.x))]||(m[E]={});for(var D=y.y-v;D<=y.y+v;D++)0>D||D>=r||(A=e$(1e3*e8(D-$.y)),m[E][A]||(m[E][A]=u(ey(em(E*d,2)+em(A*p,2))/1e3)),0<(_=m[E][A])&&(S+=_,T+=_*a[w=4*(D*i+C)],O+=_*a[w+1],k+=_*a[w+2],P+=_*a[w+3]))}l[w=4*(x*o+b)]=T/S,l[w+1]=O/S,l[w+2]=k/S,l[w+3]=P/S}return++b<o?e(b):c}(0)},bilinearFiltering:function(e,i,r,o,s){var a,c,l,u,h,f,d,p,g,v=0,m=this.rcpScaleX,$=this.rcpScaleY,y=4*(i-1),b=e.imageData.data,x=e.ctx.createImageData(o,s),C=x.data;for(l=0;l<s;l++)for(u=0;u<o;u++)for(h=m*u-(a=e$(m*u)),f=$*l-(c=e$($*l)),g=4*(c*i+a),d=0;4>d;d++)p=b[g+d]*(1-h)*(1-f)+b[g+4+d]*h*(1-f)+b[g+y+d]*f*(1-h)+b[g+y+4+d]*h*f,C[v++]=p;return x},hermiteFastResize:function(e,i,r,o,s){for(var a=this.rcpScaleX,c=this.rcpScaleY,l=eC(a/2),u=eC(c/2),h=e.imageData.data,f=e.ctx.createImageData(o,s),d=f.data,p=0;p<s;p++)for(var g=0;g<o;g++){for(var v=4*(g+p*o),m=0,$=0,y=0,b=0,x=0,C=0,_=0,w=(p+.5)*c,S=e$(p*c);S<(p+1)*c;S++)for(var T=e8(w-(S+.5))/u,O=(g+.5)*a,k=e$(g*a);k<(g+1)*a;k++){var P=e8(O-(k+.5))/l,E=ey(T*T+P*P);1<E&&-1>E||0<(m=2*E*E*E-3*E*E+1)&&(_+=m*h[(P=4*(k+S*i))+3],y+=m,255>h[P+3]&&(m=m*h[P+3]/250),b+=m*h[P],x+=m*h[P+1],C+=m*h[P+2],$+=m)}d[v]=b/$,d[v+1]=x/$,d[v+2]=C/$,d[v+3]=_/y}return f},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),ev.Image.filters.Resize.fromObject=ev.Image.filters.BaseFilter.fromObject,e0=(eT=(eS=i).fabric||(eS.fabric={})).Image.filters,eO=eT.util.createClass,e0.Contrast=eO(e0.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(0!==this.contrast){var i,r=e.imageData.data,o=r.length,s=c(255*this.contrast),a=259*(s+255)/(255*(259-s));for(i=0;i<o;i+=4)r[i]=a*(r[i]-128)+128,r[i+1]=a*(r[i+1]-128)+128,r[i+2]=a*(r[i+2]-128)+128}},getUniformLocations:function(e,i){return{uContrast:e.getUniformLocation(i,"uContrast")}},sendUniformData:function(e,i){e.uniform1f(i.uContrast,this.contrast)}}),eT.Image.filters.Contrast.fromObject=eT.Image.filters.BaseFilter.fromObject,eE=(eP=(ek=i).fabric||(ek.fabric={})).Image.filters,eA=eP.util.createClass,eE.Saturation=eA(eE.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(0!==this.saturation){var i,r,o=e.imageData.data,a=o.length,c=-this.saturation;for(i=0;i<a;i+=4)r=s(o[i],o[i+1],o[i+2]),o[i]+=r===o[i]?0:(r-o[i])*c,o[i+1]+=r===o[i+1]?0:(r-o[i+1])*c,o[i+2]+=r===o[i+2]?0:(r-o[i+2])*c}},getUniformLocations:function(e,i){return{uSaturation:e.getUniformLocation(i,"uSaturation")}},sendUniformData:function(e,i){e.uniform1f(i.uSaturation,-this.saturation)}}),eP.Image.filters.Saturation.fromObject=eP.Image.filters.BaseFilter.fromObject,ej=(eL=(eD=i).fabric||(eD.fabric={})).Image.filters,eI=eL.util.createClass,ej.Vibrance=eI(ej.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(e){if(0!==this.vibrance){var i,r,a,c,l=e.imageData.data,u=l.length,h=-this.vibrance;for(i=0;i<u;i+=4)c=2*o((r=s(l[i],l[i+1],l[i+2]))-(a=(l[i]+l[i+1]+l[i+2])/3))/255*h,l[i]+=r===l[i]?0:(r-l[i])*c,l[i+1]+=r===l[i+1]?0:(r-l[i+1])*c,l[i+2]+=r===l[i+2]?0:(r-l[i+2])*c}},getUniformLocations:function(e,i){return{uVibrance:e.getUniformLocation(i,"uVibrance")}},sendUniformData:function(e,i){e.uniform1f(i.uVibrance,-this.vibrance)}}),eL.Image.filters.Vibrance.fromObject=eL.Image.filters.BaseFilter.fromObject,eR=(eM=(eF=i).fabric||(eF.fabric={})).Image.filters,e3=eM.util.createClass,eR.Blur=e3(eR.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var i,r,s=e.filterBackend.resources,a=e.imageData.width,c=e.imageData.height;s.blurLayer1||(s.blurLayer1=eM.util.createCanvasElement(),s.blurLayer2=eM.util.createCanvasElement()),i=s.blurLayer1,r=s.blurLayer2,(i.width!==a||i.height!==c)&&(r.width=i.width=a,r.height=i.height=c);var l,u,h,f,d=i.getContext("2d"),p=r.getContext("2d"),g=.06*this.blur*.5;for(d.putImageData(e.imageData,0,0),p.clearRect(0,0,a,c),f=-15;f<=15;f++)h=g*(u=f/15)*a+(l=(Math.random()-.5)/4),p.globalAlpha=1-o(u),p.drawImage(i,h,l),d.drawImage(r,0,0),p.globalAlpha=1,p.clearRect(0,0,r.width,r.height);for(f=-15;f<=15;f++)h=g*(u=f/15)*c+(l=(Math.random()-.5)/4),p.globalAlpha=1-o(u),p.drawImage(i,l,h),d.drawImage(r,0,0),p.globalAlpha=1,p.clearRect(0,0,r.width,r.height);e.ctx.drawImage(i,0,0);var v=e.ctx.getImageData(0,0,i.width,i.height);return d.globalAlpha=1,d.clearRect(0,0,i.width,i.height),v},getUniformLocations:function(e,i){return{delta:e.getUniformLocation(i,"uDelta")}},sendUniformData:function(e,i){var r=this.chooseRightDelta();e.uniform2fv(i.delta,r)},chooseRightDelta:function(){var e,i=1,r=[0,0];return this.horizontal?1<this.aspectRatio&&(i=1/this.aspectRatio):1>this.aspectRatio&&(i=this.aspectRatio),e=i*this.blur*.12,this.horizontal?r[0]=e:r[1]=e,r}}),eR.Blur.fromObject=eM.Image.filters.BaseFilter.fromObject,e2=(e1=(eB=i).fabric||(eB.fabric={})).Image.filters,ez=e1.util.createClass,e2.Gamma=ez(e2.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],e2.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var i,r=e.imageData.data,o=this.gamma,s=r.length,a=1/o[0],c=1/o[1],u=1/o[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),i=0,s=256;i<s;i++)this.rVals[i]=255*l(i/255,a),this.gVals[i]=255*l(i/255,c),this.bVals[i]=255*l(i/255,u);for(i=0,s=r.length;i<s;i+=4)r[i]=this.rVals[r[i]],r[i+1]=this.gVals[r[i+1]],r[i+2]=this.bVals[r[i+2]]},getUniformLocations:function(e,i){return{uGamma:e.getUniformLocation(i,"uGamma")}},sendUniformData:function(e,i){e.uniform3fv(i.uGamma,this.gamma)}}),e1.Image.filters.Gamma.fromObject=e1.Image.filters.BaseFilter.fromObject,e9=(eY=(eU=i).fabric||(eU.fabric={})).Image.filters,eN=eY.util.createClass,e9.Composed=eN(e9.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach(function(i){i.applyTo(e)})},toObject:function(){return eY.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(e){return e.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(e){return!e.isNeutralState()})}}),eY.Image.filters.Composed.fromObject=function(e,i){var r=(e.subFilters||[]).map(function(e){return new eY.Image.filters[e.type](e)}),o=new eY.Image.filters.Composed({subFilters:r});return i&&i(o),o},eH=(eV=(eW=i).fabric||(eW.fabric={})).Image.filters,eX=eV.util.createClass,eH.HueRotation=eX(eH.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*nt,i=eV.util.cos(e),r=1/3,o=.5773502691896257*eV.util.sin(e),s=1-i;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=i+s/3,this.matrix[1]=r*s-o,this.matrix[2]=r*s+o,this.matrix[5]=r*s+o,this.matrix[6]=i+r*s,this.matrix[7]=r*s-o,this.matrix[10]=r*s-o,this.matrix[11]=r*s+o,this.matrix[12]=i+r*s},isNeutralState:function(e){return this.calculateMatrix(),eH.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),eH.BaseFilter.prototype.applyTo.call(this,e)}}),eV.Image.filters.HueRotation.fromObject=eV.Image.filters.BaseFilter.fromObject,function(e){"use strict";var i=e.fabric||(e.fabric={}),r=i.util.object.clone;if(i.Text)i.warn("fabric.Text is already defined");else{var o=["fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles","direction","path","pathStartOffset","pathSide","pathAlign",];i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat(o),cacheProperties:i.Object.prototype.cacheProperties.concat(o),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,i){this.styles=i&&i.styles||{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",i),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var e=this.path;e&&(e.segmentsInfo=i.util.getPathSegmentsInfo(e.path))},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,i,r,o,s,a,c,l=0,u=this._textLines.length;l<u;l++)if(("justify"===this.textAlign||l!==u-1&&!this.isEndOfWrapping(l))&&(o=0,s=this._textLines[l],(i=this.getLineWidth(l))<this.width&&(c=this.textLines[l].match(this._reSpacesAndTabs)))){r=c.length,e=(this.width-i)/r;for(var h=0,f=s.length;h<=f;h++)a=this.__charBounds[l][h],this._reSpaceAndTab.test(s[h])?(a.width+=e,a.kernedWidth+=e,a.left+=o,o+=e):a.left+=o}},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),i=this.fontSize;return e.width+=i*e.zoomX,e.height+=i*e.zoomY,e},_render:function(e){var i=this.path;i&&!i.isNotVisible()&&i._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){"stroke"===this.paintFirst?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,i,r){if(e.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":e.textBaseline="middle";break;case"ascender":e.textBaseline="top";break;case"descender":e.textBaseline="bottom"}e.font=this._getFontDeclaration(i,r)},calcTextWidth:function(){for(var e,i=this.getLineWidth(0),r=1,o=this._textLines.length;r<o;r++)(e=this.getLineWidth(r))>i&&(i=e);return i},_renderTextLine:function(e,i,r,o,s,a){this._renderChars(e,i,r,o,s,a)},_renderTextLinesBackground:function(e){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var i,r,o,s,a,c,l,u=e.fillStyle,h=this._getLeftOffset(),f=this._getTopOffset(),d=0,p=0,g=this.path,v=0,m=this._textLines.length;v<m;v++)if(i=this.getHeightOfLine(v),this.textBackgroundColor||this.styleHas("textBackgroundColor",v)){o=this._textLines[v],r=this._getLineLeftOffset(v),p=0,d=0,s=this.getValueOfPropertyAt(v,0,"textBackgroundColor");for(var $=0,y=o.length;$<y;$++)a=this.__charBounds[v][$],c=this.getValueOfPropertyAt(v,$,"textBackgroundColor"),g?(e.save(),e.translate(a.renderLeft,a.renderTop),e.rotate(a.angle),e.fillStyle=c,c&&e.fillRect(-a.width/2,-i/this.lineHeight*(1-this._fontSizeFraction),a.width,i/this.lineHeight),e.restore()):c===s?p+=a.kernedWidth:(l=h+r+d,"rtl"===this.direction&&(l=this.width-l-p),e.fillStyle=s,s&&e.fillRect(l,f,p,i/this.lineHeight),d=a.left,p=a.width,s=c);c&&!g&&(l=h+r+d,"rtl"===this.direction&&(l=this.width-l-p),e.fillStyle=c,e.fillRect(l,f,p,i/this.lineHeight)),f+=i}else f+=i;e.fillStyle=u,this._removeShadow(e)}},getFontCache:function(e){var r=e.fontFamily.toLowerCase();i.charWidthsCache[r]||(i.charWidthsCache[r]={});var o=i.charWidthsCache[r],s=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase();return o[s]||(o[s]={}),o[s]},_measureChar: function (t, e, n, i) { var r, o, s, a, c = this.getFontCache(e), l = n + t, u = this._getFontDeclaration(e) === this._getFontDeclaration(i), h = e.fontSize / this.CACHE_FONT_SIZE; if ((n && void 0 !== c[n] && (s = c[n]), void 0 !== c[t] && (a = r = c[t]), u && void 0 !== c[l] && (a = (o = c[l]) - s), void 0 === r || void 0 === s || void 0 === o)) { var f = this.getMeasuringContext(); this._setTextStyles(f, e, !0); } const ret = ( void 0 === r && ((a = r = f.measureText(t).width), (c[t] = r)), void 0 === s && u && n && ((s = f.measureText(n).width), (c[n] = s)), u && void 0 === o && ((o = f.measureText(l).width), (c[l] = o), (a = o - s)), { width: r * h, kernedWidth: a * h } ); if (t == '1') { if (e.fontSize > 15) { ret.width = 8; ret.kernedWidth = 8; } else { ret.width = 5; ret.kernedWidth = 5; } } return ret; },getHeightOfChar:function(e,i){return this.getValueOfPropertyAt(e,i,"fontSize")},measureLine:function(e){var i=this._measureLine(e);return 0!==this.charSpacing&&(i.width-=this._getWidthOfCharSpacing()),0>i.width&&(i.width=0),i},_measureLine:function(e){var r,o,s,a,c,l,u=0,h=this._textLines[e],f=Array(h.length),d=0,p=this.path,g="right"===this.pathSide;for(this.__charBounds[e]=f,r=0;r<h.length;r++)o=h[r],a=this._getGraphemeBox(o,e,r,s),f[r]=a,u+=a.kernedWidth,s=o;if(f[r]={left:a?a.left+a.width:0,width:0,kernedWidth:0,height:this.fontSize},p){switch(l=p.segmentsInfo[p.segmentsInfo.length-1].length,(c=i.util.getPointOnPath(p.path,0,p.segmentsInfo)).x+=p.pathOffset.x,c.y+=p.pathOffset.y,this.textAlign){case"left":d=g?l-u:0;break;case"center":d=(l-u)/2;break;case"right":d=g?0:l-u}for(d+=this.pathStartOffset*(g?-1:1),r=g?h.length-1:0;g?0<=r:r<h.length;g?r--:r++)a=f[r],d>l?d%=l:0>d&&(d+=l),this._setGraphemeOnPath(d,a,c),d+=a.kernedWidth}return{width:u,numOfSpaces:0}},_setGraphemeOnPath:function(e,r,o){var s=e+r.kernedWidth/2,a=this.path,c=i.util.getPointOnPath(a.path,s,a.segmentsInfo);r.renderLeft=c.x-o.x,r.renderTop=c.y-o.y,r.angle=c.angle+("right"===this.pathSide?nt:0)},_getGraphemeBox:function(e,i,r,o,s){var a,c=this.getCompleteStyleDeclaration(i,r),l=o?this.getCompleteStyleDeclaration(i,r-1):{},u=this._measureChar(e,c,o,l),h=u.kernedWidth,f=u.width;0!==this.charSpacing&&(f+=a=this._getWidthOfCharSpacing(),h+=a);var d={width:f,left:0,height:c.fontSize,kernedWidth:h,deltaY:c.deltaY};if(0<r&&!s){var p=this.__charBounds[i][r-1];d.left=p.left+p.width+u.kernedWidth-u.width}return d},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var i=this._textLines[e],r=this.getHeightOfChar(e,0),o=1,a=i.length;o<a;o++)r=s(this.getHeightOfChar(e,o),r);return this.__lineHeights[e]=r*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,i=0,r=0,o=this._textLines.length;r<o;r++)e=this.getHeightOfLine(r),i+=r===o-1?e/this.lineHeight:e;return i},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(e,i){e.save();for(var r=0,o=this._getLeftOffset(),s=this._getTopOffset(),a=0,c=this._textLines.length;a<c;a++){var l=this.getHeightOfLine(a),u=l/this.lineHeight,h=this._getLineLeftOffset(a);this._renderTextLine(i,e,this._textLines[a],o+h,s+r+u,a),r+=l}e.restore()},_renderTextFill:function(e){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(!this.stroke||0===this.strokeWidth)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,r,o,s,a,c){var l,u,h,f,d,p=this.getHeightOfLine(c),g=-1!==this.textAlign.indexOf("justify"),v="",m=0,$=this.path,y=!g&&0===this.charSpacing&&this.isEmptyStyles(c)&&!$,b="ltr"===this.direction,x="ltr"===this.direction?1:-1,C=r.canvas.getAttribute("dir");if(r.save(),C!==this.direction&&(r.canvas.setAttribute("dir",b?"ltr":"rtl"),r.direction=b?"ltr":"rtl",r.textAlign=b?"left":"right"),a-=p*this._fontSizeFraction/this.lineHeight,y)return this._renderChar(e,r,c,0,o.join(""),s,a,p),void r.restore();for(var _=0,w=o.length-1;_<=w;_++)f=_===w||this.charSpacing||$,v+=o[_],h=this.__charBounds[c][_],0===m?(s+=x*(h.kernedWidth-h.width),m+=h.width):m+=h.kernedWidth,g&&!f&&this._reSpaceAndTab.test(o[_])&&(f=!0),f||(l=l||this.getCompleteStyleDeclaration(c,_),u=this.getCompleteStyleDeclaration(c,_+1),f=i.util.hasStyleChanged(l,u,!1)),f&&($?(r.save(),r.translate(h.renderLeft,h.renderTop),r.rotate(h.angle),this._renderChar(e,r,c,_,v,-m/2,0,p),r.restore()):(d=s,this._renderChar(e,r,c,_,v,d,a,p)),v="",l=u,s+=x*m,m=0);r.restore()},_applyPatternGradientTransformText:function(e){var r,o=i.util.createCanvasElement(),s=this.width+this.strokeWidth,a=this.height+this.strokeWidth;return o.width=s,o.height=a,(r=o.getContext("2d")).beginPath(),r.moveTo(0,0),r.lineTo(s,0),r.lineTo(s,a),r.lineTo(0,a),r.closePath(),r.translate(s/2,a/2),r.fillStyle=e.toLive(r),this._applyPatternGradientTransform(r,e),r.fill(),r.createPattern(o,"no-repeat")},handleFiller:function(e,i,r){var o,s;return r.toLive?"percentage"===r.gradientUnits||r.gradientTransform||r.patternTransform?(o=-this.width/2,s=-this.height/2,e.translate(o,s),e[i]=this._applyPatternGradientTransformText(r),{offsetX:o,offsetY:s}):(e[i]=r.toLive(e,this),this._applyPatternGradientTransform(e,r)):(e[i]=r,{offsetX:0,offsetY:0})},_setStrokeStyles:function(e,i){return e.lineWidth=i.strokeWidth,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",i.stroke)},_setFillStyles:function(e,i){return this.handleFiller(e,"fillStyle",i.fill)},_renderChar:function(e,i,r,o,s,a,c){var l,u,h=this._getStyleDeclaration(r,o),f=this.getCompleteStyleDeclaration(r,o),d="fillText"===e&&f.fill,p="strokeText"===e&&f.stroke&&f.strokeWidth;(p||d)&&(i.save(),d&&(l=this._setFillStyles(i,f)),p&&(u=this._setStrokeStyles(i,f)),i.font=this._getFontDeclaration(f),h&&h.textBackgroundColor&&this._removeShadow(i),h&&h.deltaY&&(c+=h.deltaY),d&&i.fillText(s,a-l.offsetX,c-l.offsetY),p&&i.strokeText(s,a-u.offsetX,c-u.offsetY),i.restore())},setSuperscript:function(e,i){return this._setScript(e,i,this.superscript)},setSubscript:function(e,i){return this._setScript(e,i,this.subscript)},_setScript:function(e,i,r){var o=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"fontSize"),a=this.getValueOfPropertyAt(o.lineIndex,o.charIndex,"deltaY"),c={fontSize:s*r.size,deltaY:a+s*r.baseline};return this.setSelectionStyles(c,e,i),this},_getLineLeftOffset:function(e){var i=this.getLineWidth(e),r=this.width-i,o=this.textAlign,s=this.direction,a=0,c=this.isEndOfWrapping(e);return"justify"!==o&&("justify-center"!==o||c)&&("justify-right"!==o||c)&&("justify-left"!==o||c)?("center"===o&&(a=r/2),"right"===o&&(a=r),"justify-center"===o&&(a=r/2),"justify-right"===o&&(a=r),"rtl"===s&&(a-=r),a):0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return e||(e=this.hasStateChanged("_dimensionAffectingProps")),e&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){if(void 0!==this.__lineWidths[e])return this.__lineWidths[e];var i=this.measureLine(e).width;return this.__lineWidths[e]=i,i},_getWidthOfCharSpacing:function(){ if(this.fontFamily=='Daisy') return 0; return 0===this.charSpacing?0:this.fontSize*this.charSpacing/1e3},getValueOfPropertyAt:function(e,i,r){var o=this._getStyleDeclaration(e,i);return o&&void 0!==o[r]?o[r]:this[r]},_renderTextDecoration:function(e,i){if(this[i]||this.styleHas(i)){for(var r,o,s,a,c,l,u,h,f,d,p,g,v,m,$,y,b=this._getLeftOffset(),x=this._getTopOffset(),C=this.path,_=this._getWidthOfCharSpacing(),w=this.offsets[i],S=0,T=this._textLines.length;S<T;S++)if(r=this.getHeightOfLine(S),this[i]||this.styleHas(i,S)){u=this._textLines[S],m=r/this.lineHeight,a=this._getLineLeftOffset(S),d=0,p=0,h=this.getValueOfPropertyAt(S,0,i),y=this.getValueOfPropertyAt(S,0,"fill"),f=x+m*(1-this._fontSizeFraction),o=this.getHeightOfChar(S,0),c=this.getValueOfPropertyAt(S,0,"deltaY");for(var O=0,k=u.length;O<k;O++)if(g=this.__charBounds[S][O],v=this.getValueOfPropertyAt(S,O,i),$=this.getValueOfPropertyAt(S,O,"fill"),s=this.getHeightOfChar(S,O),l=this.getValueOfPropertyAt(S,O,"deltaY"),C&&v&&$)e.save(),e.fillStyle=y,e.translate(g.renderLeft,g.renderTop),e.rotate(g.angle),e.fillRect(-g.kernedWidth/2,w*s+l,g.kernedWidth,this.fontSize/15),e.restore();else if((v!==h||$!==y||s!==o||l!==c)&&0<p){var P=b+a+d;"rtl"===this.direction&&(P=this.width-P-p),h&&y&&(e.fillStyle=y,e.fillRect(P,f+w*o+c,p,this.fontSize/15)),d=g.left,p=g.width,h=v,y=$,o=s,c=l}else p+=g.kernedWidth;P=b+a+d,"rtl"===this.direction&&(P=this.width-P-p),e.fillStyle=$,v&&$&&e.fillRect(P,f+w*o+c,p-_,this.fontSize/15),x+=r}else x+=r;this._removeShadow(e)}},_getFontDeclaration:function(e,r){var o=e||this,s=this.fontFamily,a=-1<i.Text.genericFonts.indexOf(s.toLowerCase()),c=void 0===s||-1<s.indexOf("'")||-1<s.indexOf(",")||-1<s.indexOf('"')||a?o.fontFamily:'"'+o.fontFamily+'"';return[i.isLikelyNode?o.fontWeight:o.fontStyle,i.isLikelyNode?o.fontStyle:o.fontWeight,r?this.CACHE_FONT_SIZE+"px":o.fontSize+"px",c].join(" ")},render:function(e){this.visible&&(!this.canvas||!this.canvas.skipOffscreen||this.group||this.isOnScreen())&&(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e))},_splitTextIntoLines:function(e){for(var r=e.split(this._reNewline),o=Array(r.length),s=["\n"],a=[],c=0;c<r.length;c++)o[c]=i.util.string.graphemeSplit(r[c]),a=a.concat(o[c],s);return a.pop(),{_unwrappedLines:o,lines:r,graphemeText:a,graphemeLines:o}},toObject:function(e){var r=o.concat(e),s=this.callSuper("toObject",r);return s.styles=i.util.stylesToArray(this.styles,this.text),s.path&&(s.path=this.path.toObject()),s},set:function(e,i){this.callSuper("set",e,i);var r=!1,o=!1;if("object"===u(e))for(var s in e)"path"==s&&this.setPathInfo(),r=r||-1!==this._dimensionAffectingProps.indexOf(s),o=o||"path"==s;else r=-1!==this._dimensionAffectingProps.indexOf(e),o="path"===e;return o&&this.setPathInfo(),r&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor"]),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(e,o,s){if(!e)return o(null);var a=i.parseAttributes(e,i.Text.ATTRIBUTE_NAMES),c=a.textAnchor||"left";if((s=i.util.object.extend(s?r(s):{},a)).top=s.top||0,s.left=s.left||0,a.textDecoration){var l=a.textDecoration;-1!==l.indexOf("underline")&&(s.underline=!0),-1!==l.indexOf("overline")&&(s.overline=!0),-1!==l.indexOf("line-through")&&(s.linethrough=!0),delete s.textDecoration}"dx"in a&&(s.left+=a.dx),"dy"in a&&(s.top+=a.dy),"fontSize"in s||(s.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var u="";"textContent"in e?u=e.textContent:"firstChild"in e&&null!==e.firstChild&&"data"in e.firstChild&&null!==e.firstChild.data&&(u=e.firstChild.data),u=u.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var h=s.strokeWidth;s.strokeWidth=0;var f=new i.Text(u,s),d=f.getScaledHeight()/f.height,p=(f.height+f.strokeWidth)*f.lineHeight-f.height,g=f.getScaledHeight()+p*d,v=0;"center"===c&&(v=f.getScaledWidth()/2),"right"===c&&(v=f.getScaledWidth()),f.set({left:f.left-v,top:f.top-(g-f.fontSize*(.07+f._fontSizeFraction))/f.lineHeight,strokeWidth:void 0===h?1:h}),o(f)},i.Text.fromObject=function(e,o){var s=r(e),a=e.path;return delete s.path,i.Object._fromObject("Text",s,function(r){r.styles=i.util.stylesFromArray(e.styles,e.text),a?i.Object._fromObject("Path",a,function(e){r.set("path",e),o(r)},"path"):o(r)},"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}}(i),ni.util.object.extend(ni.Text.prototype,{isEmptyStyles:function(e){if(!this.styles||void 0!==e&&!this.styles[e])return!0;var i=void 0===e?this.styles:{line:this.styles[e]};for(var r in i)for(var o in i[r])for(var s in i[r][o])return!1;return!0},styleHas:function(e,i){if(!this.styles||!e||""===e||void 0!==i&&!this.styles[i])return!1;var r=void 0===i?this.styles:{0:this.styles[i]};for(var o in r)for(var s in r[o])if(void 0!==r[o][s][e])return!0;return!1},cleanStyle:function(e){if(!this.styles||!e||""===e)return!1;var i,r,o,s=this.styles,a=0,c=!0,l=0;for(var u in s){for(var h in r=0,s[u])a++,(i=s[u][h]).hasOwnProperty(e)?(o?i[e]!==o&&(c=!1):o=i[e],i[e]===this[e]&&delete i[e]):c=!1,0===Object.keys(i).length?delete s[u][h]:r++;0===r&&delete s[u]}for(var f=0;f<this._textLines.length;f++)l+=this._textLines[f].length;c&&a===l&&(this[e]=o,this.removeStyle(e))},removeStyle:function(e){if(this.styles&&e&&""!==e){var i,r,o,s=this.styles;for(r in s){for(o in i=s[r])delete i[o][e],0===Object.keys(i[o]).length&&delete i[o];0===Object.keys(i).length&&delete s[r]}}},_extendStyles:function(e,i){var r=this.get2DCursorLocation(e);this._getLineStyle(r.lineIndex)||this._setLineStyle(r.lineIndex),this._getStyleDeclaration(r.lineIndex,r.charIndex)||this._setStyleDeclaration(r.lineIndex,r.charIndex,{}),ni.util.object.extend(this._getStyleDeclaration(r.lineIndex,r.charIndex),i)},get2DCursorLocation:function(e,i){void 0===e&&(e=this.selectionStart);for(var r=i?this._unwrappedTextLines:this._textLines,o=r.length,s=0;s<o;s++){if(e<=r[s].length)return{lineIndex:s,charIndex:e};e-=r[s].length+this.missingNewlineOffset(s)}return{lineIndex:s-1,charIndex:r[s-1].length<e?r[s-1].length:e}},getSelectionStyles:function(e,i,r){void 0===e&&(e=this.selectionStart||0),void 0===i&&(i=this.selectionEnd||e);for(var o=[],s=e;s<i;s++)o.push(this.getStyleAtPosition(s,r));return o},getStyleAtPosition:function(e,i){var r=this.get2DCursorLocation(e);return(i?this.getCompleteStyleDeclaration(r.lineIndex,r.charIndex):this._getStyleDeclaration(r.lineIndex,r.charIndex))||{}},setSelectionStyles:function(e,i,r){void 0===i&&(i=this.selectionStart||0),void 0===r&&(r=this.selectionEnd||i);for(var o=i;o<r;o++)this._extendStyles(o,e);return this._forceClearCache=!0,this},_getStyleDeclaration:function(e,i){var r=this.styles&&this.styles[e];return r?r[i]:null},getCompleteStyleDeclaration:function(e,i){for(var r,o=this._getStyleDeclaration(e,i)||{},s={},a=0;a<this._styleProperties.length;a++)s[r=this._styleProperties[a]]=void 0===o[r]?this[r]:o[r];return s},_setStyleDeclaration:function(e,i,r){this.styles[e][i]=r},_deleteStyleDeclaration:function(e,i){delete this.styles[e][i]},_getLineStyle:function(e){return!!this.styles[e]},_setLineStyle:function(e){this.styles[e]={}},_deleteLineStyle:function(e){delete this.styles[e]}}),function(){function e(e){e.textDecoration&&(-1<e.textDecoration.indexOf("underline")&&(e.underline=!0),-1<e.textDecoration.indexOf("line-through")&&(e.linethrough=!0),-1<e.textDecoration.indexOf("overline")&&(e.overline=!0),delete e.textDecoration)}ni.IText=ni.util.createClass(ni.Text,ni.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(e,i){this.callSuper("initialize",e,i),this.initBehavior()},setSelectionStart:function(e){e=s(e,0),this._updateAndFire("selectionStart",e)},setSelectionEnd:function(e){e=a(e,this.text.length),this._updateAndFire("selectionEnd",e)},_updateAndFire:function(e,i){this[e]!==i&&(this._fireSelectionChanged(),this[e]=i),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(e){this.clearContextTop(),this.callSuper("render",e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(e){this.callSuper("_render",e)},clearContextTop:function(e){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var i=this.canvas.contextTop,r=this.canvas.viewportTransform;i.save(),i.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(i),this._clearTextArea(i),e||i.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this._getCursorBoundaries(),i=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(e,i):this.renderSelection(e,i),i.restore()}},_clearTextArea:function(e){var i=this.width+4,r=this.height+4;e.clearRect(-i/2,-r/2,i,r)},_getCursorBoundaries:function(e){void 0===e&&(e=this.selectionStart);var i=this._getLeftOffset(),r=this._getTopOffset(),o=this._getCursorBoundariesOffsets(e);return{left:i,top:r,leftOffset:o.left,topOffset:o.top}},_getCursorBoundariesOffsets:function(e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var i,r,o,s,a=0,c=0,l=this.get2DCursorLocation(e);o=l.charIndex,r=l.lineIndex;for(var u=0;u<r;u++)a+=this.getHeightOfLine(u);i=this._getLineLeftOffset(r);var h=this.__charBounds[r][o];return h&&(c=h.left),0!==this.charSpacing&&o===this._textLines[r].length&&(c-=this._getWidthOfCharSpacing()),s={top:a,left:i+(0<c?c:0)},"rtl"===this.direction&&(s.left*=-1),this.cursorOffsetCache=s,this.cursorOffsetCache},renderCursor:function(e,i){var r=this.get2DCursorLocation(),o=r.lineIndex,s=0<r.charIndex?r.charIndex-1:0,a=this.getValueOfPropertyAt(o,s,"fontSize"),c=this.scaleX*this.canvas.getZoom(),l=this.cursorWidth/c,u=e.topOffset,h=this.getValueOfPropertyAt(o,s,"deltaY");u+=(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-a*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(e,i),i.fillStyle=this.cursorColor||this.getValueOfPropertyAt(o,s,"fill"),i.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,i.fillRect(e.left+e.leftOffset-l/2,u+e.top+h,l,a)},renderSelection:function(e,i){for(var r=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,o=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,s=-1!==this.textAlign.indexOf("justify"),a=this.get2DCursorLocation(r),c=this.get2DCursorLocation(o),l=a.lineIndex,u=c.lineIndex,h=0>a.charIndex?0:a.charIndex,f=0>c.charIndex?0:c.charIndex,d=l;d<=u;d++){var p,g=this._getLineLeftOffset(d)||0,v=this.getHeightOfLine(d),m=0,$=0;if(d===l&&(m=this.__charBounds[l][h].left),d>=l&&d<u)$=s&&!this.isEndOfWrapping(d)?this.width:this.getLineWidth(d)||5;else if(d===u){if(0===f)$=this.__charBounds[u][f].left;else{var y=this._getWidthOfCharSpacing();$=this.__charBounds[u][f-1].left+this.__charBounds[u][f-1].width-y}}p=v,(1>this.lineHeight||d===u&&1<this.lineHeight)&&(v/=this.lineHeight);var b=e.left+g+m,x=$-m,C=v,_=0;this.inCompositionMode?(i.fillStyle=this.compositionColor||"black",C=1,_=v):i.fillStyle=this.selectionColor,"rtl"===this.direction&&(b=this.width-b-x),i.fillRect(b,e.top+e.topOffset+_,x,C),e.topOffset+=p}},getCurrentCharFontSize:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")},getCurrentCharColor:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fill")},_getCurrentCharIndex:function(){var e=this.get2DCursorLocation(this.selectionStart,!0),i=0<e.charIndex?e.charIndex-1:0;return{l:e.lineIndex,c:i}}}),ni.IText.fromObject=function(i,r){var o=ni.util.stylesFromArray(i.styles,i.text),s=Object.assign({},i,{styles:o});if(e(s),s.styles)for(var a in s.styles)for(var c in s.styles[a])e(s.styles[a][c]);ni.Object._fromObject("IText",s,r,"text")}}(),e4=ni.util.object.clone,ni.util.object.extend(ni.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var e=this;this.on("added",function(){var i=e.canvas;i&&(i._hasITextHandlers||(i._hasITextHandlers=!0,e._initCanvasHandlers(i)),i._iTextInstances=i._iTextInstances||[],i._iTextInstances.push(e))})},initRemovedHandler:function(){var e=this;this.on("removed",function(){var i=e.canvas;i&&(i._iTextInstances=i._iTextInstances||[],ni.util.removeFromArray(i._iTextInstances,e),0===i._iTextInstances.length&&(i._hasITextHandlers=!1,e._removeCanvasHandlers(i)))})},_initCanvasHandlers:function(e){e._mouseUpITextHandler=function(){e._iTextInstances&&e._iTextInstances.forEach(function(e){e.__isMousedown=!1})},e.on("mouse:up",e._mouseUpITextHandler)},_removeCanvasHandlers:function(e){e.off("mouse:up",e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(e,i,r,o){var s;return s={isAborted:!1,abort:function(){this.isAborted=!0}},e.animate("_currentCursorOpacity",i,{duration:r,onComplete:function(){s.isAborted||e[o]()},onChange:function(){e.canvas&&e.selectionStart===e.selectionEnd&&e.renderCursorOrSelection()},abort:function(){return s.isAborted}}),s},_onTickComplete:function(){var e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){e._currentTickCompleteState=e._animateCursor(e,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(e){var i=this,r=e?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){i._tick()},r)},abortCursorAnimation:function(){var e=this._currentTickState||this._currentTickCompleteState,i=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,e&&i&&i.clearContext(i.contextTop||i.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(e){var i=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)i++,r--;for(;/\S/.test(this._text[r])&&-1<r;)i++,r--;return e-i},findWordBoundaryRight:function(e){var i=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)i++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)i++,r++;return e+i},findLineBoundaryLeft:function(e){for(var i=0,r=e-1;!/\n/.test(this._text[r])&&-1<r;)i++,r--;return e-i},findLineBoundaryRight:function(e){for(var i=0,r=e;!/\n/.test(this._text[r])&&r<this._text.length;)i++,r++;return e+i},searchWordBoundary:function(e,i){for(var r=this._text,o=this._reSpace.test(r[e])?e-1:e,s=r[o],a=ni.reNonWord;!a.test(s)&&0<o&&o<r.length;)s=r[o+=i];return a.test(s)&&(o+=1===i?0:1),o},selectWord:function(e){e=e||this.selectionStart;var i=this.searchWordBoundary(e,-1),r=this.searchWordBoundary(e,1);this.selectionStart=i,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(e){e=e||this.selectionStart;var i=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=i,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(e){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(e),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll()),this},exitEditingOnOthers:function(e){e._iTextInstances&&e._iTextInstances.forEach(function(e){e.selected=!1,e.isEditing&&e.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(e){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var i=this.getSelectionStartFromPointer(e.e),r=this.selectionStart,o=this.selectionEnd;(i!==this.__selectionStartOnMouseDown||r===o)&&(r===i||o===i)||(i>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=i):(this.selectionStart=i,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==r||this.selectionEnd!==o)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(e,i,r){var o=r.slice(0,e),s=ni.util.string.graphemeSplit(o).length;if(e===i)return{selectionStart:s,selectionEnd:s};var a=r.slice(e,i);return{selectionStart:s,selectionEnd:s+ni.util.string.graphemeSplit(a).length}},fromGraphemeToStringSelection:function(e,i,r){var o=r.slice(0,e).join("").length;return e===i?{selectionStart:o,selectionEnd:o}:{selectionStart:o,selectionEnd:o+r.slice(e,i).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var e=this.inCompositionMode?this.compositionStart:this.selectionStart,i=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),o=r.lineIndex,s=r.charIndex,a=this.getValueOfPropertyAt(o,s,"fontSize")*this.lineHeight,c=i.leftOffset,l=this.calcTransformMatrix(),u={x:i.left+c,y:i.top+i.topOffset+a},h=this.canvas.getRetinaScaling(),f=this.canvas.upperCanvasEl,d=f.width/h,p=f.height/h,g=d-a,v=p-a,m=f.clientWidth/d,$=f.clientHeight/p;return u=ni.util.transformPoint(u,l),(u=ni.util.transformPoint(u,this.canvas.viewportTransform)).x*=m,u.y*=$,0>u.x&&(u.x=0),u.x>g&&(u.x=g),0>u.y&&(u.y=0),u.y>v&&(u.y=v),u.x+=this.canvas._offset.left,u.y+=this.canvas._offset.top,{left:u.x+"px",top:u.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var e=this._textBeforeEdit!==this.text,i=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,i&&(i.blur&&i.blur(),i.parentNode&&i.parentNode.removeChild(i)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var e in this.styles)this._textLines[e]||delete this.styles[e]},removeStyleFromTo:function(e,i){var r,o,s,a,c=this.get2DCursorLocation(e,!0),l=this.get2DCursorLocation(i,!0),u=c.lineIndex,h=c.charIndex,f=l.lineIndex,d=l.charIndex;if(u!==f){if(this.styles[u])for(s=h;s<this._unwrappedTextLines[u].length;s++)delete this.styles[u][s];if(this.styles[f])for(s=d;s<this._unwrappedTextLines[f].length;s++)(a=this.styles[f][s])&&(this.styles[u]||(this.styles[u]={}),this.styles[u][h+s-d]=a);for(s=u+1;s<=f;s++)delete this.styles[s];this.shiftLineStyles(f,u-f)}else if(this.styles[u]){for(a=this.styles[u],s=h;s<d;s++)delete a[s];for(o in this.styles[u])(r=parseInt(o,10))>=d&&(a[r-(d-h)]=a[o],delete a[o])}},shiftLineStyles:function(e,i){var r=e4(this.styles);for(var o in this.styles){var s=parseInt(o,10);s>e&&(this.styles[s+i]=r[s],r[s-i]||delete this.styles[s])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(e,i,r,o){var s,a={},c=!1,l=this._unwrappedTextLines[e].length===i;for(var u in r||(r=1),this.shiftLineStyles(e,r),this.styles[e]&&(s=this.styles[e][0===i?i:i-1]),this.styles[e]){var h=parseInt(u,10);h>=i&&(c=!0,a[h-i]=this.styles[e][u],l&&0===i||delete this.styles[e][u])}var f=!1;for(c&&!l&&(this.styles[e+r]=a,f=!0),f&&r--;0<r;)o&&o[r-1]?this.styles[e+r]={0:e4(o[r-1])}:s?this.styles[e+r]={0:e4(s)}:delete this.styles[e+r],r--;this._forceClearCache=!0},insertCharStyleObject:function(e,i,r,o){this.styles||(this.styles={});var s=this.styles[e],a=s?e4(s):{};for(var c in r||(r=1),a){var l=parseInt(c,10);l>=i&&(s[l+r]=a[l],a[l-r]||delete s[l])}if(this._forceClearCache=!0,o)for(;r--;)Object.keys(o[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][i+r]=e4(o[r]));else if(s)for(var u=s[i?i-1:1];u&&r--;)this.styles[e][i+r]=e4(u)},insertNewStyleBlock:function(e,i,r){for(var o=this.get2DCursorLocation(i,!0),s=[0],a=0,c=0;c<e.length;c++)"\n"===e[c]?s[++a]=0:s[a]++;for(0<s[0]&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+s[0],a),c=1;c<a;c++)0<s[c]?this.insertCharStyleObject(o.lineIndex+c,0,s[c],r):r&&this.styles[o.lineIndex+c]&&r[0]&&(this.styles[o.lineIndex+c][0]=r[0]),r=r&&r.slice(s[c]+1);0<s[c]&&this.insertCharStyleObject(o.lineIndex+c,0,s[c],r)},setSelectionStartEndWithShift:function(e,i,r){r<=e?(i===e?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=e),this.selectionStart=r):r>e&&r<i?"right"===this._selectionDirection?this.selectionEnd=r:this.selectionStart=r:(i===e?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=i),this.selectionEnd=r)},setSelectionInBoundaries:function(){var e=this.text.length;this.selectionStart>e?this.selectionStart=e:0>this.selectionStart&&(this.selectionStart=0),this.selectionEnd>e?this.selectionEnd=e:0>this.selectionEnd&&(this.selectionEnd=0)}}),ni.util.object.extend(ni.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(e){if(this.canvas){this.__newClickTime=+new Date;var i=e.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",e),this._stopEvent(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(e){return 500>this.__newClickTime-this.__lastClickTime&&500>this.__lastClickTime-this.__lastLastClickTime&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y},_stopEvent:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))},tripleClickHandler:function(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(e){this.canvas&&this.editable&&(!e.e.button||1===e.e.button)&&(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(e){this.canvas&&this.editable&&(!e.e.button||1===e.e.button)&&(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(e){if(this.__isMousedown=!1,!(!this.editable||this.group||e.transform&&e.transform.actionPerformed||e.e.button&&1!==e.e.button)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(e){var i=this.getSelectionStartFromPointer(e),r=this.selectionStart,o=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,o,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(e){for(var i,r=this.getLocalPointer(e),o=0,s=0,a=0,c=0,l=0,u=0,h=this._textLines.length;u<h&&a<=r.y;u++)a+=this.getHeightOfLine(u)*this.scaleY,l=u,0<u&&(c+=this._textLines[u-1].length+this.missingNewlineOffset(u-1));s=this._getLineLeftOffset(l)*this.scaleX,i=this._textLines[l],"rtl"===this.direction&&(r.x=this.width*this.scaleX-r.x+s);for(var f=0,d=i.length;f<d&&(o=s,(s+=this.__charBounds[l][f].kernedWidth*this.scaleX)<=r.x);f++)c++;return this._getNewSelectionStartFromOffset(r,o,s,c,d)},_getNewSelectionStartFromOffset:function(e,i,r,o,s){var a=e.x-i,c=r-e.x,l=o+(c>a||0>c?0:1);return this.flipX&&(l=s-l),l>this._text.length&&(l=this._text.length),l}}),ni.util.object.extend(ni.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=ni.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var e=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+e.top+"; left: "+e.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: "+e.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):ni.document.body.appendChild(this.hiddenTextarea),ni.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),ni.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),ni.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),ni.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),ni.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),ni.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),ni.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),ni.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),ni.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(ni.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(e){if(this.isEditing){var i="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in i)this[i[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),33<=e.keyCode&&40>=e.keyCode?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(e){var i=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),this.isEditing){var r,o,s,a,c,l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,h=l.length,f=h-u,d=this.selectionStart,p=this.selectionEnd,g=d!==p;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var v=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),m=d>v.selectionStart;g?(r=this._text.slice(d,p),f+=p-d):h<u&&(r=m?this._text.slice(p+f,p):this._text.slice(d,d-f)),o=l.slice(v.selectionEnd-f,v.selectionEnd),r&&r.length&&(o.length&&(s=this.getSelectionStyles(d,d+1,!1),s=o.map(function(){return s[0]})),g?(a=d,c=p):m?(a=p-r.length,c=p):(a=p,c=p+r.length),this.removeStyleFromTo(a,c)),o.length&&(i&&o.join("")===ni.copiedText&&!ni.disableStyleCopyPaste&&(s=ni.copiedTextStyle),this.insertNewStyleBlock(o,d,s)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(e){this.compositionStart=e.target.selectionStart,this.compositionEnd=e.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart===this.selectionEnd||(ni.copiedText=this.getSelectedText(),ni.copiedTextStyle=ni.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(e){return e&&e.clipboardData||ni.window.clipboardData},_getWidthBeforeCursor:function(e,i){var r,o=this._getLineLeftOffset(e);return 0<i&&(o+=(r=this.__charBounds[e][i-1]).left+r.width),o},getDownCursorOffset:function(e,i){var r=this._getSelectionForOffset(e,i),o=this.get2DCursorLocation(r),s=o.lineIndex;if(s===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-r;var a=o.charIndex,c=this._getWidthBeforeCursor(s,a),l=this._getIndexOnLine(s+1,c);return this._textLines[s].slice(a).length+l+1+this.missingNewlineOffset(s)},_getSelectionForOffset:function(e,i){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(e,i){var r=this._getSelectionForOffset(e,i),o=this.get2DCursorLocation(r),s=o.lineIndex;if(0===s||e.metaKey||33===e.keyCode)return-r;var a=o.charIndex,c=this._getWidthBeforeCursor(s,a),l=this._getIndexOnLine(s-1,c),u=this._textLines[s].slice(0,a),h=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+l-u.length+(1-h)},_getIndexOnLine:function(e,i){for(var r,s,a=this._textLines[e],c=this._getLineLeftOffset(e),l=0,u=0,h=a.length;u<h;u++)if((c+=r=this.__charBounds[e][u].width)>i){s=!0;var f=c,d=o(c-r-i);l=o(f-i)<d?u:u-1;break}return s||(l=a.length-1),l},moveCursorDown:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)},moveCursorUp:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)},_moveCursorUpOrDown:function(e,i){var r=this["get"+e+"CursorOffset"](i,"right"===this._selectionDirection);i.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),0!==r&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(e){var i="left"===this._selectionDirection?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),0!==e},moveCursorWithoutShift:function(e){return 0>e?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e},moveCursorLeft:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)},_move:function(e,i,r){var o;if(e.altKey)o=this["findWordBoundary"+r](this[i]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[i]+="Left"===r?-1:1,!0;o=this["findLineBoundary"+r](this[i])}return void 0!==o&&this[i]!==o?(this[i]=o,!0):void 0},_moveLeft:function(e,i){return this._move(e,i,"Left")},_moveRight:function(e,i){return this._move(e,i,"Right")},moveCursorLeftWithoutShift:function(e){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(i=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(e){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0===this.selectionStart?void 0:(this._selectionDirection="left",this._moveLeft(e,"selectionStart"))},moveCursorRight:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)},_moveCursorLeftOrRight:function(e,i){var r="moveCursor"+e+"With";this._currentCursorOpacity=1,this[r+=i.shiftKey?"Shift":"outShift"](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(e){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd===this._text.length?void 0:(this._selectionDirection="right",this._moveRight(e,"selectionEnd"))},moveCursorRightWithoutShift:function(e){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(e,i){void 0===i&&(i=e+1),this.removeStyleFromTo(e,i),this._text.splice(e,i-e),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(e,i,r,o){void 0===o&&(o=r),o>r&&this.removeStyleFromTo(r,o);var s=ni.util.string.graphemeSplit(e);this.insertNewStyleBlock(s,r,i),this._text=[].concat(this._text.slice(0,r),s,this._text.slice(o)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),eG=ni.util.toFixed,e6=/  +/g,ni.util.object.extend(ni.Text.prototype,{_toSVG:function(){var e=this._getSVGLeftTopOffsets(),i=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(i)},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(e){var i=this.getSvgTextDecoration(this);return[e.textBgRects.join(""),'       <text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",i?'text-decoration="'+i+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.textSpans.join(""),"</text>\n",]},_getSVGTextAndBg:function(e,i){var r,o=[],s=[],a=e;this._setSVGBg(s);for(var c=0,l=this._textLines.length;c<l;c++)r=this._getLineLeftOffset(c),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(s,c,i+r,a),this._setSVGTextLineText(o,c,i+r,a),a+=this.getHeightOfLine(c);return{textSpans:o,textBgRects:s}},_createTextCharSpan:function(e,i,r,o){var s=e!==e.trim()||e.match(e6),a=this.getSvgSpanStyles(i,s),c=i.deltaY,l="",u=ni.Object.NUM_FRACTION_DIGITS;return c&&(l=' dy="'+eG(c,u)+'" '),['<tspan x="',eG(r,u),'" y="',eG(o,u),'" ',l,a?'style="'+a+'"':"",">",ni.util.string.escapeXml(e),"</tspan>"].join("")},_setSVGTextLineText:function(e,i,r,o){var s,a,c,l,u,h=this.getHeightOfLine(i),f=-1!==this.textAlign.indexOf("justify"),d="",p=0,g=this._textLines[i];o+=h*(1-this._fontSizeFraction)/this.lineHeight;for(var v=0,m=g.length-1;v<=m;v++)u=v===m||this.charSpacing,d+=g[v],c=this.__charBounds[i][v],0===p?(r+=c.kernedWidth-c.width,p+=c.width):p+=c.kernedWidth,f&&!u&&this._reSpaceAndTab.test(g[v])&&(u=!0),u||(s=s||this.getCompleteStyleDeclaration(i,v),a=this.getCompleteStyleDeclaration(i,v+1),u=ni.util.hasStyleChanged(s,a,!0)),u&&(l=this._getStyleDeclaration(i,v)||{},e.push(this._createTextCharSpan(d,l,r,o)),d="",s=a,r+=p,p=0)},_pushTextBgRect:function(e,i,r,o,s,a){var c=ni.Object.NUM_FRACTION_DIGITS;e.push("        <rect ",this._getFillAttributes(i),' x="',eG(r,c),'" y="',eG(o,c),'" width="',eG(s,c),'" height="',eG(a,c),'"></rect>\n')},_setSVGTextLineBg:function(e,i,r,o){for(var s,a,c=this._textLines[i],l=this.getHeightOfLine(i)/this.lineHeight,u=0,h=0,f=this.getValueOfPropertyAt(i,0,"textBackgroundColor"),d=0,p=c.length;d<p;d++)s=this.__charBounds[i][d],(a=this.getValueOfPropertyAt(i,d,"textBackgroundColor"))===f?u+=s.kernedWidth:(f&&this._pushTextBgRect(e,f,r+h,o,u,l),h=s.left,u=s.width,f=a);a&&this._pushTextBgRect(e,a,r+h,o,u,l)},_getFillAttributes:function(e){var i=e&&"string"==typeof e?new ni.Color(e):"";return i&&i.getSource()&&1!==i.getAlpha()?'opacity="'+i.getAlpha()+'" fill="'+i.setAlpha(1).toRgb()+'"':'fill="'+e+'"'},_getSVGLineTopOffset:function(e){for(var i,r=0,o=0;o<e;o++)r+=this.getHeightOfLine(o);return i=this.getHeightOfLine(o),{lineTop:r,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(e){return ni.Object.prototype.getSvgStyles.call(this,e)+" white-space: pre;"}}),(e5=(e7=i).fabric||(e7.fabric={})).Textbox=e5.util.createClass(e5.IText,e5.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e5.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(e){for(var i=0,r=0,o=0,s={},a=0;a<e.graphemeLines.length;a++)"\n"===e.graphemeText[o]&&0<a?(r=0,o++,i++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[o])&&0<a&&(r++,o++),s[a]={line:i,offset:r},o+=e.graphemeLines[a].length,r+=e.graphemeLines[a].length;return s},styleHas:function(e,i){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[i];r&&(i=r.line)}return e5.Text.prototype.styleHas.call(this,e,i)},isEmptyStyles:function(e){if(!this.styles)return!0;var i,r,o=0,s=!1,a=this._styleMap[e],c=this._styleMap[e+1];for(var l in a&&(e=a.line,o=a.offset),c&&(s=c.line===e,i=c.offset),r=void 0===e?this.styles:{line:this.styles[e]})for(var u in r[l])if(u>=o&&(!s||u<i))for(var h in r[l][u])return!1;return!0},_getStyleDeclaration:function(e,i){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[e];if(!r)return null;e=r.line,i=r.offset+i}return this.callSuper("_getStyleDeclaration",e,i)},_setStyleDeclaration:function(e,i,r){var o=this._styleMap[e];e=o.line,i=o.offset+i,this.styles[e][i]=r},_deleteStyleDeclaration:function(e,i){var r=this._styleMap[e];e=r.line,i=r.offset+i,delete this.styles[e][i]},_getLineStyle:function(e){var i=this._styleMap[e];return!!this.styles[i.line]},_setLineStyle:function(e){var i=this._styleMap[e];this.styles[i.line]={}},_wrapText:function(e,i){var r,o=[];for(this.isWrapping=!0,r=0;r<e.length;r++)o=o.concat(this._wrapLine(e[r],r,i));return this.isWrapping=!1,o},_measureWord:function(e,i,r){var o,s=0;r=r||0;for(var a=0,c=e.length;a<c;a++)s+=this._getGraphemeBox(e[a],i,a+r,o,!0).kernedWidth,o=e[a];return s},_wrapLine:function(e,i,r,o){var s=0,a=this.splitByGrapheme,c=[],l=[],u=a?e5.util.string.graphemeSplit(e):e.split(this._wordJoiners),h="",f=0,d=a?"":" ",p=0,g=0,v=0,m=!0,$=this._getWidthOfCharSpacing();o=o||0,0===u.length&&u.push([]),r-=o;for(var y=0;y<u.length;y++)h=a?u[y]:e5.util.string.graphemeSplit(u[y]),p=this._measureWord(h,i,f),f+=h.length,(s+=g+p-$)>r&&!m?(c.push(l),l=[],s=p,m=!0):s+=$,m||a||l.push(d),l=l.concat(h),g=a?0:this._measureWord([d],i,f),f++,m=!1,p>v&&(v=p);return y&&c.push(l),v+o>this.dynamicMinWidth&&(this.dynamicMinWidth=v-$+o),c},isEndOfWrapping:function(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line},missingNewlineOffset:function(e){return this.splitByGrapheme?this.isEndOfWrapping(e)?1:0:1},_splitTextIntoLines:function(e){for(var i=e5.Text.prototype._splitTextIntoLines.call(this,e),r=this._wrapText(i.lines,this.width),o=Array(r.length),s=0;s<r.length;s++)o[s]=r[s].join("");return i.lines=o,i.graphemeLines=r,i},getMinWidth:function(){return s(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var e={};for(var i in this._styleMap)this._textLines[i]&&(e[this._styleMap[i].line]=1);for(var i in this.styles)e[i]||delete this.styles[i]},toObject:function(e){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(e))}}),e5.Textbox.fromObject=function(e,i){var r=e5.util.stylesFromArray(e.styles,e.text),o=Object.assign({},e,{styles:r});return e5.Object._fromObject("Textbox",o,i,"text")},function(){var e=ni.controlsUtils,i=e.scaleSkewCursorStyleHandler,r=e.scaleCursorStyleHandler,o=e.scalingEqually,s=e.scalingYOrSkewingX,a=e.scalingXOrSkewingY,c=e.scaleOrSkewActionName,l=ni.Object.prototype.controls;if(l.ml=new ni.Control({x:-.5,y:0,cursorStyleHandler:i,actionHandler:a,getActionName:c}),l.mr=new ni.Control({x:.5,y:0,cursorStyleHandler:i,actionHandler:a,getActionName:c}),l.mb=new ni.Control({x:0,y:.5,cursorStyleHandler:i,actionHandler:s,getActionName:c}),l.mt=new ni.Control({x:0,y:-.5,cursorStyleHandler:i,actionHandler:s,getActionName:c}),l.tl=new ni.Control({x:-.5,y:-.5,cursorStyleHandler:r,actionHandler:o}),l.tr=new ni.Control({x:.5,y:-.5,cursorStyleHandler:r,actionHandler:o}),l.bl=new ni.Control({x:-.5,y:.5,cursorStyleHandler:r,actionHandler:o}),l.br=new ni.Control({x:.5,y:.5,cursorStyleHandler:r,actionHandler:o}),l.mtr=new ni.Control({x:0,y:-.5,actionHandler:e.rotationWithSnapping,cursorStyleHandler:e.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),ni.Textbox){var u=ni.Textbox.prototype.controls={};u.mtr=l.mtr,u.tr=l.tr,u.br=l.br,u.tl=l.tl,u.bl=l.bl,u.mt=l.mt,u.mb=l.mb,u.mr=new ni.Control({x:.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:i,actionName:"resizing"}),u.ml=new ni.Control({x:-.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:i,actionName:"resizing"})}}()}).call(this,r(14).Buffer)},function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(){return this}();try{r=r||Function("return this")()}catch(o){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}e.exports=r},function(e,i,r){var o=Math.max;(function(s,a){var c,l,u;function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}u=function(){"use strict";function e(e){return null==e}function i(e){return null!=e}function r(e){return!0===e}function c(e){return"string"==typeof e||"number"==typeof e||"symbol"===h(e)||"boolean"==typeof e}function l(e){return"function"==typeof e}function u(e){return null!==e&&"object"===h(e)}function f(e){return ip.call(e).slice(8,-1)}function d(e){return"[object Object]"===ip.call(e)}function p(e){return"[object RegExp]"===ip.call(e)}function g(e){var i=parseFloat(e+"");return 0<=i&&Math.floor(i)===i&&isFinite(e)}function v(e){return i(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function m(e){return null==e?"":Array.isArray(e)||d(e)&&e.toString===ip?JSON.stringify(e,null,2):e+""}function $(e){var i=parseFloat(e);return isNaN(i)?e:i}function y(e,i){for(var r=Object.create(null),o=e.split(","),s=0;s<o.length;s++)r[o[s]]=!0;return i?function(e){return r[e.toLowerCase()]}:function(e){return r[e]}}function b(e,i){if(e.length){var r=e.indexOf(i);if(-1<r)return e.splice(r,1)}}function x(e,i){return im.call(e,i)}function C(e){var i=Object.create(null);return function(r){return i[r]||(i[r]=e(r))}}function _(e,i){i=i||0;for(var r=e.length-i,o=Array(r);r--;)o[r]=e[r+i];return o}function w(e,i){for(var r in i)e[r]=i[r];return e}function S(e){for(var i={},r=0;r<e.length;r++)e[r]&&w(i,e[r]);return i}function T(){}function O(e,i){if(e===i)return!0;var r=u(e),o=u(i);if(!r||!o)return!(r||o)&&e+""==i+"";try{var s=Array.isArray(e),a=Array.isArray(i);if(s&&a)return e.length===i.length&&e.every(function(e,r){return O(e,i[r])});if(e instanceof Date&&i instanceof Date)return e.getTime()===i.getTime();if(!s&&!a){var c=Object.keys(e),l=Object.keys(i);return c.length===l.length&&c.every(function(r){return O(e[r],i[r])})}return!1}catch(h){return!1}}function k(e,i){for(var r=0;r<e.length;r++)if(O(e[r],i))return r;return -1}function P(e){var i=!1;return function(){i||(i=!0,e.apply(this,arguments))}}function E(e,i){return e===i?0===e&&1/e!=1/i:e==e||i==i}function A(e){var i=(e+"").charCodeAt(0);return 36===i||95===i}function D(e,i,r,o){Object.defineProperty(e,i,{value:r,enumerable:!!o,writable:!0,configurable:!0})}function L(e){return"function"==typeof e&&/native code/.test(e.toString())}function j(e){void 0===e&&(e=null),!e&&iW&&iW._scope.off(),iW=e,e&&e._scope.on()}function I(e){return new iV(void 0,void 0,void 0,e+"")}function F(e){var i=new iV(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return i.ns=e.ns,i.isStatic=e.isStatic,i.key=e.key,i.isComment=e.isComment,i.fnContext=e.fnContext,i.fnOptions=e.fnOptions,i.fnScopeId=e.fnScopeId,i.asyncMeta=e.asyncMeta,i.isCloned=!0,i}function M(e){iQ.push(e),iJ.target=e}function R(){iQ.pop(),iJ.target=iQ[iQ.length-1]}function B(e){rs=e}function z(e,i,r){var o;if(!(!u(e)||K(e)||e instanceof iV))return x(e,"__ob__")&&e.__ob__ instanceof rc?o=e.__ob__:rs&&(r||!iU())&&(id(e)||d(e))&&Object.isExtensible(e)&&!e.__v_skip&&(o=new rc(e,i,r)),o}function U(e,i,r,o,s,a){var c=new iJ,l=Object.getOwnPropertyDescriptor(e,i);if(!l||!1!==l.configurable){var u=l&&l.get,h=l&&l.set;(!u||h)&&(r===ro||2===arguments.length)&&(r=e[i]);var f=!s&&z(r,!1,a);return Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:function(){var o=u?u.call(e):r;return iJ.target&&(c.depend({target:e,type:"get",key:i}),f&&(f.dep.depend(),id(o)&&function e(i){for(var r=void 0,o=0,s=i.length;o<s;o++)(r=i[o])&&r.__ob__&&r.__ob__.dep.depend(),id(r)&&e(r)}(o))),K(o)&&!s?o.value:o},set:function(l){var d=u?u.call(e):r;if(E(d,l)){if(o&&o(),h)h.call(e,l);else{if(u)return;if(!s&&K(d)&&!K(l))return void(d.value=l);r=l}f=!s&&z(l,!1,a),c.notify({type:"set",target:e,key:i,newValue:l,oldValue:d})}}}),c}}function Y(i,r,s){if((e(i)||c(i))&&os("Cannot set reactive property on undefined, null, or primitive value: ".concat(i)),!G(i)){var a=i.__ob__;return id(i)&&g(r)?(i.length=o(i.length,r),i.splice(r,1,s),a&&!a.shallow&&a.mock&&z(s,!1,!0),s):r in i&&!(r in Object.prototype)?(i[r]=s,s):i._isVue||a&&a.vmCount?(os("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),s):a?(U(a.value,r,s,void 0,a.shallow,a.mock),a.dep.notify({type:"add",target:i,key:r,newValue:s,oldValue:void 0}),s):(i[r]=s,s)}os('Set operation on key "'.concat(r,'" failed: target is readonly.'))}function N(i,r){if((e(i)||c(i))&&os("Cannot delete reactive property on undefined, null, or primitive value: ".concat(i)),!id(i)||!g(r)){var o=i.__ob__;return i._isVue||o&&o.vmCount?void os("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):G(i)?void os('Delete operation on key "'.concat(r,'" failed: target is readonly.')):void(x(i,r)&&(delete i[r],o&&o.dep.notify({type:"delete",target:i,key:r})))}i.splice(r,1)}function W(e){return V(e,!0),D(e,"__v_isShallow",!0),e}function V(e,i){if(!G(e)){id(e)&&os("Avoid using Array as root value for ".concat(i?"shallowReactive()":"reactive()"," as it cannot be tracked in watch() or watchEffect(). Use ").concat(i?"shallowRef()":"ref()"," instead. This is a Vue-2-only limitation."));var r=e&&e.__ob__;r&&r.shallow!==i&&os("Target is already a ".concat(r.shallow?"":"non-","shallow reactive object, and cannot be converted to ").concat(i?"":"non-","shallow.")),z(e,i,iU())||((null==e||c(e))&&os("value cannot be made reactive: ".concat(e+"")),q(e)&&os("Vue 2 does not support reactive collection types such as Map or Set."))}}function H(e){return G(e)?H(e.__v_raw):!(!e||!e.__ob__)}function X(e){return!(!e||!e.__v_isShallow)}function G(e){return!(!e||!e.__v_isReadonly)}function q(e){var i=f(e);return"Map"===i||"WeakMap"===i||"Set"===i||"WeakSet"===i}function K(e){return!(!e||!0!==e.__v_isRef)}function Z(e,i){if(K(e))return e;var r={};return D(r,rl,!0),D(r,"__v_isShallow",i),D(r,"dep",U(r,"value",e,null,i,iU())),r}function J(e,i,r){Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:function(){var e=i[r];if(K(e))return e.value;var o=e&&e.__ob__;return o&&o.dep.depend(),e},set:function(e){var o=i[r];K(o)&&!K(e)?o.value=e:i[r]=e}})}function Q(e,i,r){var o=e[i];if(K(o))return o;var s={get value(){var a=e[i];return void 0===a?r:a},set value(n){e[i]=n}};return D(s,rl,!0),s}function tt(e){return te(e,!1)}function te(e,i){if(!d(e))return id(e)?os("Vue 2 does not support readonly arrays."):q(e)?os("Vue 2 does not support readonly collection types such as Map or Set."):os("value cannot be made readonly: ".concat(h(e))),e;if(G(e))return e;var r=i?rh:ru,o=e[r];if(o)return o;var s=Object.create(Object.getPrototypeOf(e));D(e,r,s),D(s,"__v_isReadonly",!0),D(s,"__v_raw",e),K(e)&&D(s,rl,!0),(i||X(e))&&D(s,"__v_isShallow",!0);for(var a=Object.keys(e),c=0;c<a.length;c++)tn(s,e,a[c],i);return s}function tn(e,i,r,o){Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:function(){var e=i[r];return o||!d(e)?e:tt(e)},set:function(){os('Set operation on key "'.concat(r,'" failed: target is readonly.'))}})}function ti(e,i){function r(){var e=r.fns;if(!id(e))return tV(e,null,arguments,i,"v-on handler");for(var o=e.slice(),s=0;s<o.length;s++)tV(o[s],null,arguments,i,"v-on handler")}return r.fns=e,r}function tr(i,o,s,a,c,l){var u,h,f,d;for(u in i)h=i[u],f=o[u],d=rp(u),e(h)?os('Invalid handler for event "'.concat(d.name,'": got ')+(h+""),l):e(f)?(e(h.fns)&&(h=i[u]=ti(h,l)),r(d.once)&&(h=i[u]=c(d.name,h,d.capture)),s(d.name,h,d.capture,d.passive,d.params)):h!==f&&(f.fns=h,i[u]=f);for(u in o)e(i[u])&&a((d=rp(u)).name,o[u],d.capture)}function to(o,s,a){function c(){a.apply(this,arguments),b(l.fns,c)}o instanceof iV&&(o=o.data.hook||(o.data.hook={}));var l,u=o[s];e(u)?l=ti([c]):i(u.fns)&&r(u.merged)?(l=u).fns.push(c):l=ti([u,c]),l.merged=!0,o[s]=l}function ts(e,r,o,s,a){if(i(r)){if(x(r,o))return e[o]=r[o],a||delete r[o],!0;if(x(r,s))return e[o]=r[s],a||delete r[s],!0}return!1}function ta(o){return c(o)?[I(o)]:id(o)?function o(s,a){var l,u,h,f,d=[];for(l=0;l<s.length;l++)e(u=s[l])||"boolean"==typeof u||(f=d[h=d.length-1],id(u)?0<u.length&&(tc((u=o(u,"".concat(a||"","_").concat(l)))[0])&&tc(f)&&(d[h]=I(f.text+u[0].text),u.shift()),d.push.apply(d,u)):c(u)?tc(f)?d[h]=I(f.text+u):""!==u&&d.push(I(u)):tc(u)&&tc(f)?d[h]=I(f.text+u.text):(r(s._isVList)&&i(u.tag)&&e(u.key)&&i(a)&&(u.key="__vlist".concat(a,"_").concat(l,"__")),d.push(u)));return d}(o):void 0}function tc(e){var r;return i(e)&&i(e.text)&&!1===(r=e.isComment)}function tl(o,s,a,h,f,d){var p,g,v,m,$,y,b,x,C;return(id(a)||c(a))&&(f=h,h=a,a=void 0),r(d)&&(f=rv),p=o,g=s,v=a,m=h,$=f,i(v)&&i(v.__ob__)?(os("Avoid using observed data object as vnode data: ".concat(JSON.stringify(v),"\n")+"Always create fresh vnode data objects in each render!",p),iH()):(i(v)&&i(v.is)&&(g=v.is),g)?((i(v)&&i(v.key)&&!c(v.key)&&os("Avoid using non-primitive value as key, use string/number value instead.",p),id(m)&&l(m[0])&&((v=v||{}).scopedSlots={default:m[0]},m.length=0),$===rv?m=ta(m):$===rg&&(m=function(e){for(var i=0;i<e.length;i++)if(id(e[i]))return Array.prototype.concat.apply([],e);return e}(m)),"string"==typeof g)?(b=p.$vnode&&p.$vnode.ns||iO.getTagNamespace(g),iO.isReservedTag(g)?(i(v)&&i(v.nativeOn)&&"component"!==v.tag&&os("The .native modifier for v-on is only valid on components but it was used on <".concat(g,">."),p),y=new iV(iO.parsePlatformTagName(g),v,m,void 0,void 0,p)):y=v&&v.pre||!i(x=ep(p.$options,"components",g))?new iV(g,v,m,void 0,void 0,p):eo(x,v,p,m,g)):y=eo(g,v,p,m),id(y)?y:i(y)?(i(b)&&function o(s,a,c){if(s.ns=a,"foreignObject"===s.tag&&(a=void 0,c=!0),i(s.children))for(var l,u=0,h=s.children.length;u<h;u++)i((l=s.children[u]).tag)&&(e(l.ns)||r(c)&&"svg"!==l.tag)&&o(l,a,c)}(y,b),i(v)&&(C=v,u(C.style)&&t7(C.style),u(C.class)&&t7(C.class)),y):iH()):iH()}function tu(e,r){var o,s,a,c,l=null;if(id(e)||"string"==typeof e)for(l=Array(e.length),o=0,s=e.length;o<s;o++)l[o]=r(e[o],o);else if("number"==typeof e)for(l=Array(e),o=0;o<e;o++)l[o]=r(o+1,o);else if(u(e)){if(i9&&e[Symbol.iterator]){l=[];for(var h=e[Symbol.iterator](),f=h.next();!f.done;)l.push(r(f.value,l.length)),f=h.next()}else for(l=Array((a=Object.keys(e)).length),o=0,s=a.length;o<s;o++)c=a[o],l[o]=r(e[c],c,o)}return i(l)||(l=[]),l._isVList=!0,l}function th(e,i,r,o){var s,a=this.$scopedSlots[e];a?(r=r||{},o&&(u(o)||os("slot v-bind without argument expects an Object",this),r=w(w({},o),r)),s=a(r)||(l(i)?i():i)):s=this.$slots[e]||(l(i)?i():i);var c=r&&r.slot;return c?this.$createElement("template",{slot:c},s):s}function tf(e){return ep(this.$options,"filters",e,!0)||iw}function td(e,i){return id(e)?-1===e.indexOf(i):e!==i}function tp(e,i,r,o,s){var a=iO.keyCodes[i]||r;return s&&o&&!iO.keyCodes[i]?td(s,o):a?td(a,e):o?ix(o)!==i:void 0===e}function tg(e,i,r,o,s){if(r){if(u(r)){id(r)&&(r=S(r));var a=void 0,c=function(c){if("class"===c||"style"===c||iv(c))a=e;else{var l=e.attrs&&e.attrs.type;a=o||iO.mustUseProp(i,l,c)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var u=iy(c),h=ix(c);u in a||h in a||(a[c]=r[c],!s)||((e.on||(e.on={}))["update:".concat(c)]=function(e){r[c]=e})};for(var l in r)c(l)}else os("v-bind without argument expects an Object or Array value",this)}return e}function tv(e,i){var r=this._staticTrees||(this._staticTrees=[]),o=r[e];return o&&!i||t$(o=r[e]=this.$options.staticRenderFns[e].call(this._renderProxy,this._c,this),"__static__".concat(e),!1),o}function tm(e,i,r){return t$(e,"__once__".concat(i).concat(r?"_".concat(r):""),!0),e}function t$(e,i,r){if(id(e))for(var o=0;o<e.length;o++)e[o]&&"string"!=typeof e[o]&&ty(e[o],"".concat(i,"_").concat(o),r);else ty(e,i,r)}function ty(e,i,r){e.isStatic=!0,e.key=i,e.isOnce=r}function t8(e,i){if(i){if(d(i)){var r=e.on=e.on?w({},e.on):{};for(var o in i){var s=r[o],a=i[o];r[o]=s?[].concat(s,a):a}}else os("v-on without argument expects an Object value",this)}return e}function tb(e,i){for(var r,o=0;o<i.length;o+=2)"string"==typeof(r=i[o])&&r?e[i[o]]=i[o+1]:""!==r&&null!==r&&os("Invalid value for dynamic directive argument (expected string or null): ".concat(r),this);return e}function tx(e,i){return"string"==typeof e?i+e:e}function tC(e){e._o=tm,e._n=$,e._s=m,e._l=tu,e._t=th,e._q=O,e._i=k,e._m=tv,e._f=tf,e._k=tp,e._b=tg,e._v=I,e._e=iH,e._u=function e(i,r,o,s){r=r||{$stable:!o};for(var a,c=0;c<i.length;c++)id(a=i[c])?e(a,r,o):a&&(a.proxy&&(a.fn.proxy=!0),r[a.key]=a.fn);return s&&(r.$key=s),r},e._g=t8,e._d=tb,e._p=tx}function t_(e,i){if(!e||!e.length)return{};for(var r={},o=0,s=e.length;o<s;o++){var a=e[o],c=a.data;if(c&&c.attrs&&c.attrs.slot&&delete c.attrs.slot,(a.context===i||a.fnContext===i)&&c&&null!=c.slot){var l=c.slot,u=r[l]||(r[l]=[]);"template"===a.tag?u.push.apply(u,a.children||[]):u.push(a)}else(r.default||(r.default=[])).push(a)}for(var h in r)r[h].every(tw)&&delete r[h];return r}function tw(e){return e.isComment&&!e.asyncFactory||" "===e.text}function tS(e){return e.isComment&&e.asyncFactory}function tT(e,i,r,o){var s,a=0<Object.keys(r).length,c=i?!!i.$stable:!a,l=i&&i.$key;if(i){if(i._normalized)return i._normalized;if(c&&o&&o!==ih&&l===o.$key&&!a&&!o.$hasNormal)return o;for(var u in s={},i)i[u]&&"$"!==u[0]&&(s[u]=t0(e,r,u,i[u]))}else s={};for(var h in r)h in s||(s[h]=tO(r,h));return i&&Object.isExtensible(i)&&(i._normalized=s),D(s,"$stable",c),D(s,"$key",l),D(s,"$hasNormal",a),s}function t0(e,i,r,o){var s=function(){var i=iW;j(e);var r=arguments.length?o.apply(null,arguments):o({}),s=(r=r&&"object"===h(r)&&!id(r)?[r]:ta(r))&&r[0];return j(i),r&&(!s||1===r.length&&s.isComment&&!tS(s))?void 0:r};return o.proxy&&Object.defineProperty(i,r,{get:s,enumerable:!0,configurable:!0}),s}function tO(e,i){return function(){return e[i]}}function tk(e){var i=!1;return{get attrs(){if(!e._attrsProxy){var r=e._attrsProxy={};D(r,"_v_attr_proxy",!0),tP(r,e.$attrs,ih,e,"$attrs")}return e._attrsProxy},get listeners(){return e._listenersProxy||tP(e._listenersProxy={},e.$listeners,ih,e,"$listeners"),e._listenersProxy},get slots(){var o;return(o=e)._slotsProxy||tA(o._slotsProxy={},o.$scopedSlots),o._slotsProxy},emit:iC(e.$emit,e),expose:function(r){i&&os("expose() should be called only once per setup().",e),i=!0,r&&Object.keys(r).forEach(function(i){return J(e,r,i)})}}}function tP(e,i,r,o,s){var a=!1;for(var c in i)c in e?i[c]!==r[c]&&(a=!0):(a=!0,tE(e,c,o,s));for(var c in e)c in i||(a=!0,delete e[c]);return a}function tE(e,i,r,o){Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:function(){return r[o][i]}})}function tA(e,i){for(var r in i)e[r]=i[r];for(var r in e)r in i||delete e[r]}function tD(){iW||os("useContext() called without active instance.");var e=iW;return e._setupContext||(e._setupContext=tk(e))}function tL(e,i){return(e.__esModule||i9&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?i.extend(e):e}function tj(e){if(id(e)){for(var r,o=0;o<e.length;o++)if(i(r=e[o])&&(i(r.componentOptions)||tS(r)))return r}}function tI(e,i){rd.$on(e,i)}function tF(e,i){rd.$off(e,i)}function tM(e,i){var r=rd;return function o(){var s=i.apply(null,arguments);null!==s&&r.$off(e,o)}}function tR(e,i,r){rd=e,tr(i,r||{},tI,tF,tM,e),rd=void 0}function t3(e){var i=r$;return r$=e,function(){r$=i}}function tB(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function t1(e,i){if(i){if(e._directInactive=!1,tB(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var r=0;r<e.$children.length;r++)t1(e.$children[r]);t2(e,"activated")}}function t2(e,i,r,o){void 0===o&&(o=!0),M();var s=iW;o&&j(e);var a=e.$options[i],c="".concat(i," hook");if(a)for(var l=0,u=a.length;l<u;l++)tV(a[l],e,r||null,e,c);e._hasHookEvent&&e.$emit("hook:"+i),o&&j(s),R()}function tz(){for(r0=rO(),rS=!0,rb.sort(rA),rT=0;rT<rb.length;rT++)if((e=rb[rT]).before&&e.before(),rC[i=e.id]=null,e.run(),null!=rC[i]&&(r_[i]=(r_[i]||0)+1,r_[i]>r8)){os("You may have an infinite update loop "+(e.user?'in watcher with expression "'.concat(e.expression,'"'):"in a component render function."),e.vm);break}var e,i,r=rx.slice(),o=rb.slice();rT=rb.length=rx.length=0,rC={},r_={},rw=rS=!1,function(e){for(var i=0;i<e.length;i++)e[i]._inactive=!0,t1(e[i],!0)}(r),function(e){for(var i=e.length;i--;){var r=e[i],o=r.vm;o&&o._watcher===r&&o._isMounted&&!o._isDestroyed&&t2(o,"updated")}}(o),iY&&iO.devtools&&iY.emit("flush")}function tU(e){var i=e.id;if(null==rC[i]&&(e!==iJ.target||!e.noRecurse)){if(rC[i]=!0,rS){for(var r=rb.length-1;r>rT&&rb[r].id>e.id;)r--;rb.splice(r+1,0,e)}else rb.push(e);if(!rw){if(rw=!0,!iO.async)return void tz();tG(tz)}}}function tY(e,i){return t9(e,null,iK(iK({},i),{flush:"post"}))}function t9(e,i,r){var o=void 0===r?ih:r,s=o.immediate,a=o.deep,c=o.flush,u=void 0===c?"pre":c,h=o.onTrack,f=o.onTrigger;i||(void 0!==s&&os('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),void 0!==a&&os('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));var d,p=function(e){os("Invalid watch source: ".concat(e,". A watch source can only be a getter/effect ")+"function, a ref, a reactive object, or an array of these types.")},g=iW,v=function(e,i,r){return void 0===r&&(r=null),tV(e,null,r,g,i)},m=!1,$=!1;if(K(e)?(d=function(){return e.value},m=X(e)):H(e)?(d=function(){return e.__ob__.dep.depend(),e},a=!0):id(e)?($=!0,m=e.some(function(e){return H(e)||X(e)}),d=function(){return e.map(function(e){return K(e)?e.value:H(e)?t7(e):l(e)?v(e,rj):void p(e)})}):l(e)?d=i?function(){return v(e,rj)}:function(){if(!g||!g._isDestroyed)return b&&b(),v(e,rD,[x])}:(d=T,p(e)),i&&a){var y=d;d=function(){return t7(y())}}var b,x=function(e){b=C.onStop=function(){v(e,rI)}};if(iU())return x=T,i?s&&v(i,rL,[d(),$?[]:void 0,x]):d(),T;var C=new rJ(iW,d,T,{lazy:!0});C.noRecurse=!i;var _=$?[]:rF;return C.run=function(){if(C.active){if(i){var e=C.get();(a||m||($?e.some(function(e,i){return E(e,_[i])}):E(e,_)))&&(b&&b(),v(i,rL,[e,_===rF?void 0:_,x]),_=e)}else C.get()}},"sync"===u?C.update=C.run:"post"===u?(C.post=!0,C.update=function(){return tU(C)}):C.update=function(){if(g&&g===iW&&!g._isMounted){var e=g._preWatchers||(g._preWatchers=[]);0>e.indexOf(C)&&e.push(C)}else tU(C)},C.onTrack=h,C.onTrigger=f,i?s?C.run():_=C.get():"post"===u&&g?g.$once("hook:mounted",function(){return C.get()}):C.get(),function(){C.teardown()}}function tN(e){var i=e._provided,r=e.$parent&&e.$parent._provided;return r===i?e._provided=Object.create(r):i}function tW(e,i,r){M();try{if(i){for(var o,s=i;s=s.$parent;)if(o=s.$options.errorCaptured)for(var a=0;a<o.length;a++)try{if(!1===o[a].call(s,e,i,r))return}catch(c){tH(c,s,"errorCaptured hook")}}tH(e,i,r)}finally{R()}}function tV(e,i,r,o,s){var a;try{(a=r?e.apply(i,r):e.call(i))&&!a._isVue&&v(a)&&!a._handled&&(a.catch(function(e){return tW(e,o,s+" (Promise/async)")}),a._handled=!0)}catch(c){tW(c,o,s)}return a}function tH(e,i,r){if(iO.errorHandler)try{return iO.errorHandler.call(null,e,i,r)}catch(o){o!==e&&tX(o,null,"config.errorHandler")}tX(e,i,r)}function tX(e,i,r){if(os("Error in ".concat(r,': "').concat(e.toString(),'"'),i),!iA||"undefined"==typeof console)throw e;console.error(e)}function t4(){rB=!1;var e=r3.slice(0);r3.length=0;for(var i=0;i<e.length;i++)e[i]()}function tG(e,i){var r;if(r3.push(function(){if(e)try{e.call(i)}catch(o){tW(o,i,"nextTick")}else r&&r(i)}),rB||(rB=!0,rE()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){r=e})}function t6(e){return function(i,r){var o,s,a,c,l;return void 0===r&&(r=iW),r?(o=r,s=e,a=i,void((c=o.$options)[s]=el(c[s],a))):void os("".concat(("beforeDestroy"===(l=e)?l="beforeUnmount":"destroyed"==l&&(l="unmounted"),"on".concat(l[0].toUpperCase()+l.slice(1)))," is called when there is no active component instance to be ")+"associated with. Lifecycle injection APIs can only be used during execution of setup().")}}function t7(e){return function e(i,r){var o,s,a=id(i);if((a||u(i))&&!Object.isFrozen(i)&&!(i instanceof iV)){if(i.__ob__){var c=i.__ob__.dep.id;if(r.has(c))return;r.add(c)}if(a)for(o=i.length;o--;)e(i[o],r);else if(K(i))e(i.value,r);else for(o=(s=Object.keys(i)).length;o--;)e(i[s[o]],r)}}(e,rK),rK.clear(),e}function t5(e,i,r){rQ.get=function(){return this[i][r]},rQ.set=function(e){this[i][r]=e},Object.defineProperty(e,r,rQ)}function tq(e,i,r){var o=!iU();l(r)?(rQ.get=o?tK(i):tZ(r),rQ.set=T):(rQ.get=r.get?o&&!1!==r.cache?tK(i):tZ(r.get):T,rQ.set=r.set||T),rQ.set===T&&(rQ.set=function(){os('Computed property "'.concat(i,'" was assigned to but it has no setter.'),this)}),Object.defineProperty(e,i,rQ)}function tK(e){return function(){var i=this._computedWatchers&&this._computedWatchers[e];if(i)return i.dirty&&i.evaluate(),iJ.target&&(iJ.target.onTrack&&iJ.target.onTrack({effect:iJ.target,target:this,type:"get",key:e}),i.depend()),i.value}}function tZ(e){return function(){return e.call(this,this)}}function tJ(e,i,r,o){return d(r)&&(o=r,r=r.handler),"string"==typeof r&&(r=e[r]),e.$watch(i,r,o)}function tQ(e,i){if(e){for(var r,o=Object.create(null),s=i9?Reflect.ownKeys(e):Object.keys(e),a=0;a<s.length;a++)if("__ob__"!==(r=s[a])){var c=e[r].from;if(c in i._provided)o[r]=i._provided[c];else if("default"in e[r]){var u=e[r].default;o[r]=l(u)?u.call(i):u}else os('Injection "'.concat(r,'" not found'),i)}return o}}function et(e){var i=e.options;if(e.super){var r=et(e.super);if(r!==e.superOptions){e.superOptions=r;var o=function(e){var i,r=e.options,o=e.sealedOptions;for(var s in r)r[s]!==o[s]&&(i||(i={}),i[s]=r[s]);return i}(e);o&&w(e.extendOptions,o),(i=e.options=ed(r,e.extendOptions)).name&&(i.components[i.name]=e)}}return i}function ee(e,i,o,s,a){var c,l=this,u=a.options;x(s,"_uid")?(c=Object.create(s))._original=s:(c=s,s=s._original);var h=r(u._compiled),f=!h;this.data=e,this.props=i,this.children=o,this.parent=s,this.listeners=e.on||ih,this.injections=tQ(u.inject,s),this.slots=function(){return l.$slots||tT(s,e.scopedSlots,l.$slots=t_(o,s)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return tT(s,e.scopedSlots,this.slots())}}),h&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=tT(s,e.scopedSlots,this.$slots)),this._c=u._scopeId?function(e,i,r,o){var a=tl(c,e,i,r,o,f);return a&&!id(a)&&(a.fnScopeId=u._scopeId,a.fnContext=s),a}:function(e,i,r,o){return tl(c,e,i,r,o,f)}}function en(e,i,r,o,s){var a=F(e);return a.fnContext=r,a.fnOptions=o,(a.devtoolsMeta=a.devtoolsMeta||{}).renderContext=s,i.slot&&((a.data||(a.data={})).slot=i.slot),a}function ei(e,i){for(var r in i)e[iy(r)]=i[r]}function er(e){return e.name||e.__name||e._componentTag}function eo(o,s,a,c,l){if(!e(o)){var h,f,d,p,g,m,$,y,C,_,w,S,T,O,k=a.$options._base;if(u(o)&&(o=k.extend(o)),"function"!=typeof o)return void os("Invalid Component definition: ".concat(o+""),a);if(e(o.cid)&&void 0===(o=function(o,s){if(r(o.error)&&i(o.errorComp))return o.errorComp;if(i(o.resolved))return o.resolved;var a=rm;if(a&&i(o.owners)&&-1===o.owners.indexOf(a)&&o.owners.push(a),r(o.loading)&&i(o.loadingComp))return o.loadingComp;if(a&&!i(o.owners)){var c=o.owners=[a],l=!0,h=null,f=null;a.$on("hook:destroyed",function(){return b(c,a)});var d=function(e){for(var i=0,r=c.length;i<r;i++)c[i].$forceUpdate();e&&(c.length=0,null!==h&&(clearTimeout(h),h=null),null!==f&&(clearTimeout(f),f=null))},p=P(function(e){o.resolved=tL(e,s),l?c.length=0:d(!0)}),g=P(function(e){os("Failed to resolve async component: ".concat(o+"")+(e?"\nReason: ".concat(e):"")),i(o.errorComp)&&(o.error=!0,d(!0))}),m=o(p,g);return u(m)&&(v(m)?e(o.resolved)&&m.then(p,g):v(m.component)&&(m.component.then(p,g),i(m.error)&&(o.errorComp=tL(m.error,s)),i(m.loading)&&(o.loadingComp=tL(m.loading,s),0===m.delay?o.loading=!0:h=setTimeout(function(){h=null,e(o.resolved)&&e(o.error)&&(o.loading=!0,d(!1))},m.delay||200)),i(m.timeout)&&(f=setTimeout(function(){f=null,e(o.resolved)&&g("timeout (".concat(m.timeout,"ms)"))},m.timeout)))),l=!1,o.loading?o.loadingComp:o.resolved}}(O=o,k)))return h=O,f=s,d=a,p=c,g=l,(m=iH()).asyncFactory=h,m.asyncMeta={data:f,context:d,children:p,tag:g},m;s=s||{},et(o),i(s.model)&&($=o.options,y=s,C=$.model&&$.model.prop||"value",_=$.model&&$.model.event||"input",(y.attrs||(y.attrs={}))[C]=y.model.value,S=(w=y.on||(y.on={}))[_],T=y.model.callback,i(S)?(id(S)?-1===S.indexOf(T):S!==T)&&(w[_]=[T].concat(S)):w[_]=T);var E=function(r,o,s){var a=o.options.props;if(!e(a)){var c={},l=r.attrs,u=r.props;if(i(l)||i(u))for(var h in a){var f=ix(h),d=h.toLowerCase();h!==d&&l&&x(l,d)&&oa('Prop "'.concat(d,'" is passed to component ')+"".concat(oi(s||o),", but the declared prop name is")+' "'.concat(h,'". ')+"Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM "+'templates. You should probably use "'.concat(f,'" instead of "').concat(h,'".')),ts(c,u,h,f,!0)||ts(c,l,h,f,!1)}return c}}(s,o,l);if(r(o.options.functional))return function(e,r,o,s,a){var c=e.options,l={},u=c.props;if(i(u))for(var h in u)l[h]=eg(h,u,r||ih);else i(o.attrs)&&ei(l,o.attrs),i(o.props)&&ei(l,o.props);var f=new ee(o,l,a,s,e),d=c.render.call(null,f._c,f);if(d instanceof iV)return en(d,o,f.parent,c,f);if(id(d)){for(var p=ta(d)||[],g=Array(p.length),v=0;v<p.length;v++)g[v]=en(p[v],o,f.parent,c,f);return g}}(o,E,s,a,c);var A=s.on;if(s.on=s.nativeOn,r(o.options.abstract)){var D=s.slot;s={},D&&(s.slot=D)}!function(e){for(var i=e.hook||(e.hook={}),r=0;r<oo.length;r++){var o=oo[r],s=i[o],a=or[o];s===a||s&&s._merged||(i[o]=s?es(a,s):a)}}(s);var L=er(o.options)||l;return new iV("vue-component-".concat(o.cid).concat(L?"-".concat(L):""),s,void 0,void 0,void 0,a,{Ctor:o,propsData:E,listeners:A,tag:l,children:c},O)}}function es(e,i){var r=function(r,o){e(r,o),i(r,o)};return r._merged=!0,r}function ea(e,i){if(!i)return e;for(var r,o,s,a=i9?Reflect.ownKeys(i):Object.keys(i),c=0;c<a.length;c++)"__ob__"===(r=a[c])||(o=e[r],s=i[r],x(e,r)?o!==s&&d(o)&&d(s)&&ea(o,s):Y(e,r,s));return e}function ec(e,i,r){return r?function(){var o=l(i)?i.call(r,r):i,s=l(e)?e.call(r,r):e;return o?ea(o,s):s}:i?e?function(){return ea(l(i)?i.call(this,this):i,l(e)?e.call(this,this):e)}:i:e}function el(e,i){var r=i?e?e.concat(i):id(i)?i:[i]:e;return r?function(e){for(var i=[],r=0;r<e.length;r++)-1===i.indexOf(e[r])&&i.push(e[r]);return i}(r):r}function eu(e,i,r,o){var s=Object.create(e||null);return i?(ef(o,i,r),w(s,i)):s}function eh(e){RegExp("^[a-zA-Z][\\-\\.0-9_".concat(ik.source,"]*$")).test(e)||os('Invalid component name: "'+e+'". Component names should conform to valid custom element name in html5 specification.'),(ig(e)||iO.isReservedTag(e))&&os("Do not use built-in or reserved HTML elements as component id: "+e)}function ef(e,i,r){d(i)||os('Invalid value for option "'.concat(e,'": expected an Object, ')+"but got ".concat(f(i),"."),r)}function ed(e,i,r){function o(o){var s=ou[o]||oy;u[o]=s(e[o],i[o],r,o)}if(function(e){for(var i in e.components)eh(i)}(i),l(i)&&(i=i.options),function(e,i){var r=e.props;if(r){var o,s,a={};if(id(r))for(o=r.length;o--;)"string"==typeof(s=r[o])?a[iy(s)]={type:null}:os("props must be strings when using array syntax.");else if(d(r))for(var c in r)s=r[c],a[iy(c)]=d(s)?s:{type:s};else os('Invalid value for option "props": expected an Array or an Object, '+"but got ".concat(f(r),"."),i);e.props=a}}(i,r),function(e,i){var r=e.inject;if(r){var o=e.inject={};if(id(r))for(var s=0;s<r.length;s++)o[r[s]]={from:r[s]};else if(d(r))for(var a in r){var c=r[a];o[a]=d(c)?w({from:a},c):{from:c}}else os('Invalid value for option "inject": expected an Array or an Object, '+"but got ".concat(f(r),"."),i)}}(i,r),function(e){var i=e.directives;if(i)for(var r in i){var o=i[r];l(o)&&(i[r]={bind:o,update:o})}}(i),!i._base&&(i.extends&&(e=ed(e,i.extends,r)),i.mixins))for(var s=0,a=i.mixins.length;s<a;s++)e=ed(e,i.mixins[s],r);var c,u={};for(c in e)o(c);for(c in i)x(e,c)||o(c);return u}function ep(e,i,r,o){if("string"==typeof r){var s=e[i];if(x(s,r))return s[r];var a=iy(r);if(x(s,a))return s[a];var c=i8(a);if(x(s,c))return s[c];var l=s[r]||s[a]||s[c];return o&&!l&&os("Failed to resolve "+i.slice(0,-1)+": "+r),l}}function eg(e,i,r,o){var s=i[e],a=!x(r,e),c=r[e],d=ey(Boolean,s.type);if(-1<d){if(a&&!x(s,"default"))c=!1;else if(""===c||c===ix(e)){var p=ey(String,s.type);(0>p||d<p)&&(c=!0)}}if(void 0===c){c=function e(i,r,o){if(x(r,"default")){var s=r.default;return u(s)&&os('Invalid default value for prop "'+o+'": Props with type Object/Array must use a factory function to return the default value.',i),i&&i.$options.propsData&&void 0===i.$options.propsData[o]&&void 0!==i._props[o]?i._props[o]:l(s)&&"Function"!==em(r.type)?s.call(i):s}}(o,s,e);var g,v,m=rs;rs=!0,z(c),rs=m}return function(e,i,r,o,s){if(e.required&&s)return void os('Missing required prop: "'+i+'"',o);if(null!=r||e.required){var a,c,l,u,d,p,g=e.type,v=!g||!0===g,m=[];if(g){id(g)||(g=[g]);for(var $,y=0;y<g.length&&!v;y++)$=ev(r,g[y],o),m.push($.expectedType||""),v=$.valid}var b=m.some(function(e){return e});if(!v&&b){return void os((a=i,c=r,l=m,u='Invalid prop: type check failed for prop "'.concat(a,'".')+" Expected ".concat(l.map(i8).join(", ")),d=l[0],p=f(c),1===l.length&&eb(d)&&eb(h(c))&&!function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return e.some(function(e){return"boolean"===e.toLowerCase()})}(d,p)&&(u+=" with value ".concat(e8(c,d))),u+=", got ".concat(p," "),eb(p)&&(u+="with value ".concat(e8(c,p),".")),u),o)}var x=e.validator;x&&!x(r)&&os('Invalid prop: custom validator check failed for prop "'+i+'".',o)}}(s,e,c,o,a),c}function ev(e,i,r){var o,s=em(i);if(o8.test(s)){var a=h(e);(o=a===s.toLowerCase())||"object"!==a||(o=e instanceof i)}else if("Object"===s)o=d(e);else if("Array"===s)o=id(e);else try{o=e instanceof i}catch(c){os('Invalid prop type: "'+i+'" is not a constructor',r),o=!1}return{valid:o,expectedType:s}}function em(e){var i=e&&e.toString().match(ob);return i?i[1]:""}function e$(e,i){return em(e)===em(i)}function ey(e,i){if(!id(i))return e$(i,e)?0:-1;for(var r=0,o=i.length;r<o;r++)if(e$(i[r],e))return r;return -1}function e8(e,i){return"String"===i?'"'.concat(e,'"'):"".concat("Number"===i?+e:e)}function eb(e){return ox.some(function(i){return e.toLowerCase()===i})}function ex(e){this instanceof ex||os("Vue is a constructor and should be called with the `new` keyword"),this._init(e)}function eC(e){return e&&(er(e.Ctor.options)||e.tag)}function e_(e,i){return id(e)?-1<e.indexOf(i):"string"==typeof e?-1<e.split(",").indexOf(i):!!p(e)&&e.test(i)}function ew(e,i){var r=e.cache,o=e.keys,s=e._vnode;for(var a in r){var c=r[a];if(c){var l=c.name;l&&!i(l)&&eS(r,a,o,s)}}}function eS(e,i,r,o){var s=e[i];s&&(!o||s.tag!==o.tag)&&s.componentInstance.$destroy(),e[i]=null,b(r,i)}function eT(e,r){return{staticClass:e0(e.staticClass,r.staticClass),class:i(e.class)?[e.class,r.class]:r.class}}function e0(e,i){return e?i?e+" "+i:e:i||""}function eO(e){return Array.isArray(e)?function(e){for(var r,o="",s=0,a=e.length;s<a;s++)i(r=eO(e[s]))&&""!==r&&(o&&(o+=" "),o+=r);return o}(e):u(e)?function(e){var i="";for(var r in e)e[r]&&(i&&(i+=" "),i+=r);return i}(e):"string"==typeof e?e:""}function ek(e){return oX(e)?"svg":"math"===e?"math":void 0}function eP(e){return"string"==typeof e?document.querySelector(e)||(os("Cannot find element: "+e),document.createElement("div")):e}function eE(e,r){var o=e.data.ref;if(i(o)){var s=e.context,a=e.componentInstance||e.elm,c=r?null:a;if(l(o))return void tV(o,s,[c],s,"template ref function");var u=e.data.refInFor,f="string"==typeof o||"number"==typeof o,d=K(o),p=s.$refs;if(f||d){if(u){var g=f?p[o]:o.value;r?id(g)&&b(g,a):id(g)?g.includes(a)||g.push(a):f?(p[o]=[a],eA(s,o,p[o])):o.value=[a]}else if(f){if(r&&p[o]!==a)return;p[o]=r?void 0:a,eA(s,o,c)}else if(d){if(r&&o.value!==a)return;o.value=c}else os("Invalid template ref type: ".concat(h(o)))}}}function eA(e,i,r){var o=e._setupState;o&&x(o,i)&&(K(o[i])?o[i].value=r:o[i]=r)}function eD(o,s){return o.key===s.key&&o.asyncFactory===s.asyncFactory&&(o.tag===s.tag&&o.isComment===s.isComment&&i(o.data)===i(s.data)&&function(e,r){if("input"!==e.tag)return!0;var o,s=i(o=e.data)&&i(o=o.attrs)&&o.type,a=i(o=r.data)&&i(o=o.attrs)&&o.type;return s===a||o6(s)&&o6(a)}(o,s)||r(o.isAsyncPlaceholder)&&e(s.asyncFactory.error))}function eL(e,r,o){var s,a,c={};for(s=r;s<=o;++s)i(a=e[s].key)&&(c[a]=s);return c}function ej(e,i){(e.data.directives||i.data.directives)&&function(e,i){var r,o,s,a=e===o5,c=eI(e.data.directives,e.context),l=eI(i.data.directives,i.context),u=[],h=[];for(r in l)o=c[r],s=l[r],o?(s.oldValue=o.value,s.oldArg=o.arg,eM(s,"update",i,e),s.def&&s.def.componentUpdated&&h.push(s)):(eM(s,"bind",i,e),s.def&&s.def.inserted&&u.push(s));if(u.length){var f=function(){for(var r=0;r<u.length;r++)eM(u[r],"inserted",i,e)};a?to(i,"insert",f):f()}if(h.length&&to(i,"postpatch",function(){for(var r=0;r<h.length;r++)eM(h[r],"componentUpdated",i,e)}),!a)for(r in c)l[r]||eM(c[r],"unbind",e,e,i===o5)}(e,i)}function eI(e,i){var r,o,s=Object.create(null);if(!e)return s;for(r=0;r<e.length;r++){if((o=e[r]).modifiers||(o.modifiers=oK),s[eF(o)]=o,i._setupState&&i._setupState.__sfc){var a=o.def||ep(i,"_setupState","v-"+o.name);o.def="function"==typeof a?{bind:a,update:a}:a}o.def=o.def||ep(i.$options,"directives",o.name,!0)}return s}function eF(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function eM(e,i,r,o,s){var a=e.def&&e.def[i];if(a)try{a(r.elm,e,r,o,s)}catch(c){tW(c,r.context,"directive ".concat(e.name," ").concat(i," hook"))}}function eR(o,s){var a=s.componentOptions;if(!(i(a)&&!1===a.Ctor.options.inheritAttrs||e(o.data.attrs)&&e(s.data.attrs))){var c,l,u=s.elm,h=o.data.attrs||{},f=s.data.attrs||{};for(c in(i(f.__ob__)||r(f._v_attr_proxy))&&(f=s.data.attrs=w({},f)),f)l=f[c],h[c]!==l&&e3(u,c,l,s.data.pre);for(c in(iL||iI)&&f.value!==h.value&&e3(u,"value",f.value),h)e(f[c])&&(o9(c)?u.removeAttributeNS(oY,oN(c)):o1(c)||u.removeAttribute(c))}}function e3(e,i,r,o){o||-1<e.tagName.indexOf("-")?eB(e,i,r):oU(i)?oW(r)?e.removeAttribute(i):(r="allowfullscreen"===i&&"EMBED"===e.tagName?"true":i,e.setAttribute(i,r)):o1(i)?e.setAttribute(i,oz(i,r)):o9(i)?oW(r)?e.removeAttributeNS(oY,oN(i)):e.setAttributeNS(oY,i,r):eB(e,i,r)}function eB(e,i,r){oW(r)?e.removeAttribute(i):(!iL||ij||"TEXTAREA"!==e.tagName||"placeholder"!==i||""===r||e.__ieph||(e.addEventListener("input",function i(r){r.stopImmediatePropagation(),e.removeEventListener("input",i)}),e.__ieph=!0),e.setAttribute(i,r))}function e1(r,o){var s=o.elm,a=o.data,c=r.data;if(!(e(a.staticClass)&&e(a.class)&&(e(c)||e(c.staticClass)&&e(c.class)))){var l=function e(r){for(var o,s,a=r.data,c=r,l=r;i(l.componentInstance);)(l=l.componentInstance._vnode)&&l.data&&(a=eT(l.data,a));for(;i(c=c.parent);)c&&c.data&&(a=eT(a,c.data));return o=a.staticClass,s=a.class,i(o)||i(s)?e0(o,eO(s)):""}(o),u=s._transitionClasses;i(u)&&(l=e0(l,eO(u))),l!==s._prevClass&&(s.setAttribute("class",l),s._prevClass=l)}}function e2(e){function i(){(c||(c=[])).push(e.slice(v,s).trim()),v=s+1}var r,o,s,a,c,l=!1,u=!1,h=!1,f=!1,d=0,p=0,g=0,v=0;for(s=0;s<e.length;s++)if(o=r,r=e.charCodeAt(s),l)39===r&&92!==o&&(l=!1);else if(u)34===r&&92!==o&&(u=!1);else if(h)96===r&&92!==o&&(h=!1);else if(f)47===r&&92!==o&&(f=!1);else if(124!==r||124===e.charCodeAt(s+1)||124===e.charCodeAt(s-1)||d||p||g){if(34===r?u=!0:39===r?l=!0:96===r?h=!0:40===r?g++:41===r?g--:91===r?p++:93===r?p--:123===r?d++:125===r&&d--,47===r){for(var m=s-1,$=void 0;0<=m&&" "===($=e.charAt(m));m--);$&&oZ.test($)||(f=!0)}}else void 0===a?(v=s+1,a=e.slice(0,s).trim()):i();if(void 0===a?a=e.slice(0,s).trim():0!==v&&i(),c)for(s=0;s<c.length;s++)a=ez(a,c[s]);return a}function ez(e,i){var r=i.indexOf("(");if(0>r)return'_f("'.concat(i,'")(').concat(e,")");var o=i.slice(0,r),s=i.slice(r+1);return'_f("'.concat(o,'")(').concat(e).concat(")"===s?s:","+s)}function eU(e){console.error("[Vue compiler]: ".concat(e))}function eY(e,i){return e?e.map(function(e){return e[i]}).filter(function(e){return e}):[]}function e9(e,i,r,o,s){(e.props||(e.props=[])).push(e5({name:i,value:r,dynamic:s},o)),e.plain=!1}function eN(e,i,r,o,s){(s?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[])).push(e5({name:i,value:r,dynamic:s},o)),e.plain=!1}function eW(e,i,r,o){e.attrsMap[i]=r,e.attrsList.push(e5({name:i,value:r},o))}function eV(e,i,r,o,s,a,c,l){(e.directives||(e.directives=[])).push(e5({name:i,rawName:r,value:o,arg:s,isDynamicArg:a,modifiers:c},l)),e.plain=!1}function eH(e,i,r){return r?"_p(".concat(i,',"').concat(e,'")'):e+i}function eX(e,i,r,o,s,a,c,l){o=o||ih,a&&o.prevent&&o.passive&&a("passive and prevent can't be used together. Passive handler can't prevent default event.",c),o.right?l?i="(".concat(i,")==='click'?'contextmenu':(").concat(i,")"):"click"===i&&(i="contextmenu",delete o.right):o.middle&&(l?i="(".concat(i,")==='click'?'mouseup':(").concat(i,")"):"click"===i&&(i="mouseup")),o.capture&&(delete o.capture,i=eH("!",i,l)),o.once&&(delete o.once,i=eH("~",i,l)),o.passive&&(delete o.passive,i=eH("&",i,l)),o.native?(delete o.native,u=e.nativeEvents||(e.nativeEvents={})):u=e.events||(e.events={});var u,h=e5({value:r.trim(),dynamic:l},c);o!==ih&&(h.modifiers=o);var f=u[i];Array.isArray(f)?s?f.unshift(h):f.push(h):u[i]=f?s?[h,f]:[f,h]:h,e.plain=!1}function e4(e,i){return e.rawAttrsMap[":"+i]||e.rawAttrsMap["v-bind:"+i]||e.rawAttrsMap[i]}function eG(e,i,r){var o=e6(e,":"+i)||e6(e,"v-bind:"+i);if(null!=o)return e2(o);if(!1!==r){var s=e6(e,i);if(null!=s)return JSON.stringify(s)}}function e6(e,i,r){var o;if(null!=(o=e.attrsMap[i])){for(var s=e.attrsList,a=0,c=s.length;a<c;a++)if(s[a].name===i){s.splice(a,1);break}}return r&&delete e.attrsMap[i],o}function e7(e,i){for(var r,o=e.attrsList,s=0,a=o.length;s<a;s++)if(r=o[s],i.test(r.name))return o.splice(s,1),r}function e5(e,i){return i&&(null!=i.start&&(e.start=i.start),null!=i.end&&(e.end=i.end)),e}function eq(e,i,r){var o=r||{},s=o.number,a="$$v",c=a;o.trim&&(c="(typeof ".concat(a," === 'string'")+"? ".concat(a,".trim()")+": ".concat(a,")")),s&&(c="_n(".concat(c,")"));var l=eK(i,c);e.model={value:"(".concat(i,")"),expression:JSON.stringify(i),callback:"function (".concat(a,") {").concat(l,"}")}}function eK(e,i){var r=function(e){if(ok=(e=e.trim()).length,0>e.indexOf("[")||e.lastIndexOf("]")<ok-1)return -1<(oA=e.lastIndexOf("."))?{exp:e.slice(0,oA),key:'"'+e.slice(oA+1)+'"'}:{exp:e,key:null};for(oP=e,oA=oD=oL=0;!eJ();)eQ(oE=eZ())?ne(oE):91===oE&&nt(oE);return{exp:e.slice(0,oD),key:e.slice(oD+1,oL)}}(e);return null===r.key?"".concat(e,"=").concat(i):"$set(".concat(r.exp,", ").concat(r.key,", ").concat(i,")")}function eZ(){return oP.charCodeAt(++oA)}function eJ(){return oA>=ok}function eQ(e){return 34===e||39===e}function nt(e){var i=1;for(oD=oA;!eJ();)if(eQ(e=eZ()))ne(e);else if(91===e&&i++,93===e&&i--,0==i){oL=oA;break}}function ne(e){for(var i=e;!eJ()&&(e=eZ())!==i;);}function nn(e,i,r){var o=oI;return function s(){var a=i.apply(null,arguments);null!==a&&nr(e,s,r,o)}}function ni(e,i,r,o){if(st){var s=r0,a=i;i=a._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=s||0>=e.timeStamp||e.target.ownerDocument!==document)return a.apply(this,arguments)}}oI.addEventListener(e,i,i3?{capture:r,passive:o}:r)}function nr(e,i,r,o){(o||oI).removeEventListener(e,i._wrapper||i,r)}function no(r,o){if(!e(r.data.on)||!e(o.data.on)){var s=o.data.on||{},a=r.data.on||{};oI=o.elm||r.elm,function e(r){if(i(r[oJ])){var o=iL?"change":"input";r[o]=[].concat(r[oJ],r[o]||[]),delete r[oJ]}i(r[oQ])&&(r.change=[].concat(r[oQ],r.change||[]),delete r[oQ])}(s),tr(s,a,ni,nr,nn,o.context),oI=void 0}}function ns(o,s){if(!e(o.data.domProps)||!e(s.data.domProps)){var a,c,l=s.elm,u=o.data.domProps||{},h=s.data.domProps||{};for(a in(i(h.__ob__)||r(h._v_attr_proxy))&&(h=s.data.domProps=w({},h)),u)a in h||(l[a]="");for(a in h){if(c=h[a],"textContent"===a||"innerHTML"===a){if(s.children&&(s.children.length=0),c===u[a])continue;1===l.childNodes.length&&l.removeChild(l.childNodes[0])}if("value"===a&&"PROGRESS"!==l.tagName){l._value=c;var f=e(c)?"":c+"";na(l,f)&&(l.value=f)}else if("innerHTML"===a&&oX(l.tagName)&&e(l.innerHTML)){(oF=oF||document.createElement("div")).innerHTML="<svg>".concat(c,"</svg>");for(var d=oF.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}else if(c!==u[a])try{l[a]=c}catch(p){}}}}function na(e,r){return!e.composing&&("OPTION"===e.tagName||function(e,i){var r=!0;try{r=document.activeElement!==e}catch(o){}return r&&e.value!==i}(e,r)||function e(r,o){var s=r.value,a=r._vModifiers;if(i(a)){if(a.number)return $(s)!==$(o);if(a.trim)return s.trim()!==o.trim()}return s!==o}(e,r))}function nc(e){var i=nl(e.style);return e.staticStyle?w(e.staticStyle,i):i}function nl(e){return Array.isArray(e)?S(e):"string"==typeof e?se(e):e}function nu(r,o){var s=o.data,a=r.data;if(!(e(s.staticStyle)&&e(s.style)&&e(a.staticStyle)&&e(a.style))){var c,l,u=o.elm,h=a.staticStyle,f=a.normalizedStyle||a.style||{},d=h||f,p=nl(o.data.style)||{};o.data.normalizedStyle=i(p.__ob__)?w({},p):p;var g=function(e,i){var r,o={};if(i)for(var s=e;s.componentInstance;)(s=s.componentInstance._vnode)&&s.data&&(r=nc(s.data))&&w(o,r);(r=nc(e.data))&&w(o,r);for(var a=e;a=a.parent;)a.data&&(r=nc(a.data))&&w(o,r);return o}(o,!0);for(l in d)e(g[l])&&sr(u,l,"");for(l in g)(c=g[l])!==d[l]&&sr(u,l,null==c?"":c)}}function nh(e,i){if(i&&(i=i.trim())){if(e.classList)-1<i.indexOf(" ")?i.split(sa).forEach(function(i){return e.classList.add(i)}):e.classList.add(i);else{var r=" ".concat(e.getAttribute("class")||""," ");0>r.indexOf(" "+i+" ")&&e.setAttribute("class",(r+i).trim())}}}function nf(e,i){if(i&&(i=i.trim())){if(e.classList)-1<i.indexOf(" ")?i.split(sa).forEach(function(i){return e.classList.remove(i)}):e.classList.remove(i),e.classList.length||e.removeAttribute("class");else{for(var r=" ".concat(e.getAttribute("class")||""," "),o=" "+i+" ";0<=r.indexOf(o);)r=r.replace(o," ");(r=r.trim())?e.setAttribute("class",r):e.removeAttribute("class")}}}function nd(e){if(e){if("object"===h(e)){var i={};return!1!==e.css&&w(i,sc(e.name||"v")),w(i,e),i}return"string"==typeof e?sc(e):void 0}}function np(e){sv(function(){sv(e)})}function ng(e,i){var r=e._transitionClasses||(e._transitionClasses=[]);0>r.indexOf(i)&&(r.push(i),nh(e,i))}function nv(e,i){e._transitionClasses&&b(e._transitionClasses,i),nf(e,i)}function nm(e,i,r){var o=n$(e,i),s=o.type,a=o.timeout,c=o.propCount;if(!s)return r();var l=s===su?sd:sg,u=0,h=function(){e.removeEventListener(l,f),r()},f=function(i){i.target===e&&++u>=c&&h()};setTimeout(function(){u<c&&h()},a+1),e.addEventListener(l,f)}function n$(e,i){var r,s=window.getComputedStyle(e),a=(s[sf+"Delay"]||"").split(", "),c=(s[sf+"Duration"]||"").split(", "),l=ny(a,c),u=(s[sp+"Delay"]||"").split(", "),h=(s[sp+"Duration"]||"").split(", "),f=ny(u,h),d=0,p=0;return i===su?0<l&&(r=su,d=l,p=c.length):i===sh?0<f&&(r=sh,d=f,p=h.length):p=(r=0<(d=o(l,f))?l>f?su:sh:null)?r===su?c.length:h.length:0,{type:r,timeout:d,propCount:p,hasTransform:r===su&&sm.test(s[sf+"Property"])}}function ny(e,i){for(;e.length<i.length;)e=e.concat(e);return o.apply(null,i.map(function(i,r){return n8(i)+n8(e[r])}))}function n8(e){return 1e3*+e.slice(0,-1).replace(",",".")}function nb(r,o){var s=r.elm;i(s._leaveCb)&&(s._leaveCb.cancelled=!0,s._leaveCb());var a=nd(r.data.transition);if(!e(a)&&!i(s._enterCb)&&1===s.nodeType){for(var c=a.css,h=a.type,f=a.enterClass,d=a.enterToClass,p=a.enterActiveClass,g=a.appearClass,v=a.appearToClass,m=a.appearActiveClass,y=a.beforeEnter,b=a.enter,x=a.afterEnter,C=a.enterCancelled,_=a.beforeAppear,w=a.appear,S=a.afterAppear,T=a.appearCancelled,O=a.duration,k=r$,E=r$.$vnode;E&&E.parent;)k=E.context,E=E.parent;var A=!k._isMounted||!r.isRootInsert;if(!A||w||""===w){var D=A&&g?g:f,L=A&&m?m:p,j=A&&v?v:d,I=A&&_||y,F=A&&l(w)?w:b,M=A&&S||x,R=A&&T||C,B=$(u(O)?O.enter:O);null!=B&&nC(B,"enter",r);var z=!1!==c&&!ij,U=nw(F),Y=s._enterCb=P(function(){z&&(nv(s,j),nv(s,L)),Y.cancelled?(z&&nv(s,D),R&&R(s)):M&&M(s),s._enterCb=null});r.data.show||to(r,"insert",function(){var e=s.parentNode,i=e&&e._pending&&e._pending[r.key];i&&i.tag===r.tag&&i.elm._leaveCb&&i.elm._leaveCb(),F&&F(s,Y)}),I&&I(s),z&&(ng(s,D),ng(s,L),np(function(){nv(s,D),Y.cancelled||(ng(s,j),U||(n_(B)?setTimeout(Y,B):nm(s,h,Y)))})),r.data.show&&(o&&o(),F&&F(s,Y)),z||U||Y()}}}function nx(r,o){function s(){!S.cancelled&&(!r.data.show&&a.parentNode&&((a.parentNode._pending||(a.parentNode._pending={}))[r.key]=r),g&&g(a),C&&(ng(a,f),ng(a,p),np(function(){nv(a,f),S.cancelled||(ng(a,d),_||(n_(w)?setTimeout(S,w):nm(a,h,S)))})),v&&v(a,S),C||_||S())}var a=r.elm;i(a._enterCb)&&(a._enterCb.cancelled=!0,a._enterCb());var c=nd(r.data.transition);if(e(c)||1!==a.nodeType)return o();if(!i(a._leaveCb)){var l=c.css,h=c.type,f=c.leaveClass,d=c.leaveToClass,p=c.leaveActiveClass,g=c.beforeLeave,v=c.leave,m=c.afterLeave,y=c.leaveCancelled,b=c.delayLeave,x=c.duration,C=!1!==l&&!ij,_=nw(v),w=$(u(x)?x.leave:x);i(w)&&nC(w,"leave",r);var S=a._leaveCb=P(function(){a.parentNode&&a.parentNode._pending&&(a.parentNode._pending[r.key]=null),C&&(nv(a,d),nv(a,p)),S.cancelled?(C&&nv(a,f),y&&y(a)):(o(),m&&m(a)),a._leaveCb=null});b?b(s):s()}}function nC(e,i,r){"number"==typeof e?isNaN(e)&&os("<transition> explicit ".concat(i," duration is NaN - ")+"the duration expression might be incorrect.",r.context):os("<transition> explicit ".concat(i," duration is not a valid number - ")+"got ".concat(JSON.stringify(e),"."),r.context)}function n_(e){return"number"==typeof e&&!isNaN(e)}function nw(r){if(e(r))return!1;var o=r.fns;return i(o)?nw(Array.isArray(o)?o[0]:o):1<(r._length||r.length)}function nS(e,i){!0!==i.data.show&&nb(i)}function nT(e,i,r){n0(e,i,r),(iL||iI)&&setTimeout(function(){n0(e,i,r)},0)}function n0(e,i,r){var o=i.value,s=e.multiple;if(!s||Array.isArray(o)){for(var a,c,l=0,u=e.options.length;l<u;l++)if(c=e.options[l],s)a=-1<k(o,nk(c)),c.selected!==a&&(c.selected=a);else if(O(nk(c),o))return void(e.selectedIndex!==l&&(e.selectedIndex=l));s||(e.selectedIndex=-1)}else os('<select multiple v-model="'.concat(i.expression,'"> ')+"expects an Array value for its binding, but got ".concat(Object.prototype.toString.call(o).slice(8,-1)),r)}function nO(e,i){return i.every(function(i){return!O(i,e)})}function nk(e){return"_value"in e?e._value:e.value}function nP(e){e.target.composing=!0}function nE(e){e.target.composing&&(e.target.composing=!1,nA(e.target,"input"))}function nA(e,i){var r=document.createEvent("HTMLEvents");r.initEvent(i,!0,!0),e.dispatchEvent(r)}function nD(e){return!e.componentInstance||e.data&&e.data.transition?e:nD(e.componentInstance._vnode)}function nL(e){var i=e&&e.componentOptions;return i&&i.Ctor.options.abstract?nL(tj(i.children)):e}function nj(e){var i={},r=e.$options;for(var o in r.propsData)i[o]=e[o];var s=r._parentListeners;for(var o in s)i[iy(o)]=s[o];return i}function nI(e,i){if(/\d-keep-alive$/.test(i.tag))return e("keep-alive",{props:i.componentOptions.propsData})}function nF(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function nM(e){e.data.newPos=e.elm.getBoundingClientRect()}function nR(e){var i=e.data.pos,r=e.data.newPos,o=i.left-r.left,s=i.top-r.top;if(o||s){e.data.moved=!0;var a=e.elm.style;a.transform=a.WebkitTransform="translate(".concat(o,"px,").concat(s,"px)"),a.transitionDuration="0s"}}function n3(e,i){var r=i?sR(i):sF;if(r.test(e)){for(var o,s,a,c=[],l=[],u=r.lastIndex=0;o=r.exec(e);){(s=o.index)>u&&(l.push(a=e.slice(u,s)),c.push(JSON.stringify(a)));var h=e2(o[1].trim());c.push("_s(".concat(h,")")),l.push({"@binding":h}),u=s+o[0].length}return u<e.length&&(l.push(a=e.slice(u)),c.push(JSON.stringify(a))),{expression:c.join("+"),tokens:l}}}function nB(e,i){return e.replace(i?s5:s7,function(e){return s6[e]})}function n1(e,i,r){return{type:1,tag:e,attrsList:i,attrsMap:function e(i){for(var r={},o=0,s=i.length;o<s;o++)!r[i[o].name]||iL||iI||sS("duplicate attribute: "+i[o].name,i[o]),r[i[o].name]=i[o].value;return r}(i),rawAttrsMap:{},parent:r,children:[]}}function n2(e,i){var r,o,s,a,c;(function(e){var i=eG(e,"key");if(i){if("template"===e.tag&&sS("<template> cannot be keyed. Place the key on real elements instead.",e4(e,"key")),e.for){var r=e.iterator2||e.iterator1,o=e.parent;r&&r===i&&o&&"transition-group"===o.tag&&sS("Do not use v-for index as key on <transition-group> children, this is the same as not using keys.",e4(e,"key"),!0)}e.key=i}})(e),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,(o=eG(r=e,"ref"))&&(r.ref=o,r.refInFor=function(e){for(var i=e;i;){if(void 0!==i.for)return!0;i=i.parent}return!1}(r)),function(e){"template"===e.tag?((i=e6(e,"scope"))&&sS('the "scope" attribute for scoped slots have been deprecated and replaced by "slot-scope" since 2.5. The new "slot-scope" attribute can also be used on plain elements in addition to <template> to denote scoped slots.',e.rawAttrsMap.scope,!0),e.slotScope=i||e6(e,"slot-scope")):(i=e6(e,"slot-scope"))&&(e.attrsMap["v-for"]&&sS("Ambiguous combined usage of slot-scope and v-for on <".concat(e.tag,"> ")+"(v-for takes higher priority). Use a wrapper <template> for the scoped slot to make it clearer.",e.rawAttrsMap["slot-scope"],!0),e.slotScope=i);var i,r,o=eG(e,"slot");if(o&&(e.slotTarget='""'===o?'"default"':o,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||eN(e,"slot",o,e4(e,"slot"))),"template"===e.tag){if(r=e7(e,as)){(e.slotTarget||e.slotScope)&&sS("Unexpected mixed usage of different slot syntaxes.",e),e.parent&&!sD(e.parent)&&sS("<template v-slot> can only appear at the root level inside the receiving component",e);var s=nY(r),a=s.name,c=s.dynamic;e.slotTarget=a,e.slotTargetDynamic=c,e.slotScope=r.value||ah}}else if(r=e7(e,as)){sD(e)||sS("v-slot can only be used on components or <template>.",r),(e.slotScope||e.slotTarget)&&sS("Unexpected mixed usage of different slot syntaxes.",e),e.scopedSlots&&sS("To avoid scope ambiguity, the default slot should also use <template> syntax when there are other named slots.",r);var l=e.scopedSlots||(e.scopedSlots={}),u=nY(r),h=u.name,f=(c=u.dynamic,l[h]=n1("template",[],e));f.slotTarget=h,f.slotTargetDynamic=c,f.children=e.children.filter(function(e){if(!e.slotScope)return e.parent=f,!0}),f.slotScope=r.value||ah,e.children=[],e.plain=!1}}(e),"slot"===(s=e).tag&&(s.slotName=eG(s,"name"),s.key&&sS("`key` does not work on <slot> because slots are abstract outlets and can possibly expand into multiple elements. Use the key on a wrapping element instead.",e4(s,"key"))),(c=eG(a=e,"is"))&&(a.component=c),null!=e6(a,"inline-template")&&(a.inlineTemplate=!0);for(var l=0;l<s0.length;l++)e=s0[l](e,i)||e;return function(e){var i,r,o,s,a,c,l,u,h=e.attrsList;for(i=0,r=h.length;i<r;i++)if(o=s=h[i].name,a=h[i].value,sJ.test(o)){if(e.hasBindings=!0,(c=n9(o.replace(sJ,"")))&&(o=o.replace(ao,"")),ar.test(o))o=o.replace(ar,""),a=e2(a),(u=an.test(o))&&(o=o.slice(1,-1)),0===a.trim().length&&sS('The value for a v-bind expression cannot be empty. Found in "v-bind:'.concat(o,'"')),c&&(c.prop&&!u&&"innerHtml"===(o=iy(o))&&(o="innerHTML"),c.camel&&!u&&(o=iy(o)),c.sync&&(l=eK(a,"$event"),u?eX(e,'"update:"+('.concat(o,")"),l,null,!1,sS,h[i],!0):(eX(e,"update:".concat(iy(o)),l,null,!1,sS,h[i]),ix(o)!==iy(o)&&eX(e,"update:".concat(ix(o)),l,null,!1,sS,h[i])))),c&&c.prop||!e.component&&sE(e.tag,e.attrsMap.type,o)?e9(e,o,a,h[i],u):eN(e,o,a,h[i],u);else if(sZ.test(o))o=o.replace(sZ,""),(u=an.test(o))&&(o=o.slice(1,-1)),eX(e,o,a,c,!1,sS,h[i],u);else{var f=(o=o.replace(sJ,"")).match(ai),d=f&&f[1];u=!1,d&&(o=o.slice(0,-(d.length+1)),an.test(d)&&(d=d.slice(1,-1),u=!0)),eV(e,o,s,a,d,u,c,h[i]),"model"===o&&nN(e,a)}}else n3(a,sT)&&sS("".concat(o,'="').concat(a,'": ')+'Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div id="{{ val }}">, use <div :id="val">.',h[i]),eN(e,o,JSON.stringify(a),h[i]),!e.component&&"muted"===o&&sE(e.tag,e.attrsMap.type,o)&&e9(e,o,"true",h[i])}(e),e}function nz(e){var i;if(i=e6(e,"v-for")){var r=function(e){var i=e.match(sQ);if(i){var r={for:i[2].trim()},o=i[1].trim().replace(ae,""),s=o.match(at);return s?(r.alias=o.replace(at,"").trim(),r.iterator1=s[1].trim(),s[2]&&(r.iterator2=s[2].trim())):r.alias=o,r}}(i);r?w(e,r):sS("Invalid v-for expression: ".concat(i),e.rawAttrsMap["v-for"])}}function nU(e,i){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(i)}function nY(e){var i=e.name.replace(as,"");return i||("#"===e.name[0]?sS("v-slot shorthand syntax requires a slot name.",e):i="default"),an.test(i)?{name:i.slice(1,-1),dynamic:!0}:{name:'"'.concat(i,'"'),dynamic:!1}}function n9(e){var i=e.match(ao);if(i){var r={};return i.forEach(function(e){r[e.slice(1)]=!0}),r}}function nN(e,i){for(var r=e;r;)r.for&&r.alias===i&&sS("<".concat(e.tag,' v-model="').concat(i,'">: ')+"You are binding v-model directly to a v-for iteration alias. This will not be able to modify the v-for source array because writing to the alias is like modifying a function local variable. Consider using an array of objects and use v-model on an object property instead.",e.rawAttrsMap["v-model"]),r=r.parent}function nW(e){return n1(e.tag,e.attrsList.slice(),e.parent)}function nV(e,i){var r=i?"nativeOn:":"on:",o="",s="";for(var a in e){var c=nH(e[a]);e[a]&&e[a].dynamic?s+="".concat(a,",").concat(c,","):o+='"'.concat(a,'":').concat(c,",")}return o="{".concat(o.slice(0,-1),"}"),s?r+"_d(".concat(o,",[").concat(s.slice(0,-1),"])"):r+o}function nH(e){if(!e)return"function(){}";if(Array.isArray(e))return"[".concat(e.map(function(e){return nH(e)}).join(","),"]");var i,r=ay.test(e.value),o=am.test(e.value),s=ay.test(e.value.replace(a$,""));if(!e.modifiers)return r||o?e.value:"function($event){".concat(s?"return ".concat(e.value):e.value,"}");var a="",c="",l=[];for(var u in e.modifiers)!function(i){if(aC[i])c+=aC[i],a8[i]&&l.push(i);else if("exact"===i){var r=e.modifiers;c+=ax(["ctrl","shift","alt","meta"].filter(function(e){return!r[e]}).map(function(e){return"$event.".concat(e,"Key")}).join("||"))}else l.push(i)}(u);l.length&&(a+=(i=l,"if(!$event.type.indexOf('key')&&"+"".concat(i.map(nX).join("&&"),")return null;"))),c&&(a+=c);var h=r?"return ".concat(e.value,".apply(null, arguments)"):o?"return (".concat(e.value,").apply(null, arguments)"):s?"return ".concat(e.value):e.value;return"function($event){".concat(a).concat(h,"}")}function nX(e){var i=parseInt(e,10);if(i)return"$event.keyCode!==".concat(i);var r=a8[e],o=ab[e];return"_k($event.keyCode,"+"".concat(JSON.stringify(e),",")+"".concat(JSON.stringify(r),",")+"$event.key,"+"".concat(JSON.stringify(o))+")"}function n4(e,i){var r=new aw(i),o=e?"script"===e.tag?"null":nG(e,r):'_c("div")';return{render:"with(this){return ".concat(o,"}"),staticRenderFns:r.staticRenderFns}}function nG(e,i){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return n6(e,i);if(e.once&&!e.onceProcessed)return n7(e,i);if(e.for&&!e.forProcessed)return nq(e,i);if(e.if&&!e.ifProcessed)return n5(e,i);if("template"===e.tag&&!e.slotTarget&&!i.pre)return nZ(e,i)||"void 0";if("slot"===e.tag)return r=e,o=i,s=r.slotName||'"default"',a=nZ(r,o),c="_t(".concat(s).concat(a?",function(){return ".concat(a,"}"):""),l=r.attrs||r.dynamicAttrs?it((r.attrs||[]).concat(r.dynamicAttrs||[]).map(function(e){return{name:iy(e.name),value:e.value,dynamic:e.dynamic}})):null,u=r.attrsMap["v-bind"],(l||u)&&!a&&(c+=",null"),l&&(c+=",".concat(l)),u&&(c+="".concat(l?"":",null",",").concat(u)),c+")";if(e.component)g=(h=e.component,f=e,d=i,p=f.inlineTemplate?null:nZ(f,d,!0),"_c(".concat(h,",").concat(nK(f,d)).concat(p?",".concat(p):"",")"));else{var r,o,s,a,c,l,u,h,f,d,p,g,v=void 0,m=i.maybeComponent(e);(!e.plain||e.pre&&m)&&(v=nK(e,i));var $=void 0,y=i.options.bindings;m&&y&&!1!==y.__isScriptSetup&&($=function(e,i){var r=iy(i),o=i8(r),s=function(s){return e[i]===s?i:e[r]===s?r:e[o]===s?o:void 0},a=s("setup-const")||s("setup-reactive-const");if(a)return a;var c=s("setup-let")||s("setup-ref")||s("setup-maybe-ref");if(c)return c}(y,e.tag)),$||($="'".concat(e.tag,"'"));var b=e.inlineTemplate?null:nZ(e,i,!0);g="_c(".concat($).concat(v?",".concat(v):"").concat(b?",".concat(b):"",")")}for(var x=0;x<i.transforms.length;x++)g=i.transforms[x](e,g);return g}function n6(e,i){e.staticProcessed=!0;var r=i.pre;return e.pre&&(i.pre=e.pre),i.staticRenderFns.push("with(this){return ".concat(nG(e,i),"}")),i.pre=r,"_m(".concat(i.staticRenderFns.length-1).concat(e.staticInFor?",true":"",")")}function n7(e,i){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return n5(e,i);if(e.staticInFor){for(var r="",o=e.parent;o;){if(o.for){r=o.key;break}o=o.parent}return r?"_o(".concat(nG(e,i),",").concat(i.onceId++,",").concat(r,")"):(i.warn("v-once can only be used inside v-for that is keyed. ",e.rawAttrsMap["v-once"]),nG(e,i))}return n6(e,i)}function n5(e,i,r,o){return e.ifProcessed=!0,function e(i,r,o,s){function a(e){return o?o(e,r):e.once?n7(e,r):nG(e,r)}if(!i.length)return s||"_e()";var c=i.shift();return c.exp?"(".concat(c.exp,")?").concat(a(c.block),":").concat(e(i,r,o,s)):"".concat(a(c.block))}(e.ifConditions.slice(),i,r,o)}function nq(e,i,r,o){var s=e.for,a=e.alias,c=e.iterator1?",".concat(e.iterator1):"",l=e.iterator2?",".concat(e.iterator2):"";return i.maybeComponent(e)&&"slot"!==e.tag&&"template"!==e.tag&&!e.key&&i.warn("<".concat(e.tag,' v-for="').concat(a," in ").concat(s,'">: component lists rendered with ')+"v-for should have explicit keys. See https://vuejs.org/guide/list.html#key for more info.",e.rawAttrsMap["v-for"],!0),e.forProcessed=!0,"".concat(o||"_l","((").concat(s,"),")+"function(".concat(a).concat(c).concat(l,"){")+"return ".concat((r||nG)(e,i))+"})"}function nK(e,i){var r="{",o=function(e,i){var r=e.directives;if(r){var o,s,a,c,l="directives:[",u=!1;for(o=0,s=r.length;o<s;o++){a=r[o],c=!0;var h=i.directives[a.name];h&&(c=!!h(e,a,i.warn)),c&&(u=!0,l+='{name:"'.concat(a.name,'",rawName:"').concat(a.rawName,'"').concat(a.value?",value:(".concat(a.value,"),expression:").concat(JSON.stringify(a.value)):"").concat(a.arg?",arg:".concat(a.isDynamicArg?a.arg:'"'.concat(a.arg,'"')):"").concat(a.modifiers?",modifiers:".concat(JSON.stringify(a.modifiers)):"","},"))}if(u)return l.slice(0,-1)+"]"}}(e,i);o&&(r+=o+","),e.key&&(r+="key:".concat(e.key,",")),e.ref&&(r+="ref:".concat(e.ref,",")),e.refInFor&&(r+="refInFor:true,"),e.pre&&(r+="pre:true,"),e.component&&(r+='tag:"'.concat(e.tag,'",'));for(var s=0;s<i.dataGenFns.length;s++)r+=i.dataGenFns[s](e);if(e.attrs&&(r+="attrs:".concat(it(e.attrs),",")),e.props&&(r+="domProps:".concat(it(e.props),",")),e.events&&(r+="".concat(nV(e.events,!1),",")),e.nativeEvents&&(r+="".concat(nV(e.nativeEvents,!0),",")),e.slotTarget&&!e.slotScope&&(r+="slot:".concat(e.slotTarget,",")),e.scopedSlots&&(r+="".concat(function(e,i,r){var o=e.for||Object.keys(i).some(function(e){var r=i[e];return r.slotTargetDynamic||r.if||r.for||function e(i){return 1===i.type&&("slot"===i.tag||i.children.some(e))}(r)}),s=!!e.if;if(!o)for(var a=e.parent;a;){if(a.slotScope&&a.slotScope!==ah||a.for){o=!0;break}a.if&&(s=!0),a=a.parent}var c=Object.keys(i).map(function(e){return function e(i,r){var o=i.attrsMap["slot-scope"];if(i.if&&!i.ifProcessed&&!o)return n5(i,r,e,"null");if(i.for&&!i.forProcessed)return nq(i,r,e);var s=i.slotScope===ah?"":i.slotScope+"",a="function(".concat(s,"){")+"return ".concat("template"===i.tag?i.if&&o?"(".concat(i.if,")?").concat(nZ(i,r)||"undefined",":undefined"):nZ(i,r)||"undefined":nG(i,r),"}");return"{key:".concat(i.slotTarget||'"default"',",fn:").concat(a).concat(s?"":",proxy:true","}")}(i[e],r)}).join(",");return"scopedSlots:_u([".concat(c,"]").concat(o?",null,true":"").concat(!o&&s?",null,false,".concat(function(e){for(var i=5381,r=e.length;r;)i=33*i^e.charCodeAt(--r);return i>>>0}(c)):"",")")}(e,e.scopedSlots,i),",")),e.model&&(r+="model:{value:".concat(e.model.value,",callback:").concat(e.model.callback,",expression:").concat(e.model.expression,"},")),e.inlineTemplate){var a=function(e,i){var r=e.children[0];if((1!==e.children.length||1!==r.type)&&i.warn("Inline-template components must have exactly one child element.",{start:e.start}),r&&1===r.type){var o=n4(r,i.options);return"inlineTemplate:{render:function(){".concat(o.render,"},staticRenderFns:[").concat(o.staticRenderFns.map(function(e){return"function(){".concat(e,"}")}).join(","),"]}")}}(e,i);a&&(r+="".concat(a,","))}return r=r.replace(/,$/,"")+"}",e.dynamicAttrs&&(r="_b(".concat(r,',"').concat(e.tag,'",').concat(it(e.dynamicAttrs),")")),e.wrapData&&(r=e.wrapData(r)),e.wrapListeners&&(r=e.wrapListeners(r)),r}function nZ(e,i,r,o,s){var a=e.children;if(a.length){var c=a[0];if(1===a.length&&c.for&&"template"!==c.tag&&"slot"!==c.tag){var l=r?i.maybeComponent(c)?",1":",0":"";return"".concat((o||nG)(c,i)).concat(l)}var u=r?function(e,i){for(var r,o=0,s=0;s<e.length;s++)if(1===(r=e[s]).type){if(nJ(r)||r.ifConditions&&r.ifConditions.some(function(e){return nJ(e.block)})){o=2;break}(i(r)||r.ifConditions&&r.ifConditions.some(function(e){return i(e.block)}))&&(o=1)}return o}(a,i.maybeComponent):0;return"[".concat(a.map(function(e){return(s||nQ)(e,i)}).join(","),"]").concat(u?",".concat(u):"")}}function nJ(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function nQ(e,i){var r,o;return 1===e.type?nG(e,i):3===e.type&&e.isComment?(r=e,"_e(".concat(JSON.stringify(r.text),")")):(o=e,"_v(".concat(2===o.type?o.expression:ie(JSON.stringify(o.text)),")"))}function it(e){for(var i="",r="",o=0;o<e.length;o++){var s=e[o],a=ie(s.value);s.dynamic?r+="".concat(s.name,",").concat(a,","):i+='"'.concat(s.name,'":').concat(a,",")}return i="{".concat(i.slice(0,-1),"}"),r?"_d(".concat(i,",[").concat(r.slice(0,-1),"])"):i}function ie(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function ii(e,i,r,o){var s=e.replace(a0,""),a=s.match(aT);a&&"$"!==s.charAt(a.index-1)&&r("avoid using JavaScript unary operator as property name: "+'"'.concat(a[0],'" in expression ').concat(i.trim()),o),is(e,i,r,o)}function ir(e,i,r,o){is(e.for||"",i,r,o),io(e.alias,"v-for alias",i,r,o),io(e.iterator1,"v-for iterator",i,r,o),io(e.iterator2,"v-for iterator",i,r,o)}function io(e,i,r,o,s){if("string"==typeof e)try{Function("var ".concat(e,"=_"))}catch(a){o("invalid ".concat(i,' "').concat(e,'" in expression: ').concat(r.trim()),s)}}function is(e,i,r,o){try{Function("return ".concat(e))}catch(s){var a=e.replace(a0,"").match(aS);r(a?"avoid using JavaScript keyword as property name: "+'"'.concat(a[0],'"\n  Raw expression: ').concat(i.trim()):"invalid expression: ".concat(s.message," in\n\n")+"    ".concat(e,"\n\n")+"  Raw expression: ".concat(i.trim(),"\n"),o)}}function ia(e,i,r,o){try{Function(e,"")}catch(s){r("invalid function parameter expression: ".concat(s.message," in\n\n")+"    ".concat(e,"\n\n")+"  Raw expression: ".concat(i.trim(),"\n"),o)}}function ic(e,i){var r="";if(0<i)for(;1&i&&(r+=e),!(0>=(i>>>=1));)e+=e;return r}function il(e,i){try{return Function(e)}catch(r){return i.push({err:r,code:e}),T}}function iu(e){return(sI=sI||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',0<sI.innerHTML.indexOf("&#10;")}var ih=Object.freeze({}),id=Array.isArray,ip=Object.prototype.toString,ig=y("slot,component",!0),iv=y("key,ref,slot,slot-scope,is"),im=Object.prototype.hasOwnProperty,i$=/-(\w)/g,iy=C(function(e){return e.replace(i$,function(e,i){return i?i.toUpperCase():""})}),i8=C(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),ib=/\B([A-Z])/g,ix=C(function(e){return e.replace(ib,"-$1").toLowerCase()}),iC=Function.prototype.bind?function(e,i){return e.bind(i)}:function(e,i){function r(r){var o=arguments.length;return o?1<o?e.apply(i,arguments):e.call(i,r):e.call(i)}return r._length=e.length,r},i_=function(){return!1},iw=function(e){return e},iS="data-server-rendered",iT=["component","directive","filter"],i0=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],iO={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:i_,isReservedAttr:i_,isUnknownElement:i_,getTagNamespace:T,parsePlatformTagName:iw,mustUseProp:i_,async:!0,_lifecycleHooks:i0},ik=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/,iP=RegExp("[^".concat(ik.source,".$_\\d]")),iE="__proto__"in{},iA="undefined"!=typeof window,iD=iA&&window.navigator.userAgent.toLowerCase(),iL=iD&&/msie|trident/.test(iD),ij=iD&&0<iD.indexOf("msie 9.0"),iI=iD&&0<iD.indexOf("edge/");iD&&iD.indexOf("android");var iF=iD&&/iphone|ipad|ipod|ios/.test(iD);iD&&/chrome\/\d+/.test(iD),iD&&/phantomjs/.test(iD);var iM=iD&&iD.match(/firefox\/(\d+)/),iR={}.watch,i3=!1;if(iA)try{var iB={};Object.defineProperty(iB,"passive",{get:function(){i3=!0}}),window.addEventListener("test-passive",null,iB)}catch(i1){}var i2,iz,iU=function(){return void 0===i2&&(i2=!iA&&void 0!==s&&s.process&&"server"===s.process.env.VUE_ENV),i2},iY=iA&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,i9="undefined"!=typeof Symbol&&L(Symbol)&&"undefined"!=typeof Reflect&&L(Reflect.ownKeys);iz="undefined"!=typeof Set&&L(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var iN,iW=null,iV=function(){function e(e,i,r,o,s,a,c,l){this.tag=e,this.data=i,this.children=r,this.text=o,this.elm=s,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=i&&i.key,this.componentOptions=c,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=l,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(e.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),e}(),iH=function(e){void 0===e&&(e="");var i=new iV;return i.text=e,i.isComment=!0,i},iX=y("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,require"),i4=function(e,i){os('Property or method "'.concat(i,'" is not defined on the instance but ')+"referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://v2.vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.",e)},iG=function(e,i){os('Property "'.concat(i,'" must be accessed with "$data.').concat(i,'" because ')+'properties starting with "$" or "_" are not proxied in the Vue instance to prevent conflicts with Vue internals. See: https://v2.vuejs.org/v2/api/#data',e)},i6="undefined"!=typeof Proxy&&L(Proxy);if(i6){var i7=y("stop,prevent,self,ctrl,shift,alt,meta,exact");iO.keyCodes=new Proxy(iO.keyCodes,{set:function(e,i,r){return i7(i)?(os("Avoid overwriting built-in modifier in config.keyCodes: .".concat(i)),!1):(e[i]=r,!0)}})}var i5={has:function(e,i){var r=i in e,o=iX(i)||"string"==typeof i&&"_"===i.charAt(0)&&!(i in e.$data);return r||o||(i in e.$data?iG(e,i):i4(e,i)),r||!o}},iq={get:function(e,i){return"string"!=typeof i||i in e||(i in e.$data?iG(e,i):i4(e,i)),e[i]}};iN=function(e){if(i6){var i=e.$options,r=i.render&&i.render._withStripped?iq:i5;e._renderProxy=new Proxy(e,r)}else e._renderProxy=e};var iK=function(){return(iK=Object.assign||function(e){for(var i,r=1,o=arguments.length;r<o;r++)for(var s in i=arguments[r])Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);return e}).apply(this,arguments)},iZ=0,iJ=function(){function e(){this.id=iZ++,this.subs=[]}return e.prototype.addSub=function(e){this.subs.push(e)},e.prototype.removeSub=function(e){b(this.subs,e)},e.prototype.depend=function(i){e.target&&(e.target.addDep(this),i&&e.target.onTrack&&e.target.onTrack(iK({effect:e.target},i)))},e.prototype.notify=function(e){var i=this.subs.slice();iO.async||i.sort(function(e,i){return e.id-i.id});for(var r=0,o=i.length;r<o;r++){if(e){var s=i[r];s.onTrigger&&s.onTrigger(iK({effect:i[r]},e))}i[r].update()}},e}();iJ.target=null;var iQ=[],rt=Array.prototype,re=Object.create(rt);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var i=rt[e];D(re,e,function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var s,a=i.apply(this,r),c=this.__ob__;return"push"===e||"unshift"===e?s=r:"splice"===e&&(s=r.slice(2)),s&&c.observeArray(s),c.dep.notify({type:"array mutation",target:this,key:e}),a})});var rn,ri,rr=Object.getOwnPropertyNames(re),ro={},rs=!0,ra={notify:T,depend:T,addSub:T,removeSub:T},rc=function(){function e(e,i,r){if(void 0===i&&(i=!1),void 0===r&&(r=!1),this.value=e,this.shallow=i,this.mock=r,this.dep=r?ra:new iJ,this.vmCount=0,D(e,"__ob__",this),id(e)){if(!r){if(iE)e.__proto__=re;else for(var o=0,s=rr.length;o<s;o++)D(e,a=rr[o],re[a])}i||this.observeArray(e)}else{var a,c=Object.keys(e);for(o=0;o<c.length;o++)U(e,a=c[o],ro,void 0,i,r)}}return e.prototype.observeArray=function(e){for(var i=0,r=e.length;i<r;i++)z(e[i],!1,this.mock)},e}(),rl="__v_isRef",ru="__v_rawToReadonly",rh="__v_rawToShallowReadonly",rf=iA&&window.performance;rf&&rf.mark&&rf.measure&&rf.clearMarks&&rf.clearMeasures&&(rn=function(e){return rf.mark(e)},ri=function(e,i,r){rf.measure(e,i,r),rf.clearMarks(i),rf.clearMarks(r)});var rd,rp=C(function(e){var i="&"===e.charAt(0),r="~"===(e=i?e.slice(1):e).charAt(0),o="!"===(e=r?e.slice(1):e).charAt(0);return{name:e=o?e.slice(1):e,once:r,capture:o,passive:i}}),rg=1,rv=2,rm=null,r$=null,ry=!1,r8=100,rb=[],rx=[],rC={},r_={},rw=!1,rS=!1,rT=0,r0=0,rO=Date.now;if(iA&&!iL){var rk=window.performance;rk&&"function"==typeof rk.now&&rO()>document.createEvent("Event").timeStamp&&(rO=function(){return rk.now()})}var rP,rE,rA=function(e,i){if(e.post){if(!i.post)return 1}else if(i.post)return -1;return e.id-i.id},rD="watcher",rL="".concat(rD," callback"),rj="".concat(rD," getter"),rI="".concat(rD," cleanup"),rF={},rM=function(){function e(e){void 0===e&&(e=!1),this.active=!0,this.effects=[],this.cleanups=[],!e&&rP&&(this.parent=rP,this.index=(rP.scopes||(rP.scopes=[])).push(this)-1)}return e.prototype.run=function(e){if(this.active){var i=rP;try{return rP=this,e()}finally{rP=i}}else os("cannot run an inactive effect scope.")},e.prototype.on=function(){rP=this},e.prototype.off=function(){rP=this.parent},e.prototype.stop=function(e){if(this.active){var i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].teardown();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(this.parent&&!e){var o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}},e}(),rR=!1,r3=[],rB=!1;if("undefined"!=typeof Promise&&L(Promise)){var r1=Promise.resolve();rE=function(){r1.then(t4),iF&&setTimeout(T)},rR=!0}else if(iL||"undefined"==typeof MutationObserver||!L(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())rE=void 0!==a&&L(a)?function(){a(t4)}:function(){setTimeout(t4,0)};else{var r2=1,rz=new MutationObserver(t4),rU=document.createTextNode(r2+"");rz.observe(rU,{characterData:!0}),rE=function(){r2=(r2+1)%2,rU.data=r2+""},rR=!0}var rY=t6("beforeMount"),r9=t6("mounted"),rN=t6("beforeUpdate"),rW=t6("updated"),rV=t6("beforeDestroy"),rH=t6("destroyed"),rX=t6("activated"),r4=t6("deactivated"),rG=t6("serverPrefetch"),r6=t6("renderTracked"),r7=t6("renderTriggered"),r5=t6("errorCaptured"),rq=Object.freeze({__proto__:null,version:"2.7.10",defineComponent:function(e){return e},ref:function(e){return Z(e,!1)},shallowRef:function(e){return Z(e,!0)},isRef:K,toRef:Q,toRefs:function(e){H(e)||os("toRefs() expects a reactive object but received a plain one.");var i=id(e)?Array(e.length):{};for(var r in e)i[r]=Q(e,r);return i},unref:function(e){return K(e)?e.value:e},proxyRefs:function(e){if(H(e))return e;for(var i={},r=Object.keys(e),o=0;o<r.length;o++)J(i,e,r[o]);return i},customRef:function(e){var i=new iJ,r=e(function(){i.depend({target:a,type:"get",key:"value"})},function(){i.notify({target:a,type:"set",key:"value"})}),o=r.get,s=r.set,a={get value(){return o()},set value(t){s(t)}};return D(a,rl,!0),a},triggerRef:function(e){e.dep||os("received object is not a triggerable ref."),e.dep&&e.dep.notify({type:"set",target:e,key:"value"})},reactive:function(e){return V(e,!1),e},isReactive:H,isReadonly:G,isShallow:X,isProxy:function(e){return H(e)||G(e)},shallowReactive:W,markRaw:function(e){return D(e,"__v_skip",!0),e},toRaw:function e(i){var r=i&&i.__v_raw;return r?e(r):i},readonly:tt,shallowReadonly:function(e){return te(e,!0)},computed:function(e,i){var r,o,s=l(e);s?(r=e,o=function(){os("Write operation failed: computed value is readonly")}):(r=e.get,o=e.set);var a=iU()?null:new rJ(iW,r,T,{lazy:!0});a&&i&&(a.onTrack=i.onTrack,a.onTrigger=i.onTrigger);var c={effect:a,get value(){return a?(a.dirty&&a.evaluate(),iJ.target&&(iJ.target.onTrack&&iJ.target.onTrack({effect:iJ.target,target:c,type:"get",key:"value"}),a.depend()),a.value):r()},set value(t){o(t)}};return D(c,rl,!0),D(c,"__v_isReadonly",s),c},watch:function(e,i,r){return"function"!=typeof i&&os("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),t9(e,i,r)},watchEffect:function(e,i){return t9(e,null,i)},watchPostEffect:tY,watchSyncEffect:function(e,i){return t9(e,null,iK(iK({},i),{flush:"sync"}))},EffectScope:rM,effectScope:function(e){return new rM(e)},onScopeDispose:function(e){rP?rP.cleanups.push(e):os("onScopeDispose() is called when there is no active effect scope to be associated with.")},getCurrentScope:function(){return rP},provide:function(e,i){iW?tN(iW)[e]=i:os("provide() can only be used inside setup().")},inject:function(e,i,r){void 0===r&&(r=!1);var o=iW;if(o){var s=o.$parent&&o.$parent._provided;if(s&&e in s)return s[e];if(1<arguments.length)return r&&l(i)?i.call(o):i;os('injection "'.concat(e+"",'" not found.'))}else os("inject() can only be used inside setup() or functional components.")},h:function(e,i,r){return iW||os("globally imported h() can only be invoked when there is an active component instance, e.g. synchronously in a component's render or setup function."),tl(iW,e,i,r,2,!0)},getCurrentInstance:function(){return iW&&{proxy:iW}},useSlots:function(){return tD().slots},useAttrs:function(){return tD().attrs},useListeners:function(){return tD().listeners},mergeDefaults:function(e,i){var r=id(e)?e.reduce(function(e,i){return e[i]={},e},{}):e;for(var o in i){var s=r[o];s?id(s)||l(s)?r[o]={type:s,default:i[o]}:s.default=i[o]:null===s?r[o]={default:i[o]}:os('props default key "'.concat(o,'" has no corresponding declaration.'))}return r},nextTick:tG,set:Y,del:N,useCssModule:function(){return os("useCssModule() is not supported in the global build."),ih},useCssVars:function(e){if(iA){var i=iW;return i?void tY(function(){var r=i.$el,o=e(i,i._setupProxy);if(r&&1===r.nodeType){var s=r.style;for(var a in o)s.setProperty("--".concat(a),o[a])}}):void os("useCssVars is called without current active component instance.")}},defineAsyncComponent:function(e){l(e)&&(e={loader:e});var i=e.loader,r=e.loadingComponent,o=e.errorComponent,s=e.delay,a=void 0===s?200:s,c=e.timeout,h=e.suspensible,f=e.onError;void 0!==h&&h&&os("The suspensiblbe option for async components is not supported in Vue2. It is ignored.");var d=null,p=0,g=function(){var e;return d||(e=d=i().catch(function(e){if(e=e instanceof Error?e:Error(e+""),f)return new Promise(function(i,r){f(e,function(){return i((p++,d=null,g()))},function(){return r(e)},p+1)});throw e}).then(function(i){if(e!==d&&d)return d;if(i||os("Async component loader resolved to undefined. If you are using retry(), make sure to return its return value."),i&&(i.__esModule||"Module"===i[Symbol.toStringTag])&&(i=i.default),i&&!u(i)&&!l(i))throw Error("Invalid async component load result: ".concat(i));return i}))};return function(){return{component:g(),delay:a,timeout:c,error:o,loading:r}}},onBeforeMount:rY,onMounted:r9,onBeforeUpdate:rN,onUpdated:rW,onBeforeUnmount:rV,onUnmounted:rH,onActivated:rX,onDeactivated:r4,onServerPrefetch:rG,onRenderTracked:r6,onRenderTriggered:r7,onErrorCaptured:function(e,i){void 0===i&&(i=iW),r5(e,i)}}),rK=new iz,rZ=0,rJ=function(){function e(e,i,r,o,s){var a,c;a=this,void 0===(c=rP&&!rP._vm?rP:e?e._scope:void 0)&&(c=rP),c&&c.active&&c.effects.push(a),(this.vm=e)&&s&&(e._watcher=this),o?(this.deep=!!o.deep,this.user=!!o.user,this.lazy=!!o.lazy,this.sync=!!o.sync,this.before=o.before,this.onTrack=o.onTrack,this.onTrigger=o.onTrigger):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++rZ,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new iz,this.newDepIds=new iz,this.expression=i.toString(),l(i)?this.getter=i:(this.getter=function(e){if(!iP.test(e)){var i=e.split(".");return function(e){for(var r=0;r<i.length;r++){if(!e)return;e=e[i[r]]}return e}}}(i),this.getter||(this.getter=T,os('Failed watching path: "'.concat(i,'" ')+"Watcher only accepts simple dot-delimited paths. For full control, use a function instead.",e))),this.value=this.lazy?void 0:this.get()}return e.prototype.get=function(){M(this);var e,i=this.vm;try{e=this.getter.call(i,i)}catch(r){if(!this.user)throw r;tW(r,i,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&t7(e),R(),this.cleanupDeps()}return e},e.prototype.addDep=function(e){var i=e.id;this.newDepIds.has(i)||(this.newDepIds.add(i),this.newDeps.push(e),this.depIds.has(i)||e.addSub(this))},e.prototype.cleanupDeps=function(){for(var e,i=this.deps.length;i--;)e=this.deps[i],this.newDepIds.has(e.id)||e.removeSub(this);var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},e.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():tU(this)},e.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var i=this.value;if(this.value=e,this.user){var r='callback for watcher "'.concat(this.expression,'"');tV(this.cb,this.vm,[e,i],this.vm,r)}else this.cb.call(this.vm,e,i)}}},e.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},e.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},e.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&b(this.vm._scope.effects,this),this.active){for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},e}(),rQ={enumerable:!0,configurable:!0,get:T,set:T},ot={lazy:!0},oe=0;tC(ee.prototype);var on,oi,or={init:function(e,r){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var o,s,a,c,l=e;or.prepatch(l,l)}else(e.componentInstance=(o=e,s=r$,a={_isComponent:!0,_parentVnode:o,parent:s},i(c=o.data.inlineTemplate)&&(a.render=c.render,a.staticRenderFns=c.staticRenderFns),new o.componentOptions.Ctor(a))).$mount(r?e.elm:void 0,r)},prepatch:function(e,i){var r=i.componentOptions;!function(e,i,r,o,s){ry=!0;var a=o.data.scopedSlots,c=e.$scopedSlots,l=a&&!a.$stable||c!==ih&&!c.$stable||a&&e.$scopedSlots.$key!==a.$key||!a&&e.$scopedSlots.$key,u=!!(s||e.$options._renderChildren||l),h=e.$vnode;e.$options._parentVnode=o,e.$vnode=o,e._vnode&&(e._vnode.parent=o),e.$options._renderChildren=s;var f=o.data.attrs||ih;e._attrsProxy&&tP(e._attrsProxy,f,h.data&&h.data.attrs||ih,e,"$attrs")&&(u=!0),e.$attrs=f,r=r||ih;var d=e.$options._parentListeners;if(e._listenersProxy&&tP(e._listenersProxy,r,d||ih,e,"$listeners"),e.$listeners=e.$options._parentListeners=r,tR(e,r,d),i&&e.$options.props){rs=p=!1;for(var p,g,v=e._props,m=e.$options._propKeys||[],$=0;$<m.length;$++){var y=m[$],b=e.$options.props;v[y]=eg(y,b,i,e)}rs=!0,e.$options.propsData=i}u&&(e.$slots=t_(s,o.context),e.$forceUpdate()),ry=!1}(i.componentInstance=e.componentInstance,r.propsData,r.listeners,i,r.children)},insert:function(e){var i,r=e.context,o=e.componentInstance;o._isMounted||(o._isMounted=!0,t2(o,"mounted")),e.data.keepAlive&&(r._isMounted?((i=o)._inactive=!1,rx.push(i)):t1(o,!0))},destroy:function(e){var i=e.componentInstance;i._isDestroyed||(e.data.keepAlive?function e(i,r){if(!(r&&(i._directInactive=!0,tB(i))||i._inactive)){i._inactive=!0;for(var o=0;o<i.$children.length;o++)e(i.$children[o]);t2(i,"deactivated")}}(i,!0):i.$destroy())}},oo=Object.keys(or),os=T,oa=T,oc="undefined"!=typeof console,ol=/(?:^|[-_])(\w)/g;os=function(e,i){void 0===i&&(i=iW);var r=i?on(i):"";iO.warnHandler?iO.warnHandler.call(null,e,i,r):oc&&!iO.silent&&console.error("[Vue warn]: ".concat(e).concat(r))},oa=function(e,i){oc&&!iO.silent&&console.warn("[Vue tip]: ".concat(e)+(i?on(i):""))},oi=function(e,i){if(e.$root===e)return"<Root>";var r,o=l(e)&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e,s=er(o),a=o.__file;if(!s&&a){var c=a.match(/([^/\\]+)\.vue$/);s=c&&c[1]}return(s?"<".concat((r=s).replace(ol,function(e){return e.toUpperCase()}).replace(/[-_]/g,""),">"):"<Anonymous>")+(a&&!1!==i?" at ".concat(a):"")},on=function(e){if(e._isVue&&e.$parent){for(var i=[],r=0;e;){if(0<i.length){var o=i[i.length-1];if(o.constructor===e.constructor){r++,e=e.$parent;continue}0<r&&(i[i.length-1]=[o,r],r=0)}i.push(e),e=e.$parent}return"\n\nfound in\n\n"+i.map(function(e,i){return"".concat(0===i?"---> ":function(e,i){for(var r="";i;)1==i%2&&(r+=e),1<i&&(e+=e),i>>=1;return r}(" ",5+2*i)).concat(id(e)?"".concat(oi(e[0]),"... (").concat(e[1]," recursive calls)"):oi(e))}).join("\n")}return"\n\n(found in ".concat(oi(e),")")};var ou=iO.optionMergeStrategies;ou.el=ou.propsData=function(e,i,r,o){return r||os('option "'.concat(o,'" can only be used during instance ')+"creation with the `new` keyword."),oy(e,i)},ou.data=function(e,i,r){return r?ec(e,i,r):i&&"function"!=typeof i?(os('The "data" option should be a function that returns a per-instance value in component definitions.',r),e):ec(e,i)},i0.forEach(function(e){ou[e]=el}),iT.forEach(function(e){ou[e+"s"]=eu}),ou.watch=function(e,i,r,o){if(e===iR&&(e=void 0),i===iR&&(i=void 0),!i)return Object.create(e||null);if(ef(o,i,r),!e)return i;var s={};for(var a in w(s,e),i){var c=s[a],l=i[a];c&&!id(c)&&(c=[c]),s[a]=c?c.concat(l):id(l)?l:[l]}return s},ou.props=ou.methods=ou.inject=ou.computed=function(e,i,r,o){if(i&&ef(o,i,r),!e)return i;var s=Object.create(null);return w(s,e),i&&w(s,i),s},ou.provide=ec;var oh,of,od,op,og,ov,om,o$,oy=function(e,i){return void 0===i?e:i},o8=/^(String|Number|Boolean|Function|Symbol|BigInt)$/,ob=/^\s*function (\w+)/,ox=["string","number","boolean"];ex.prototype._init=function(e){var i,r,o,s,a,c,f,p,g,v,m,$,y,b,C,_,w,S,O=this;O._uid=oe++,iO.performance&&rn&&(i="vue-perf-start:".concat(O._uid),r="vue-perf-end:".concat(O._uid),rn(i)),O._isVue=!0,O.__v_skip=!0,O._scope=new rM(!0),O._scope._vm=!0,e&&e._isComponent?(o=O,s=e,a=o.$options=Object.create(o.constructor.options),c=s._parentVnode,a.parent=s.parent,a._parentVnode=c,f=c.componentOptions,a.propsData=f.propsData,a._parentListeners=f.listeners,a._renderChildren=f.children,a._componentTag=f.tag,s.render&&(a.render=s.render,a.staticRenderFns=s.staticRenderFns)):O.$options=ed(et(O.constructor),e||{},O),iN(O),O._self=O,function(e){var i=e.$options,r=i.parent;if(r&&!i.abstract){for(;r.$options.abstract&&r.$parent;)r=r.$parent;r.$children.push(e)}e.$parent=r,e.$root=r?r.$root:e,e.$children=[],e.$refs={},e._provided=r?r._provided:Object.create(null),e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(O),(p=O)._events=Object.create(null),p._hasHookEvent=!1,(g=p.$options._parentListeners)&&tR(p,g),(v=O)._vnode=null,v._staticTrees=null,m=v.$options,y=($=v.$vnode=m._parentVnode)&&$.context,v.$slots=t_(m._renderChildren,y),v.$scopedSlots=$?tT(v.$parent,$.data.scopedSlots,v.$slots):ih,v._c=function(e,i,r,o){return tl(v,e,i,r,o,!1)},v.$createElement=function(e,i,r,o){return tl(v,e,i,r,o,!0)},U(v,"$attrs",(b=$&&$.data)&&b.attrs||ih,function(){ry||os("$attrs is readonly.",v)},!0),U(v,"$listeners",m._parentListeners||ih,function(){ry||os("$listeners is readonly.",v)},!0),t2(O,"beforeCreate",void 0,!1),(_=tQ((C=O).$options.inject,C))&&(rs=!1,Object.keys(_).forEach(function(e){U(C,e,_[e],function(){os("Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. "+'injection being mutated: "'.concat(e,'"'),C)})}),rs=!0),function e(i){var r=i.$options;if(r.props&&function(e,i){var r,o,s=e.$options.propsData||{},a=e._props=W({}),c=e.$options._propKeys=[],l=!e.$parent;l||(rs=o=!1);var u=function(r){c.push(r);var o=eg(r,i,s,e),u=ix(r);(iv(u)||iO.isReservedAttr(u))&&os('"'.concat(u,'" is a reserved attribute and cannot be used as component prop.'),e),U(a,r,o,function(){l||ry||os("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's "+'value. Prop being mutated: "'.concat(r,'"'),e)}),r in e||t5(e,"_props",r)};for(var h in i)u(h);rs=r=!0}(i,r.props),function(e){var i=e.$options,r=i.setup;if(r){var o=e._setupContext=tk(e);j(e),M();var s=tV(r,null,[e._props||W({}),o],e,"setup");if(R(),j(),l(s))i.render=s;else if(u(s)){if(s instanceof iV&&os("setup() should not return VNodes directly - return a render function instead."),e._setupState=s,s.__sfc){var a=e._setupProxy={};for(var c in s)"__sfc"!==c&&J(a,s,c)}else for(var c in s)A(c)?os("Avoid using variables that start with _ or $ in setup()."):J(e,s,c)}else void 0!==s&&os("setup() should return an object. Received: ".concat(null===s?"null":h(s)))}}(i),r.methods&&function(e,i){var r=e.$options.props;for(var o in i)"function"!=typeof i[o]&&os('Method "'.concat(o,'" has type "').concat(h(i[o]),'" in the component definition. ')+"Did you reference the function correctly?",e),r&&x(r,o)&&os('Method "'.concat(o,'" has already been defined as a prop.'),e),o in e&&A(o)&&os('Method "'.concat(o,'" conflicts with an existing Vue instance method. ')+"Avoid defining component methods that start with _ or $."),e[o]="function"==typeof i[o]?iC(i[o],e):T}(i,r.methods),r.data)!function(e){var i=e.$options.data;d(i=e._data=l(i)?function(e,i){M();try{return e.call(i,i)}catch(r){return tW(r,i,"data()"),{}}finally{R()}}(i,e):i||{})||(i={},os("data functions should return an object:\nhttps://v2.vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",e));for(var r,o=Object.keys(i),s=e.$options.props,a=e.$options.methods,c=o.length;c--;)r=o[c],a&&x(a,r)&&os('Method "'.concat(r,'" has already been defined as a data property.'),e),s&&x(s,r)?os('The data property "'.concat(r,'" is already declared as a prop. ')+"Use prop default value instead.",e):A(r)||t5(e,"_data",r);var u=z(i);u&&u.vmCount++}(i);else{var o=z(i._data={});o&&o.vmCount++}r.computed&&function(e,i){var r=e._computedWatchers=Object.create(null),o=iU();for(var s in i){var a=i[s],c=l(a)?a:a.get;null==c&&os('Getter is missing for computed property "'.concat(s,'".'),e),o||(r[s]=new rJ(e,c||T,T,ot)),s in e?s in e.$data?os('The computed property "'.concat(s,'" is already defined in data.'),e):e.$options.props&&s in e.$options.props?os('The computed property "'.concat(s,'" is already defined as a prop.'),e):e.$options.methods&&s in e.$options.methods&&os('The computed property "'.concat(s,'" is already defined as a method.'),e):tq(e,s,a)}}(i,r.computed),r.watch&&r.watch!==iR&&function(e,i){for(var r in i){var o=i[r];if(id(o))for(var s=0;s<o.length;s++)tJ(e,r,o[s]);else tJ(e,r,o)}}(i,r.watch)}(O),function(e){var i=e.$options.provide;if(i){var r=l(i)?i.call(e):i;if(!u(r))return;for(var o,s=tN(e),a=i9?Reflect.ownKeys(r):Object.keys(r),c=0;c<a.length;c++)Object.defineProperty(s,o=a[c],Object.getOwnPropertyDescriptor(r,o))}}(O),t2(O,"created"),iO.performance&&rn&&(O._name=oi(O,!1),rn(r),ri("vue ".concat(O._name," init"),i,r)),O.$options.el&&O.$mount(O.$options.el)},of=ex,op={get:function(){return this._props}},(od={get:function(){return this._data}}).set=function(){os("Avoid replacing instance root $data. Use nested data properties instead.",this)},op.set=function(){os("$props is readonly.",this)},Object.defineProperty(of.prototype,"$data",od),Object.defineProperty(of.prototype,"$props",op),of.prototype.$set=Y,of.prototype.$delete=N,of.prototype.$watch=function(e,i,r){if(d(i))return tJ(this,e,i,r);(r=r||{}).user=!0;var o=new rJ(this,e,i,r);if(r.immediate){var s='callback for immediate watcher "'.concat(o.expression,'"');M(),tV(i,this,[o.value],this,s),R()}return function(){o.teardown()}},og=ex,ov=/^hook:/,og.prototype.$on=function(e,i){var r=this;if(id(e))for(var o=0,s=e.length;o<s;o++)r.$on(e[o],i);else(r._events[e]||(r._events[e]=[])).push(i),ov.test(e)&&(r._hasHookEvent=!0);return r},og.prototype.$once=function(e,i){function r(){o.$off(e,r),i.apply(o,arguments)}var o=this;return r.fn=i,o.$on(e,r),o},og.prototype.$off=function(e,i){var r=this;if(!arguments.length)return r._events=Object.create(null),r;if(id(e)){for(var o=0,s=e.length;o<s;o++)r.$off(e[o],i);return r}var a=r._events[e];if(!a)return r;if(!i)return r._events[e]=null,r;for(var c,l=a.length;l--;)if((c=a[l])===i||c.fn===i){a.splice(l,1);break}return r},og.prototype.$emit=function(e){var i=e.toLowerCase();i!==e&&this._events[i]&&oa('Event "'.concat(i,'" is emitted in component ')+"".concat(oi(this),' but the handler is registered for "').concat(e,'". ')+"Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. "+'You should probably use "'.concat(ix(e),'" instead of "').concat(e,'".'));var r=this._events[e];if(r){r=1<r.length?_(r):r;for(var o=_(arguments,1),s='event handler for "'.concat(e,'"'),a=0,c=r.length;a<c;a++)tV(r[a],this,o,this,s)}return this},(om=ex).prototype._update=function(e,i){var r=this,o=r.$el,s=r._vnode,a=t3(r);r._vnode=e,r.$el=s?r.__patch__(s,e):r.__patch__(r.$el,e,i,!1),a(),o&&(o.__vue__=null),r.$el&&(r.$el.__vue__=r);for(var c=r;c&&c.$vnode&&c.$parent&&c.$vnode===c.$parent._vnode;)c.$parent.$el=c.$el,c=c.$parent},om.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},om.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){t2(e,"beforeDestroy"),e._isBeingDestroyed=!0;var i=e.$parent;!i||i._isBeingDestroyed||e.$options.abstract||b(i.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),t2(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}},o$=ex,tC(o$.prototype),o$.prototype.$nextTick=function(e){return tG(e,this)},o$.prototype._render=function(){var e,i=this,r=i.$options,o=r.render,s=r._parentVnode;s&&i._isMounted&&(i.$scopedSlots=tT(i.$parent,s.data.scopedSlots,i.$slots,i.$scopedSlots),i._slotsProxy&&tA(i._slotsProxy,i.$scopedSlots)),i.$vnode=s;try{j(i),rm=i,e=o.call(i._renderProxy,i.$createElement)}catch(a){if(tW(a,i,"render"),i.$options.renderError)try{e=i.$options.renderError.call(i._renderProxy,i.$createElement,a)}catch(c){tW(c,i,"renderError"),e=i._vnode}else e=i._vnode}finally{rm=null,j()}return id(e)&&1===e.length&&(e=e[0]),e instanceof iV||(id(e)&&os("Multiple root nodes returned from render function. Render function should return a single root node.",i),e=iH()),e.parent=s,e};var oC,o_,ow,oS,oT,o0,oO=[String,RegExp,Array];Object.defineProperty(oC=ex,"config",{get:function(){return iO},set:function(){os("Do not replace the Vue.config object, set individual fields instead.")}}),oC.util={warn:os,extend:w,mergeOptions:ed,defineReactive:U},oC.set=Y,oC.delete=N,oC.nextTick=tG,oC.observable=function(e){return z(e),e},oC.options=Object.create(null),iT.forEach(function(e){oC.options[e+"s"]=Object.create(null)}),oC.options._base=oC,w(oC.options.components,{KeepAlive:{name:"keep-alive",abstract:!0,props:{include:oO,exclude:oO,max:[String,Number]},methods:{cacheVNode:function(){var e=this.cache,i=this.keys,r=this.vnodeToCache,o=this.keyToCache;if(r){var s=r.tag,a=r.componentInstance,c=r.componentOptions;e[o]={name:eC(c),tag:s,componentInstance:a},i.push(o),this.max&&i.length>parseInt(this.max)&&eS(e,i[0],i,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)eS(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",function(i){ew(e,function(e){return e_(i,e)})}),this.$watch("exclude",function(i){ew(e,function(e){return!e_(i,e)})})},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,i=tj(e),r=i&&i.componentOptions;if(r){var o=eC(r),s=this.include,a=this.exclude;if(s&&(!o||!e_(s,o))||a&&o&&e_(a,o))return i;var c=this.cache,l=this.keys,u=null==i.key?r.Ctor.cid+(r.tag?"::".concat(r.tag):""):i.key;c[u]?(i.componentInstance=c[u].componentInstance,b(l,u),l.push(u)):(this.vnodeToCache=i,this.keyToCache=u),i.data.keepAlive=!0}return i||e&&e[0]}}}),oC.use=function(e){var i=this._installedPlugins||(this._installedPlugins=[]);if(-1<i.indexOf(e))return this;var r=_(arguments,1);return r.unshift(this),l(e.install)?e.install.apply(e,r):l(e)&&e.apply(null,r),i.push(e),this},oC.mixin=function(e){return this.options=ed(this.options,e),this},(oS=oC).cid=0,oT=1,oS.extend=function(e){e=e||{};var i=this,r=i.cid,o=e._Ctor||(e._Ctor={});if(o[r])return o[r];var s=er(e)||er(i.options);s&&eh(s);var a=function(e){this._init(e)};return(a.prototype=Object.create(i.prototype)).constructor=a,a.cid=oT++,a.options=ed(i.options,e),a.super=i,a.options.props&&function(e){var i=e.options.props;for(var r in i)t5(e.prototype,"_props",r)}(a),a.options.computed&&function(e){var i=e.options.computed;for(var r in i)tq(e.prototype,r,i[r])}(a),a.extend=i.extend,a.mixin=i.mixin,a.use=i.use,iT.forEach(function(e){a[e]=i[e]}),s&&(a.options.components[s]=a),a.superOptions=i.options,a.extendOptions=e,a.sealedOptions=w({},a.options),o[r]=a,a},o0=oC,iT.forEach(function(e){o0[e]=function(i,r){return r?("component"===e&&eh(i),"component"===e&&d(r)&&(r.name=r.name||i,r=this.options._base.extend(r)),"directive"===e&&l(r)&&(r={bind:r,update:r}),this.options[e+"s"][i]=r,r):this.options[e+"s"][i]}}),Object.defineProperty(ex.prototype,"$isServer",{get:iU}),Object.defineProperty(ex.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(ex,"FunctionalRenderContext",{value:ee}),ex.version="2.7.10";var ok,oP,oE,oA,oD,oL,oj,oI,oF,oM,oR=y("style,class"),o3=y("input,textarea,option,select,progress"),oB=function(e,i,r){return"value"===r&&o3(e)&&"button"!==i||"selected"===r&&"option"===e||"checked"===r&&"input"===e||"muted"===r&&"video"===e},o1=y("contenteditable,draggable,spellcheck"),o2=y("events,caret,typing,plaintext-only"),oz=function(e,i){return oW(i)||"false"===i?"false":"contenteditable"===e&&o2(i)?i:"true"},oU=y("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),oY="http://www.w3.org/1999/xlink",o9=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},oN=function(e){return o9(e)?e.slice(6,e.length):""},oW=function(e){return null==e||!1===e},oV={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},oH=y("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),oX=y("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),o4=function(e){return oH(e)||oX(e)},oG=Object.create(null),o6=y("text,number,password,search,email,tel,url"),o7=Object.freeze({__proto__:null,createElement:function(e,i){var r=document.createElement(e);return"select"===e&&i.data&&i.data.attrs&&void 0!==i.data.attrs.multiple&&r.setAttribute("multiple","multiple"),r},createElementNS:function(e,i){return document.createElementNS(oV[e],i)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,i,r){e.insertBefore(i,r)},removeChild:function(e,i){e.removeChild(i)},appendChild:function(e,i){e.appendChild(i)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,i){e.textContent=i},setStyleScope:function(e,i){e.setAttribute(i,"")}}),o5=new iV("",{},[]),oq=["create","activate","update","remove","destroy"],oK=Object.create(null),oZ=/[\w).+\-_$\]]/,oJ="__r",oQ="__c",st=rR&&!(iM&&53>=+iM[1]),se=C(function(e){var i={},r=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach(function(e){if(e){var o=e.split(r);1<o.length&&(i[o[0].trim()]=o[1].trim())}}),i}),sn=/^--/,si=/\s*!important$/,sr=function(e,i,r){if(sn.test(i))e.style.setProperty(i,r);else if(si.test(r))e.style.setProperty(ix(i),r.replace(si,""),"important");else{var o=ss(i);if(Array.isArray(r))for(var s=0,a=r.length;s<a;s++)e.style[o]=r[s];else e.style[o]=r}},so=["Webkit","Moz","ms"],ss=C(function(e){if(oM=oM||document.createElement("div").style,"filter"!==(e=iy(e))&&e in oM)return e;for(var i,r=e.charAt(0).toUpperCase()+e.slice(1),o=0;o<so.length;o++)if((i=so[o]+r)in oM)return i}),sa=/\s+/,sc=C(function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}}),sl=iA&&!ij,su="transition",sh="animation",sf="transition",sd="transitionend",sp="animation",sg="animationend";sl&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(sf="WebkitTransition",sd="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(sp="WebkitAnimation",sg="webkitAnimationEnd"));var sv=iA?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()},sm=/\b(transform|all)(,|$)/,s$=function(o){function s(e){var r=E.parentNode(e);i(r)&&E.removeChild(r,e)}function a(e,i){return!i&&!e.ns&&!(iO.ignoredElements.length&&iO.ignoredElements.some(function(i){return p(i)?i.test(e.tag):i===e.tag}))&&iO.isUnknownElement(e.tag)}function l(e,o,s,c,l,d,p){if(i(e.elm)&&i(d)&&(e=d[p]=F(e)),e.isRootInsert=!l,!function e(o,s,a,c){var l=o.data;if(i(l)){var f=i(o.componentInstance)&&l.keepAlive;if(i(l=l.hook)&&i(l=l.init)&&l(o,!1),i(o.componentInstance))return u(o,s),h(a,o.elm,c),r(f)&&function(e,r,o,s){for(var a,c=e;c.componentInstance;)if(i(a=(c=c.componentInstance._vnode).data)&&i(a=a.transition)){for(a=0;a<k.activate.length;++a)k.activate[a](o5,c);r.push(c);break}h(o,e.elm,s)}(o,s,a,c),!0}}(e,o,s,c)){var m=e.data,$=e.children,y=e.tag;i(y)?(m&&m.pre&&A++,a(e,A)&&os("Unknown custom element: <"+y+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',e.context),e.elm=e.ns?E.createElementNS(e.ns,y):E.createElement(y,e),v(e),f(e,$,o),i(m)&&g(e,o),h(s,e.elm,c),m&&m.pre&&A--):r(e.isComment)?(e.elm=E.createComment(e.text),h(s,e.elm,c)):(e.elm=E.createTextNode(e.text),h(s,e.elm,c))}}function u(e,r){i(e.data.pendingInsert)&&(r.push.apply(r,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,d(e)?(g(e,r),v(e)):(eE(e),r.push(e))}function h(e,r,o){i(e)&&(i(o)?E.parentNode(o)===e&&E.insertBefore(e,r,o):E.appendChild(e,r))}function f(e,i,r){if(id(i)){C(i);for(var o=0;o<i.length;++o)l(i[o],r,e.elm,null,!0,i,o)}else c(e.text)&&E.appendChild(e.elm,E.createTextNode(e.text+""))}function d(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return i(e.tag)}function g(e,r){for(var o=0;o<k.create.length;++o)k.create[o](o5,e);i(T=e.data.hook)&&(i(T.create)&&T.create(o5,e),i(T.insert)&&r.push(e))}function v(e){var r;if(i(r=e.fnScopeId))E.setStyleScope(e.elm,r);else for(var o=e;o;)i(r=o.context)&&i(r=r.$options._scopeId)&&E.setStyleScope(e.elm,r),o=o.parent;i(r=r$)&&r!==e.context&&r!==e.fnContext&&i(r=r.$options._scopeId)&&E.setStyleScope(e.elm,r)}function m(e,i,r,o,s,a){for(;o<=s;++o)l(r[o],a,e,i,!1,r,o)}function $(e){var r,o,s=e.data;if(i(s))for(i(r=s.hook)&&i(r=r.destroy)&&r(e),r=0;r<k.destroy.length;++r)k.destroy[r](e);if(i(r=e.children))for(o=0;o<e.children.length;++o)$(e.children[o])}function b(e,r,o){for(;r<=o;++r){var a=e[r];i(a)&&(i(a.tag)?(x(a),$(a)):s(a.elm))}}function x(e,r){if(i(r)||i(e.data)){var o,a=k.remove.length+1;for(i(r)?r.listeners+=a:r=function(e,i){function r(){0==--r.listeners&&s(e)}return r.listeners=i,r}(e.elm,a),i(o=e.componentInstance)&&i(o=o._vnode)&&i(o.data)&&x(o,r),o=0;o<k.remove.length;++o)k.remove[o](e,r);i(o=e.data.hook)&&i(o=o.remove)?o(e,r):r()}else s(e.elm)}function C(e){for(var r={},o=0;o<e.length;o++){var s=e[o],a=s.key;i(a)&&(r[a]?os("Duplicate keys detected: '".concat(a,"'. This may cause an update error."),s.context):r[a]=!0)}}function _(e,r,o,s){for(var a,c=o;c<s;c++)if(i(a=r[c])&&eD(e,a))return c}function w(e,o,s){if(r(s)&&i(e.parent))e.parent.data.pendingInsert=o;else for(var a=0;a<o.length;++a)o[a].data.hook.insert(o[a])}function S(e,o,s,c){var l,h,d,p,v=o.tag,m=o.data,$=o.children;if(c=c||m&&m.pre,o.elm=e,r(o.isComment)&&i(o.asyncFactory))return o.isAsyncPlaceholder=!0,!0;if(l=e,h=o,d=c,i(h.tag)?0!==h.tag.indexOf("vue-component")&&(!!a(h,d)||h.tag.toLowerCase()!==(l.tagName&&l.tagName.toLowerCase())):l.nodeType!==(h.isComment?8:3))return!1;if(i(m)&&(i(p=m.hook)&&i(p=p.init)&&p(o,!0),i(p=o.componentInstance)))return u(o,s),!0;if(i(v)){if(i($)){if(e.hasChildNodes()){if(i(p=m)&&i(p=p.domProps)&&i(p=p.innerHTML)){if(p!==e.innerHTML)return"undefined"==typeof console||D||(D=!0,console.warn("Parent: ",e),console.warn("server innerHTML: ",p),console.warn("client innerHTML: ",e.innerHTML)),!1}else{for(var y=!0,b=e.firstChild,x=0;x<$.length;x++){if(!b||!S(b,$[x],s,c)){y=!1;break}b=b.nextSibling}if(!y||b)return"undefined"==typeof console||D||(D=!0,console.warn("Parent: ",e),console.warn("Mismatching childNodes vs. VNodes: ",e.childNodes,$)),!1}}else f(o,$,s)}if(i(m)){var C=!1;for(var _ in m)if(!L(_)){C=!0,g(o,s);break}!C&&m.class&&t7(m.class)}}else e.data!==o.text&&(e.data=o.text);return!0}var T,O,k={},P=o.modules,E=o.nodeOps;for(T=0;T<oq.length;++T)for(k[oq[T]]=[],O=0;O<P.length;++O)i(P[O][oq[T]])&&k[oq[T]].push(P[O][oq[T]]);var A=0,D=!1,L=y("attrs,class,staticClass,staticStyle,key");return function(o,s,a,c){if(!e(s)){var u=!1,h=[];if(e(o))u=!0,l(s,h);else{var f,p=i(o.nodeType);if(!p&&eD(o,s))(function o(s,a,c,u,h,f){if(s!==a){i(a.elm)&&i(u)&&(a=u[null]=F(a));var p=a.elm=s.elm;if(r(s.isAsyncPlaceholder))return void(i(a.asyncFactory.resolved)?S(s.elm,a,c):a.isAsyncPlaceholder=!0);if(r(a.isStatic)&&r(s.isStatic)&&a.key===s.key&&(r(a.isCloned)||r(a.isOnce)))return void(a.componentInstance=s.componentInstance);var g,v=a.data;i(v)&&i(g=v.hook)&&i(g=g.prepatch)&&g(s,a);var $=s.children,y=a.children;if(i(v)&&d(a)){for(g=0;g<k.update.length;++g)k.update[g](s,a);i(g=v.hook)&&i(g=g.update)&&g(s,a)}e(a.text)?i($)&&i(y)?$!==y&&function r(s,a,c,u,h){var f,d,p,g=0,v=0,$=a.length-1,y=a[0],x=a[$],w=c.length-1,S=c[0],T=c[w],O=!h;for(C(c);g<=$&&v<=w;)e(y)?y=a[++g]:e(x)?x=a[--$]:eD(y,S)?(o(y,S,u,c,v),y=a[++g],S=c[++v]):eD(x,T)?(o(x,T,u,c,w),x=a[--$],T=c[--w]):eD(y,T)?(o(y,T,u,c,w),O&&E.insertBefore(s,y.elm,E.nextSibling(x.elm)),y=a[++g],T=c[--w]):eD(x,S)?(o(x,S,u,c,v),O&&E.insertBefore(s,x.elm,y.elm),x=a[--$],S=c[++v]):(e(f)&&(f=eL(a,g,$)),e(d=i(S.key)?f[S.key]:_(S,a,g,$))?l(S,u,s,y.elm,!1,c,v):eD(p=a[d],S)?(o(p,S,u,c,v),a[d]=void 0,O&&E.insertBefore(s,p.elm,y.elm)):l(S,u,s,y.elm,!1,c,v),S=c[++v]);g>$?m(s,e(c[w+1])?null:c[w+1].elm,c,v,w,u):v>w&&b(a,g,$)}(p,$,y,c,f):i(y)?(C(y),i(s.text)&&E.setTextContent(p,""),m(p,null,y,0,y.length-1,c)):i($)?b($,0,$.length-1):i(s.text)&&E.setTextContent(p,""):s.text!==a.text&&E.setTextContent(p,a.text),i(v)&&i(g=v.hook)&&i(g=g.postpatch)&&g(s,a)}})(o,s,h,null,null,c);else{if(p){if(1===o.nodeType&&o.hasAttribute(iS)&&(o.removeAttribute(iS),a=!0),r(a)){if(S(o,s,h))return w(s,h,!0),o;os("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}o=(f=o,new iV(E.tagName(f).toLowerCase(),{},[],void 0,f))}var g=o.elm,v=E.parentNode(g);if(l(s,h,g._leaveCb?null:v,E.nextSibling(g)),i(s.parent))for(var y=s.parent,x=d(s);y;){for(var T=0;T<k.destroy.length;++T)k.destroy[T](y);if(y.elm=s.elm,x){for(var O=0;O<k.create.length;++O)k.create[O](o5,y);var P=y.data.hook.insert;if(P.merged)for(var A=1;A<P.fns.length;A++)P.fns[A]()}else eE(y);y=y.parent}i(v)?b([o],0,0):i(o.tag)&&$(o)}}return w(s,h,u),s.elm}i(o)&&$(o)}}({nodeOps:o7,modules:[{create:eR,update:eR},{create:e1,update:e1},{create:no,update:no,destroy:function(e){return no(e,o5)}},{create:ns,update:ns},{create:nu,update:nu},iA?{create:nS,activate:nS,remove:function(e,i){!0===e.data.show?i():nx(e,i)}}:{},].concat([{create:function(e,i){eE(i)},update:function(e,i){e.data.ref!==i.data.ref&&(eE(e,!0),eE(i))},destroy:function(e){eE(e,!0)}},{create:ej,update:ej,destroy:function(e){ej(e,o5)}},])});ij&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&nA(e,"input")});var sy,s8={inserted:function(e,i,r,o){"select"===r.tag?(o.elm&&!o.elm._vOptions?to(r,"postpatch",function(){s8.componentUpdated(e,i,r)}):nT(e,i,r.context),e._vOptions=[].map.call(e.options,nk)):("textarea"===r.tag||o6(e.type))&&(e._vModifiers=i.modifiers,!i.modifiers.lazy&&(e.addEventListener("compositionstart",nP),e.addEventListener("compositionend",nE),e.addEventListener("change",nE),ij&&(e.vmodel=!0)))},componentUpdated:function(e,i,r){if("select"===r.tag){nT(e,i,r.context);var o=e._vOptions,s=e._vOptions=[].map.call(e.options,nk);s.some(function(e,i){return!O(e,o[i])})&&(e.multiple?i.value.some(function(e){return nO(e,s)}):i.value!==i.oldValue&&nO(i.value,s))&&nA(e,"change")}}},sb={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},sx=function(e){return e.tag||tS(e)},sC=function(e){return"show"===e.name},s_=w({tag:String,moveClass:String},sb);delete s_.mode,ex.config.mustUseProp=oB,ex.config.isReservedTag=o4,ex.config.isReservedAttr=oR,ex.config.getTagNamespace=ek,ex.config.isUnknownElement=function(e){if(!iA)return!0;if(o4(e))return!1;if(null!=oG[e=e.toLowerCase()])return oG[e];var i=document.createElement(e);return -1<e.indexOf("-")?oG[e]=i.constructor===window.HTMLUnknownElement||i.constructor===window.HTMLElement:oG[e]=/HTMLUnknownElement/.test(i.toString())},w(ex.options.directives,{model:s8,show:{bind:function(e,i,r){var o=i.value,s=(r=nD(r)).data&&r.data.transition,a=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;o&&s?(r.data.show=!0,nb(r,function(){e.style.display=a})):e.style.display=o?a:"none"},update:function(e,i,r){var o=i.value;!o!=!i.oldValue&&((r=nD(r)).data&&r.data.transition?(r.data.show=!0,o?nb(r,function(){e.style.display=e.__vOriginalDisplay}):nx(r,function(){e.style.display="none"})):e.style.display=o?e.__vOriginalDisplay:"none")},unbind:function(e,i,r,o,s){s||(e.style.display=e.__vOriginalDisplay)}}}),w(ex.options.components,{Transition:{name:"transition",props:sb,abstract:!0,render:function(e){var i=this,r=this.$slots.default;if(r&&(r=r.filter(sx)).length){1<r.length&&os("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var o=this.mode;o&&"in-out"!==o&&"out-in"!==o&&os("invalid <transition> mode: "+o,this.$parent);var s=r[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return s;var a=nL(s);if(!a)return s;if(this._leaving)return nI(e,s);var l="__transition-".concat(this._uid,"-");a.key=null==a.key?a.isComment?l+"comment":l+a.tag:c(a.key)?0===(a.key+"").indexOf(l)?a.key:l+a.key:a.key;var u,h,f=(a.data||(a.data={})).transition=nj(this),d=this._vnode,p=nL(d);if(a.data.directives&&a.data.directives.some(sC)&&(a.data.show=!0),p&&p.data&&(u=a,(h=p).key!==u.key||h.tag!==u.tag)&&!tS(p)&&(!p.componentInstance||!p.componentInstance._vnode.isComment)){var g=p.data.transition=w({},f);if("out-in"===o)return this._leaving=!0,to(g,"afterLeave",function(){i._leaving=!1,i.$forceUpdate()}),nI(e,s);if("in-out"===o){if(tS(a))return d;var v,m=function(){v()};to(f,"afterEnter",m),to(f,"enterCancelled",m),to(g,"delayLeave",function(e){v=e})}}return s}}},TransitionGroup:{props:s_,beforeMount:function(){var e=this,i=this._update;this._update=function(r,o){var s=t3(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,s(),i.call(e,r,o)}},render:function(e){for(var i=this.tag||this.$vnode.data.tag||"span",r=Object.create(null),o=this.prevChildren=this.children,s=this.$slots.default||[],a=this.children=[],c=nj(this),l=0;l<s.length;l++)if((f=s[l]).tag){if(null!=f.key&&0!==(f.key+"").indexOf("__vlist"))a.push(f),r[f.key]=f,(f.data||(f.data={})).transition=c;else{var u=f.componentOptions,h=u?er(u.Ctor.options)||u.tag||"":f.tag;os("<transition-group> children must be keyed: <".concat(h,">"))}}if(o){var f,d=[],p=[];for(l=0;l<o.length;l++)(f=o[l]).data.transition=c,f.data.pos=f.elm.getBoundingClientRect(),r[f.key]?d.push(f):p.push(f);this.kept=e(i,null,d),this.removed=p}return e(i,null,a)},updated:function(){var e=this.prevChildren,i=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,i)&&(e.forEach(nF),e.forEach(nM),e.forEach(nR),this._reflow=document.body.offsetHeight,e.forEach(function(e){if(e.data.moved){var r=e.elm,o=r.style;ng(r,i),o.transform=o.WebkitTransform=o.transitionDuration="",r.addEventListener(sd,r._moveCb=function e(o){o&&o.target!==r||(!o||/transform$/.test(o.propertyName))&&(r.removeEventListener(sd,e),r._moveCb=null,nv(r,i))})}}))},methods:{hasMove:function(e,i){if(!sl)return!1;if(this._hasMove)return this._hasMove;var r=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach(function(e){nf(r,e)}),nh(r,i),r.style.display="none",this.$el.appendChild(r);var o=n$(r);return this.$el.removeChild(r),this._hasMove=o.hasTransform}}}}),ex.prototype.__patch__=iA?s$:T,ex.prototype.$mount=function(e,i){return function(e,i,r){e.$el=i,e.$options.render||(e.$options.render=iH,e.$options.template&&"#"!==e.$options.template.charAt(0)||e.$options.el||i?os("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",e):os("Failed to mount component: template or render function not defined.",e)),t2(e,"beforeMount");var o=iO.performance&&rn?function(){var i=e._name,o=e._uid,s="vue-perf-start:".concat(o),a="vue-perf-end:".concat(o);rn(s);var c=e._render();rn(a),ri("vue ".concat(i," render"),s,a),rn(s),e._update(c,r),rn(a),ri("vue ".concat(i," patch"),s,a)}:function(){e._update(e._render(),r)};new rJ(e,o,T,{before:function(){e._isMounted&&!e._isDestroyed&&t2(e,"beforeUpdate")},onTrack:function(i){return t2(e,"renderTracked",[i])},onTrigger:function(i){return t2(e,"renderTriggered",[i])}},!0),r=!1;var s=e._preWatchers;if(s)for(var a=0;a<s.length;a++)s[a].run();return null==e.$vnode&&(e._isMounted=!0,t2(e,"mounted")),e}(this,e=e&&iA?eP(e):void 0,i)},iA&&setTimeout(function(){iO.devtools&&(iY?iY.emit("init",ex):console[console.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\nhttps://github.com/vuejs/vue-devtools")),!1!==iO.productionTip&&"undefined"!=typeof console&&console[console.info?"info":"log"]("You are running Vue in development mode.\nMake sure to turn on production mode when deploying for production.\nSee more tips at https://vuejs.org/guide/deployment.html")},0);var sw,sS,sT,s0,sO,sk,sP,sE,sA,sD,sL,sj,sI,sF=/\{\{((?:.|\r?\n)+?)\}\}/g,sM=/[-.*+?^${}()|[\]\/\\]/g,sR=C(function(e){var i=e[0].replace(sM,"\\$&"),r=e[1].replace(sM,"\\$&");return RegExp(i+"((?:.|\\n)+?)"+r,"g")}),s3=y("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),sB=y("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),s1=y("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),s2=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,sz=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+?\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,sU="[a-zA-Z_][\\-\\.0-9_a-zA-Z".concat(ik.source,"]*"),sY="((?:".concat(sU,"\\:)?").concat(sU,")"),s9=RegExp("^<".concat(sY)),sN=/^\s*(\/?)>/,sW=RegExp("^<\\/".concat(sY,"[^>]*>")),sV=/^<!DOCTYPE [^>]+>/i,sH=/^<!\--/,sX=/^<!\[/,s4=y("script,style,textarea",!0),sG={},s6={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"   ","&#39;":"'"},s7=/&(?:lt|gt|quot|amp|#39);/g,s5=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,sq=y("pre,textarea",!0),sK=function(e,i){return e&&sq(e)&&"\n"===i[0]},sZ=/^@|^v-on:/,sJ=/^v-|^@|^:|^#/,sQ=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,at=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,ae=/^\(|\)$/g,an=/^\[.*\]$/,ai=/:(.*)$/,ar=/^:|^\.|^v-bind:/,ao=/\.[^.\]]+(?=[^\]]*$)/g,as=/^v-slot(:|$)|^#/,aa=/[\r\n]/,ac=/[ \f\t\r\n]+/g,al=/[\s"'<>\/=]/,au=C(function(e){return(sw=sw||document.createElement("div")).innerHTML=e,sw.textContent}),ah="_empty_",af=/^xmlns:NS\d+/,ad=/^NS\d+:/,ap=[{staticKeys:["staticClass"],transformNode:function(e,i){var r=i.warn||eU,o=e6(e,"class");o&&n3(o,i.delimiters)&&r('class="'.concat(o,'": ')+'Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div class="{{ val }}">, use <div :class="val">.',e.rawAttrsMap.class),o&&(e.staticClass=JSON.stringify(o.replace(/\s+/g," ").trim()));var s=eG(e,"class",!1);s&&(e.classBinding=s)},genData:function(e){var i="";return e.staticClass&&(i+="staticClass:".concat(e.staticClass,",")),e.classBinding&&(i+="class:".concat(e.classBinding,",")),i}},{staticKeys:["staticStyle"],transformNode:function(e,i){var r=i.warn||eU,o=e6(e,"style");o&&(n3(o,i.delimiters)&&r('style="'.concat(o,'": ')+'Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div style="{{ val }}">, use <div :style="val">.',e.rawAttrsMap.style),e.staticStyle=JSON.stringify(se(o)));var s=eG(e,"style",!1);s&&(e.styleBinding=s)},genData:function(e){var i="";return e.staticStyle&&(i+="staticStyle:".concat(e.staticStyle,",")),e.styleBinding&&(i+="style:(".concat(e.styleBinding,"),")),i}},{preTransformNode:function(e,i){if("input"===e.tag){var r,o=e.attrsMap;if(o["v-model"]&&((o[":type"]||o["v-bind:type"])&&(r=eG(e,"type")),o.type||r||!o["v-bind"]||(r="(".concat(o["v-bind"],").type")),r)){var s=e6(e,"v-if",!0),a=s?"&&(".concat(s,")"):"",c=null!=e6(e,"v-else",!0),l=e6(e,"v-else-if",!0),u=nW(e);nz(u),eW(u,"type","checkbox"),n2(u,i),u.processed=!0,u.if="(".concat(r,")==='checkbox'")+a,nU(u,{exp:u.if,block:u});var h=nW(e);e6(h,"v-for",!0),eW(h,"type","radio"),n2(h,i),nU(u,{exp:"(".concat(r,")==='radio'")+a,block:h});var f=nW(e);return e6(f,"v-for",!0),eW(f,":type",r),n2(f,i),nU(u,{exp:s,block:f}),c?u.else=!0:l&&(u.elseif=l),u}}}},],ag={expectHTML:!0,modules:ap,directives:{model:function(e,i,r){oj=r;var o,s,a,c,l,u,h,f,d,p,g,v,m,$,y,b,x,C,_=i.value,w=i.modifiers,S=e.tag,T=e.attrsMap.type;if("input"===S&&"file"===T&&oj("<".concat(e.tag,' v-model="').concat(_,'" type="file">:\n')+"File inputs are read only. Use a v-on:change listener instead.",e.rawAttrsMap["v-model"]),e.component)return eq(e,_,w),!1;if("select"===S)o=e,s=_,c=(a=w)&&a.number,l='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;'+"return ".concat(c?"_n(val)":"val","})"),u="var $$selectedVal = ".concat(l,";"),u="".concat(u," ").concat(eK(s,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]")),eX(o,"change",u,null,!0);else if("input"===S&&"checkbox"===T)h=e,f=_,p=(d=w)&&d.number,g=eG(h,"value")||"null",v=eG(h,"true-value")||"true",m=eG(h,"false-value")||"false",e9(h,"checked","Array.isArray(".concat(f,")")+"?_i(".concat(f,",").concat(g,")>-1")+("true"===v?":(".concat(f,")"):":_q(".concat(f,",").concat(v,")"))),eX(h,"change","var $$a=".concat(f,",")+"$$el=$event.target,"+"$$c=$$el.checked?(".concat(v,"):(").concat(m,");")+"if(Array.isArray($$a)){"+"var $$v=".concat(p?"_n("+g+")":g,",")+"$$i=_i($$a,$$v);"+"if($$el.checked){$$i<0&&(".concat(eK(f,"$$a.concat([$$v])"),")}")+"else{$$i>-1&&(".concat(eK(f,"$$a.slice(0,$$i).concat($$a.slice($$i+1))"),")}")+"}else{".concat(eK(f,"$$c"),"}"),null,!0);else if("input"===S&&"radio"===T)$=e,y=_,x=(b=w)&&b.number,C=eG($,"value")||"null",C=x?"_n(".concat(C,")"):C,e9($,"checked","_q(".concat(y,",").concat(C,")")),eX($,"change",eK(y,C),null,!0);else if("input"===S||"textarea"===S)!function(e,i,r){var o=e.attrsMap.type,s=e.attrsMap["v-bind:value"]||e.attrsMap[":value"],a=e.attrsMap["v-bind:type"]||e.attrsMap[":type"];if(s&&!a){var c=e.attrsMap["v-bind:value"]?"v-bind:value":":value";oj("".concat(c,'="').concat(s,'" conflicts with v-model on the same element ')+"because the latter already expands to a value binding internally",e.rawAttrsMap[c])}var l=r||{},u=l.lazy,h=l.number,f=l.trim,d="$event.target.value";f&&(d="$event.target.value.trim()"),h&&(d="_n(".concat(d,")"));var p=eK(i,d);u||"range"===o||(p="if($event.target.composing)return;".concat(p)),e9(e,"value","(".concat(i,")")),eX(e,u?"change":"range"===o?oJ:"input",p,null,!0),(f||h)&&eX(e,"blur","$forceUpdate()")}(e,_,w);else{if(!iO.isReservedTag(S))return eq(e,_,w),!1;oj("<".concat(e.tag,' v-model="').concat(_,'">: ')+"v-model is not supported on this element type. If you are working with contenteditable, it's recommended to wrap a library dedicated for that purpose inside a custom component.",e.rawAttrsMap["v-model"])}return!0},text:function(e,i){i.value&&e9(e,"textContent","_s(".concat(i.value,")"),i)},html:function(e,i){i.value&&e9(e,"innerHTML","_s(".concat(i.value,")"),i)}},isPreTag:function(e){return"pre"===e},isUnaryTag:s3,mustUseProp:oB,canBeLeftOpenTag:sB,isReservedTag:o4,getTagNamespace:ek,staticKeys:(sy=ap).reduce(function(e,i){return e.concat(i.staticKeys||[])},[]).join(",")},av=C(function(e){return y("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}),am=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,a$=/\([^)]*?\);*$/,ay=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,a8={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},ab={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},ax=function(e){return"if(".concat(e,")return null;")},aC={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:ax("$event.target !== $event.currentTarget"),ctrl:ax("!$event.ctrlKey"),shift:ax("!$event.shiftKey"),alt:ax("!$event.altKey"),meta:ax("!$event.metaKey"),left:ax("'button' in $event && $event.button !== 0"),middle:ax("'button' in $event && $event.button !== 1"),right:ax("'button' in $event && $event.button !== 2")},a_={on:function(e,i){i.modifiers&&os("v-on without argument does not support modifiers."),e.wrapListeners=function(e){return"_g(".concat(e,",").concat(i.value,")")}},bind:function(e,i){e.wrapData=function(r){return"_b(".concat(r,",'").concat(e.tag,"',").concat(i.value,",").concat(i.modifiers&&i.modifiers.prop?"true":"false").concat(i.modifiers&&i.modifiers.sync?",true":"",")")}},cloak:T},aw=function(e){this.options=e,this.warn=e.warn||eU,this.transforms=eY(e.modules,"transformCode"),this.dataGenFns=eY(e.modules,"genData"),this.directives=w(w({},a_),e.directives);var i=e.isReservedTag||i_;this.maybeComponent=function(e){return!!e.component||!i(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1},aS=RegExp("\\bdo\\b|\\bif\\b|\\bfor\\b|\\blet\\b|\\bnew\\b|\\btry\\b|\\bvar\\b|\\bcase\\b|\\belse\\b|\\bwith\\b|\\bawait\\b|\\bbreak\\b|\\bcatch\\b|\\bclass\\b|\\bconst\\b|\\bsuper\\b|\\bthrow\\b|\\bwhile\\b|\\byield\\b|\\bdelete\\b|\\bexport\\b|\\bimport\\b|\\breturn\\b|\\bswitch\\b|\\bdefault\\b|\\bextends\\b|\\bfinally\\b|\\bcontinue\\b|\\bdebugger\\b|\\bfunction\\b|\\barguments\\b"),aT=RegExp("\\bdelete\\s*\\([^\\)]*\\)|\\btypeof\\s*\\([^\\)]*\\)|\\bvoid\\s*\\([^\\)]*\\)"),a0=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g,aO=function(e){var i,r;function o(i,r){var o=Object.create(e),s=[],a=[],c=function(e,i,r){(r?a:s).push(e)};if(r){if(r.outputSourceRange){var l=i.match(/^\s*/)[0].length;c=function(e,i,r){var o="string"==typeof e?{msg:e}:e;i&&(null!=i.start&&(o.start=i.start+l),null!=i.end&&(o.end=i.end+l)),(r?a:s).push(o)}}for(var u in r.modules&&(o.modules=(e.modules||[]).concat(r.modules)),r.directives&&(o.directives=w(Object.create(e.directives||null),r.directives)),r)"modules"!==u&&"directives"!==u&&(o[u]=r[u])}o.warn=c;var h,f,d,p,g,v,m,$,y=(h=i.trim(),f=o,d=function e(i,r){function o(e,i){m||(m=!0,sS(e,i))}function s(e){if(a(e),g||e.processed||(e=n2(e,r)),f.length||e===u||(u.if&&(e.elseif||e.else)?(c(e),nU(u,{exp:e.elseif,block:e})):o("Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.",{start:e.start})),h&&!e.forbidden){if(e.elseif||e.else){var i,s,l;i=e,(l=function(e){for(var i=e.length;i--;){if(1===e[i].type)return e[i];" "!==e[i].text&&sS('text "'.concat(e[i].text.trim(),'" between v-if and v-else(-if) ')+"will be ignored.",e[i]),e.pop()}}((s=h).children))&&l.if?nU(l,{exp:i.elseif,block:i}):sS("v-".concat(i.elseif?'else-if="'+i.elseif+'"':"else"," ")+"used on element <".concat(i.tag,"> without corresponding v-if."),i.rawAttrsMap[i.elseif?"v-else-if":"v-else"])}else{if(e.slotScope){var d=e.slotTarget||'"default"';(h.scopedSlots||(h.scopedSlots={}))[d]=e}h.children.push(e),e.parent=h}}e.children=e.children.filter(function(e){return!e.slotScope}),a(e),e.pre&&(g=!1),sP(e.tag)&&(v=!1);for(var p=0;p<sk.length;p++)sk[p](e,r)}function a(e){if(!v)for(var i;(i=e.children[e.children.length-1])&&3===i.type&&" "===i.text;)e.children.pop()}function c(e){("slot"===e.tag||"template"===e.tag)&&o("Cannot use <".concat(e.tag,"> as component root element because it may ")+"contain multiple nodes.",{start:e.start}),e.attrsMap.hasOwnProperty("v-for")&&o("Cannot use v-for on stateful component root element because it renders multiple elements.",e.rawAttrsMap["v-for"])}sS=r.warn||eU,sP=r.isPreTag||i_,sE=r.mustUseProp||i_,sA=r.getTagNamespace||i_;var l=r.isReservedTag||i_;sD=function(e){return!(!(e.component||e.attrsMap[":is"]||e.attrsMap["v-bind:is"])&&(e.attrsMap.is?l(e.attrsMap.is):l(e.tag)))},s0=eY(r.modules,"transformNode"),sO=eY(r.modules,"preTransformNode"),sk=eY(r.modules,"postTransformNode"),sT=r.delimiters;var u,h,f=[],d=!1!==r.preserveWhitespace,p=r.whitespace,g=!1,v=!1,m=!1;return function e(i,r){function o(e){d+=e,i=i.substring(e)}function s(e,i,o){var s,a;if(null==i&&(i=d),null==o&&(o=d),e)for(a=e.toLowerCase(),s=l.length-1;0<=s&&l[s].lowerCasedTag!==a;s--);else s=0;if(0<=s){for(var u=l.length-1;u>=s;u--)(u>s||!e)&&r.warn&&r.warn("tag <".concat(l[u].tag,"> has no matching end tag."),{start:l[u].start,end:l[u].end}),r.end&&r.end(l[u].tag,i,o);l.length=s,c=s&&l[s-1].tag}else"br"===a?r.start&&r.start(e,[],!0,i,o):"p"===a&&(r.start&&r.start(e,[],!1,i,o),r.end&&r.end(e,i,o))}for(var a,c,l=[],u=r.expectHTML,h=r.isUnaryTag||i_,f=r.canBeLeftOpenTag||i_,d=0;i&&"break"!==function(){if(a=i,c&&s4(c)){var e=0,p=c.toLowerCase(),g=sG[p]||(sG[p]=RegExp("([\\s\\S]*?)(</"+p+"[^>]*>)","i"));m=i.replace(g,function(i,o,s){return e=s.length,s4(p)||"noscript"===p||(o=o.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),sK(p,o)&&(o=o.slice(1)),r.chars&&r.chars(o),""}),d+=i.length-m.length,i=m,s(p,d-e,d)}else{var v,m,$,y=i.indexOf("<");if(0===y){if(sH.test(i)){var b=i.indexOf("-->");if(0<=b)return r.shouldKeepComment&&r.comment&&r.comment(i.substring(4,b),d,d+b+3),o(b+3),"continue"}if(sX.test(i)){var x=i.indexOf("]>");if(0<=x)return o(x+2),"continue"}var C=i.match(sV);if(C)return o(C[0].length),"continue";var _=i.match(sW);if(_){var w=d;return o(_[0].length),s(_[1],w,d),"continue"}var S=function(){var e=i.match(s9);if(e){var r,s,a={tagName:e[1],attrs:[],start:d};for(o(e[0].length);!(r=i.match(sN))&&(s=i.match(sz)||i.match(s2));)s.start=d,o(s[0].length),s.end=d,a.attrs.push(s);if(r)return a.unarySlash=r[1],o(r[0].length),a.end=d,a}}();if(S)return function e(i){var o=i.tagName,a=i.unarySlash;u&&("p"===c&&s1(o)&&s(c),f(o)&&c===o&&s(o));for(var d=h(o)||!!a,p=i.attrs.length,g=Array(p),v=0;v<p;v++){var m=i.attrs[v],$=m[3]||m[4]||m[5]||"",y="a"===o&&"href"===m[1]?r.shouldDecodeNewlinesForHref:r.shouldDecodeNewlines;g[v]={name:m[1],value:nB($,y)},r.outputSourceRange&&(g[v].start=m.start+m[0].match(/^\s*/).length,g[v].end=m.end)}d||(l.push({tag:o,lowerCasedTag:o.toLowerCase(),attrs:g,start:i.start,end:i.end}),c=o),r.start&&r.start(o,g,d,i.start,i.end)}(S),sK(S.tagName,i)&&o(1),"continue"}if(0<=y){for(m=i.slice(y);!(sW.test(m)||s9.test(m)||sH.test(m)||sX.test(m)||0>($=m.indexOf("<",1)));)y+=$,m=i.slice(y);v=i.substring(0,y)}0>y&&(v=i),v&&o(v.length),r.chars&&v&&r.chars(v,d-v.length,d)}return i===a?(r.chars&&r.chars(i),!l.length&&r.warn&&r.warn('Mal-formatted tag at end of template: "'.concat(i,'"'),{start:d+i.length}),"break"):void 0}(););s()}(i,{warn:sS,expectHTML:r.expectHTML,isUnaryTag:r.isUnaryTag,canBeLeftOpenTag:r.canBeLeftOpenTag,shouldDecodeNewlines:r.shouldDecodeNewlines,shouldDecodeNewlinesForHref:r.shouldDecodeNewlinesForHref,shouldKeepComment:r.comments,outputSourceRange:r.outputSourceRange,start:function(e,i,o,a,l){var d,p,m=h&&h.ns||sA(e);iL&&"svg"===m&&(i=function(e){for(var i,r=[],o=0;o<e.length;o++)i=e[o],af.test(i.name)||(i.name=i.name.replace(ad,""),r.push(i));return r}(i));var $,y=n1(e,i,h);m&&(y.ns=m),r.outputSourceRange&&(y.start=a,y.end=l,y.rawAttrsMap=y.attrsList.reduce(function(e,i){return e[i.name]=i,e},{})),i.forEach(function(e){al.test(e.name)&&sS("Invalid dynamic argument expression: attribute names cannot contain spaces, quotes, <, >, / or =.",r.outputSourceRange?{start:e.start+e.name.indexOf("["),end:e.start+e.name.length}:void 0)}),"style"!==($=y).tag&&("script"!==$.tag||$.attrsMap.type&&"text/javascript"!==$.attrsMap.type)||iU()||(y.forbidden=!0,sS("Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as "+"<".concat(e,">")+", as they will not be parsed.",{start:y.start}));for(var b=0;b<sO.length;b++)y=sO[b](y,r)||y;g||(d=y,null!=e6(d,"v-pre")&&(d.pre=!0),y.pre&&(g=!0)),sP(y.tag)&&(v=!0),g?function(e){var i=e.attrsList,r=i.length;if(r)for(var o=e.attrs=Array(r),s=0;s<r;s++)o[s]={name:i[s].name,value:JSON.stringify(i[s].value)},null!=i[s].start&&(o[s].start=i[s].start,o[s].end=i[s].end);else e.pre||(e.plain=!0)}(y):y.processed||(nz(y),function(e){var i=e6(e,"v-if");if(i)e.if=i,nU(e,{exp:i,block:e});else{null!=e6(e,"v-else")&&(e.else=!0);var r=e6(e,"v-else-if");r&&(e.elseif=r)}}(y),p=y,null!=e6(p,"v-once")&&(p.once=!0)),u||c(u=y),o?s(y):(h=y,f.push(y))},end:function(e,i,o){var a=f[f.length-1];f.length-=1,h=f[f.length-1],r.outputSourceRange&&(a.end=o),s(a)},chars:function(e,s,a){if(h){if(!iL||"textarea"!==h.tag||h.attrsMap.placeholder!==e){var c,l=h.children;if(e=v||e.trim()?"script"===(c=h).tag||"style"===c.tag?e:au(e):l.length?p?"condense"===p&&aa.test(e)?"":" ":d?" ":"":""){v||"condense"!==p||(e=e.replace(ac," "));var u=void 0,f=void 0;!g&&" "!==e&&(u=n3(e,sT))?f={type:2,expression:u.expression,tokens:u.tokens,text:e}:" "===e&&l.length&&" "===l[l.length-1].text||(f={type:3,text:e}),f&&(r.outputSourceRange&&(f.start=s,f.end=a),l.push(f))}}}else e===i?o("Component template requires a root element, rather than just text.",{start:s}):(e=e.trim())&&o('text "'.concat(e,'" outside root element will be ignored.'),{start:s})},comment:function(e,i,o){if(h){var s={type:3,text:e,isComment:!0};r.outputSourceRange&&(s.start=i,s.end=o),h.children.push(s)}}}),u}(h.trim(),f),!1!==f.optimize&&(p=d,g=f,p&&(sL=av(g.staticKeys||""),sj=g.isReservedTag||i_,function e(i){var r;if(i.static=2!==(r=i).type&&(3===r.type||!(!r.pre&&(r.hasBindings||r.if||r.for||ig(r.tag)||!sj(r.tag)||function(e){for(;e.parent&&"template"===(e=e.parent).tag;)if(e.for)return!0;return!1}(r)||!Object.keys(r).every(sL)))),1===i.type&&(sj(i.tag)||"slot"===i.tag||null!=i.attrsMap["inline-template"])){for(var o,s,a=0,c=i.children.length;a<c;a++)e(s=i.children[a]),s.static||(i.static=!1);if(i.ifConditions)for(a=1,c=i.ifConditions.length;a<c;a++)e(o=i.ifConditions[a].block),o.static||(i.static=!1)}}(p),function e(i,r){if(1===i.type){if((i.static||i.once)&&(i.staticInFor=r),i.static&&i.children.length&&(1!==i.children.length||3!==i.children[0].type))return void(i.staticRoot=!0);if(i.staticRoot=!1,i.children)for(var o=0,s=i.children.length;o<s;o++)e(i.children[o],r||!!i.for);if(i.ifConditions)for(o=1,s=i.ifConditions.length;o<s;o++)e(i.ifConditions[o].block,r)}}(p,!1))),v=n4(d,f),{ast:d,render:v.render,staticRenderFns:v.staticRenderFns});return m=y.ast,$=c,m&&function e(i,r){if(1===i.type){for(var o in i.attrsMap)if(sJ.test(o)){var s=i.attrsMap[o];if(s){var a=i.rawAttrsMap[o];"v-for"===o?ir(i,'v-for="'.concat(s,'"'),r,a):"v-slot"===o||"#"===o[0]?ia(s,"".concat(o,'="').concat(s,'"'),r,a):sZ.test(o)?ii(s,"".concat(o,'="').concat(s,'"'),r,a):is(s,"".concat(o,'="').concat(s,'"'),r,a)}}if(i.children)for(var c=0;c<i.children.length;c++)e(i.children[c],r)}else 2===i.type&&is(i.expression,i.text,r,i)}(m,$),y.errors=s,y.tips=a,y}return{compile:o,compileToFunctions:(i=o,r=Object.create(null),function(e,o,s){var a=(o=w({},o)).warn||os;delete o.warn;try{Function("return 1")}catch(c){c.toString().match(/unsafe-eval|CSP/)&&a("It seems you are using the standalone build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. The template compiler cannot work in this environment. Consider relaxing the policy to allow unsafe-eval or pre-compiling your templates into render functions.")}var l=o.delimiters?o.delimiters+""+e:e;if(r[l])return r[l];var u=i(e,o);u.errors&&u.errors.length&&(o.outputSourceRange?u.errors.forEach(function(i){a("Error compiling template:\n\n".concat(i.msg,"\n\n")+function(e,i,r){void 0===i&&(i=0),void 0===r&&(r=e.length);for(var o=e.split(/\r?\n/),s=0,a=[],c=0;c<o.length;c++)if((s+=o[c].length+1)>=i){for(var l=c-2;l<=c+2||r>s;l++)if(!(0>l||l>=o.length)){a.push("".concat(l+1).concat(ic(" ",3-(l+1+"").length),"|  ").concat(o[l]));var u=o[l].length;if(l===c){var h=i-(s-u)+1,f=r>s?u-h:r-i;a.push("   |  "+ic(" ",h)+ic("^",f))}else if(l>c){if(r>s){var d=Math.min(r-s,u);a.push("   |  "+ic("^",d))}s+=u+1}}break}return a.join("\n")}(e,i.start,i.end),s)}):a("Error compiling template:\n\n".concat(e,"\n\n")+u.errors.map(function(e){return"- ".concat(e)}).join("\n")+"\n",s)),u.tips&&u.tips.length&&(o.outputSourceRange?u.tips.forEach(function(e){return oa(e.msg,s)}):u.tips.forEach(function(e){return oa(e,s)}));var h={},f=[];return h.render=il(u.render,f),h.staticRenderFns=u.staticRenderFns.map(function(e){return il(e,f)}),u.errors&&u.errors.length||!f.length||a("Failed to generate render function:\n\n"+f.map(function(e){var i=e.err,r=e.code;return"".concat(i.toString()," in\n\n").concat(r,"\n")}).join("\n"),s),r[l]=h})}}(ag).compileToFunctions,ak=!!iA&&iu(!1),aP=!!iA&&iu(!0),aE=C(function(e){var i=eP(e);return i&&i.innerHTML}),aA=ex.prototype.$mount;return ex.prototype.$mount=function(e,i){if((e=e&&eP(e))===document.body||e===document.documentElement)return os("Do not mount Vue to <html> or <body> - mount to normal elements instead."),this;var r=this.$options;if(!r.render){var o=r.template;if(o){if("string"==typeof o)"#"!==o.charAt(0)||(o=aE(o))||os("Template element not found or is empty: ".concat(r.template),this);else{if(!o.nodeType)return os("invalid template option:"+o,this),this;o=o.innerHTML}}else e&&(o=function(e){if(e.outerHTML)return e.outerHTML;var i=document.createElement("div");return i.appendChild(e.cloneNode(!0)),i.innerHTML}(e));if(o){iO.performance&&rn&&rn("compile");var s=aO(o,{outputSourceRange:!0,shouldDecodeNewlines:ak,shouldDecodeNewlinesForHref:aP,delimiters:r.delimiters,comments:r.comments},this),a=s.render,c=s.staticRenderFns;r.render=a,r.staticRenderFns=c,iO.performance&&rn&&(rn("compile end"),ri("vue ".concat(this._name," compile"),"compile","compile end"))}}return aA.call(this,e,i)},ex.compile=aO,w(ex,rq),ex.effect=function(e,i){var r=new rJ(iW,e,T,{sync:!0});i&&(r.update=function(){i(function(){return r.run()})})},ex},"object"===h(i)&&void 0!==e?e.exports=u():void 0===(l="function"==typeof(c=u)?c.call(i,r,i,e):c)||(e.exports=l)}).call(this,r(4),r(10).setImmediate)},function(e,i,r){var o=r(21),s=r(22),a=s;a.v1=o,a.v4=s,e.exports=a},function(e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var r=new Uint8Array(16);e.exports=function(){return i(r),r}}else{var o=Array(16);e.exports=function(){for(var e,i=0;16>i;i++)0==(3&i)&&(e=4294967296*Math.random()),o[i]=255&e>>>((3&i)<<3);return o}}},function(e){for(var i=[],r=0;256>r;++r)i[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var o=r||0,s=i;return[s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]],"-",s[e[o++]],s[e[o++]],"-",s[e[o++]],s[e[o++]],"-",s[e[o++]],s[e[o++]],"-",s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]]].join("")}},function(e,i,r){r(26),e.exports=r(27)},function(e,i,r){(function(e){function o(e,i){this._id=e,this._clearFn=i}var s=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;i.setTimeout=function(){return new o(a.call(setTimeout,s,arguments),clearTimeout)},i.setInterval=function(){return new o(a.call(setInterval,s,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(s,this._id)},i.enroll=function(e,i){clearTimeout(e._idleTimeoutId),e._idleTimeout=i},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var i=e._idleTimeout;0<=i&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},i))},r(11),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(4))},function(e,i,r){(function(e,i){!function(e){"use strict";function r(e){delete f[e]}function o(e){if(d)setTimeout(o,0,e);else{var i=f[e];if(i){d=!0;try{!function(e){var i=e.callback,r=e.args;switch(r.length){case 0:i();break;case 1:i(r[0]);break;case 2:i(r[0],r[1]);break;case 3:i(r[0],r[1],r[2]);break;default:i.apply(void 0,r)}}(i)}finally{r(e),d=!1}}}}if(!e.setImmediate){var s,a,c,l,u,h=1,f={},d=!1,p=e.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(e);g=g&&g.setTimeout?g:e,"[object process]"===({}).toString.call(e.process)?s=function(e){i.nextTick(function(){o(e)})}:function(){if(e.postMessage&&!e.importScripts){var i=!0,r=e.onmessage;return e.onmessage=function(){i=!1},e.postMessage("","*"),e.onmessage=r,i}}()?(a="setImmediate$"+Math.random()+"$",c=function(i){i.source===e&&"string"==typeof i.data&&0===i.data.indexOf(a)&&o(+i.data.slice(a.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),s=function(i){e.postMessage(a+i,"*")}):e.MessageChannel?((l=new MessageChannel).port1.onmessage=function(e){o(e.data)},s=function(e){l.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(u=p.documentElement,s=function(e){var i=p.createElement("script");i.onreadystatechange=function(){o(e),i.onreadystatechange=null,u.removeChild(i),i=null},u.appendChild(i)}):s=function(e){setTimeout(o,0,e)},g.setImmediate=function(e){"function"!=typeof e&&(e=Function(""+e));for(var i=Array(arguments.length-1),r=0;r<i.length;r++)i[r]=arguments[r+1];var o={callback:e,args:i};return f[h]=o,s(h),h++},g.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(4),r(12))},function(e){function i(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(r){try{return u.call(null,e,0)}catch(o){return u.call(this,e,0)}}}function s(){g&&d&&(g=!1,d.length?p=d.concat(p):v=-1,p.length&&a())}function a(){if(!g){var e=o(s);g=!0;for(var i=p.length;i;){for(d=p,p=[];++v<i;)d&&d[v].run();v=-1,i=p.length}d=null,g=!1,function(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{h(e)}catch(i){try{return h.call(null,e)}catch(o){return h.call(this,e)}}}(e)}}function c(e,i){this.fun=e,this.array=i}function l(){}var u,h,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:i}catch(e){u=i}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(o){h=r}}();var d,p=[],g=!1,v=-1;f.nextTick=function(e){var i=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)i[r-1]=arguments[r];p.push(new c(e,i)),1!==p.length||g||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(){return[]},f.binding=function(){throw Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(){throw Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e){function i(e,i,r,o){return e.addEventListener||(i="on"+i),(e.addEventListener||e.attachEvent).call(e,i,r,o),r}e.exports=i,e.exports.on=i,e.exports.off=function(e,i,r,o){return e.removeEventListener||(i="on"+i),(e.removeEventListener||e.detachEvent).call(e,i,r,o),r}},function(e,i,r){"use strict";var o=Math.min,s=Math.floor,a=Math.pow;(function(e){function c(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,i){if(c()<i)throw RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(i)).__proto__=u.prototype:(null===e&&(e=new u(i)),e.length=i),e}function u(e,i,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,i,r);if("number"==typeof e){if("string"==typeof i)throw Error("If encoding is specified then the first argument must be a string");return d(this,e)}return h(this,e,i,r)}function h(e,i,r,o){if("number"==typeof i)throw TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer?function(e,i,r,o){if(i.byteLength,0>r||i.byteLength<r)throw RangeError("'offset' is out of bounds");if(i.byteLength<r+(o||0))throw RangeError("'length' is out of bounds");return i=void 0===r&&void 0===o?new Uint8Array(i):void 0===o?new Uint8Array(i,r):new Uint8Array(i,r,o),u.TYPED_ARRAY_SUPPORT?(e=i).__proto__=u.prototype:e=p(e,i),e}(e,i,r,o):"string"==typeof i?function(e,i,r){if(("string"!=typeof r||""===r)&&(r="utf8"),!u.isEncoding(r))throw TypeError('"encoding" must be a valid string encoding');var o=0|v(i,r),s=(e=l(e,o)).write(i,r);return s!==o&&(e=e.slice(0,s)),e}(e,i,r):function(e,i){if(u.isBuffer(i)){var r,o=0|g(i.length);return 0===(e=l(e,o)).length||i.copy(e,0,0,o),e}if(i){if("undefined"!=typeof ArrayBuffer&&i.buffer instanceof ArrayBuffer||"length"in i)return"number"!=typeof i.length||(r=i.length)!=r?l(e,0):p(e,i);if("Buffer"===i.type&&X(i.data))return p(e,i.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,i)}function f(e){if("number"!=typeof e)throw TypeError('"size" argument must be a number');if(0>e)throw RangeError('"size" argument must not be negative')}function d(e,i){if(f(i),e=l(e,0>i?0:0|g(i)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<i;++r)e[r]=0;return e}function p(e,i){var r=0>i.length?0:0|g(i.length);e=l(e,r);for(var o=0;o<r;o+=1)e[o]=255&i[o];return e}function g(e){if(e>=c())throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c().toString(16)+" bytes");return 0|e}function v(e,i){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var o=!1;;)switch(i){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(o)return U(e).length;i=(""+i).toLowerCase(),o=!0}}function m(e,i,r){var o=!1;if((void 0===i||0>i)&&(i=0),i>this.length||((void 0===r||r>this.length)&&(r=this.length),0>=r)||(r>>>=0)<=(i>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,i,r);case"utf8":case"utf-8":return k(this,i,r);case"ascii":return P(this,i,r);case"latin1":case"binary":return E(this,i,r);case"base64":return O(this,i,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,i,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function $(e,i,r){var o=e[i];e[i]=e[r],e[r]=o}function y(e,i,r,o,s){if(0===e.length)return -1;if("string"==typeof r?(o=r,r=0):2147483647<r?r=2147483647:-2147483648>r&&(r=-2147483648),isNaN(r=+r)&&(r=s?0:e.length-1),0>r&&(r=e.length+r),r>=e.length){if(s)return -1;r=e.length-1}else if(0>r){if(!s)return -1;r=0}if("string"==typeof i&&(i=u.from(i,o)),u.isBuffer(i))return 0===i.length?-1:b(e,i,r,o,s);if("number"==typeof i)return i&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,i,r):Uint8Array.prototype.lastIndexOf.call(e,i,r):b(e,[i],r,o,s);throw TypeError("val must be string, number or Buffer")}function b(e,i,r,o,s){function a(e,i){return 1===l?e[i]:e.readUInt16BE(i*l)}var c,l=1,u=e.length,h=i.length;if(void 0!==o&&("ucs2"===(o=(o+"").toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(2>e.length||2>i.length)return -1;l=2,u/=2,h/=2,r/=2}if(s){var f=-1;for(c=r;c<u;c++)if(a(e,c)!==a(i,-1==f?0:c-f))-1!=f&&(c-=c-f),f=-1;else if(-1==f&&(f=c),c-f+1===h)return f*l}else for(r+h>u&&(r=u-h),c=r;0<=c;c--){for(var d=!0,p=0;p<h;p++)if(a(e,c+p)!==a(i,p)){d=!1;break}if(d)return c}return -1}function x(e,i,r,o){r=+r||0;var s=e.length-r;o?(o=+o)>s&&(o=s):o=s;var a=i.length;if(0!=a%2)throw TypeError("Invalid hex string");o>a/2&&(o=a/2);for(var c,l=0;l<o&&(c=parseInt(i.substr(2*l,2),16),!isNaN(c));++l)e[r+l]=c;return l}function C(e,i,r,o){return N(U(i,e.length-r),e,r,o)}function _(e,i,r,o){return N(function(e){for(var i=[],r=0;r<e.length;++r)i.push(255&e.charCodeAt(r));return i}(i),e,r,o)}function w(e,i,r,o){return _(e,i,r,o)}function S(e,i,r,o){return N(Y(i),e,r,o)}function T(e,i,r,o){return N(function(e,i){for(var r,o,s,a=[],c=0;c<e.length&&!(0>(i-=2));++c)o=(r=e.charCodeAt(c))>>8,s=r%256,a.push(s),a.push(o);return a}(i,e.length-r),e,r,o)}function O(e,i,r){return 0===i&&r===e.length?V.fromByteArray(e):V.fromByteArray(e.slice(i,r))}function k(e,i,r){r=o(e.length,r);for(var s=[],a=i;a<r;){var c,l,u,h,f=e[a],d=null,p=239<f?4:223<f?3:191<f?2:1;a+p<=r&&(1==p?128>f&&(d=f):2==p?128==(192&(c=e[a+1]))&&127<(h=(31&f)<<6|63&c)&&(d=h):3==p?(c=e[a+1],l=e[a+2],128==(192&c)&&128==(192&l)&&2047<(h=(15&f)<<12|(63&c)<<6|63&l)&&(55296>h||57343<h)&&(d=h)):4==p&&(c=e[a+1],l=e[a+2],u=e[a+3],128==(192&c)&&128==(192&l)&&128==(192&u)&&65535<(h=(15&f)<<18|(63&c)<<12|(63&l)<<6|63&u)&&1114112>h&&(d=h))),null===d?(d=65533,p=1):65535<d&&(d-=65536,s.push(55296|1023&d>>>10),d=56320|1023&d),s.push(d),a+=p}return function(e){var i=e.length;if(i<=G)return W.apply(String,e);for(var r="",o=0;o<i;)r+=W.apply(String,e.slice(o,o+=G));return r}(s)}function P(e,i,r){var s="";r=o(e.length,r);for(var a=i;a<r;++a)s+=W(127&e[a]);return s}function E(e,i,r){var s="";r=o(e.length,r);for(var a=i;a<r;++a)s+=W(e[a]);return s}function A(e,i,r){var o=e.length;(!i||0>i)&&(i=0),(!r||0>r||r>o)&&(r=o);for(var s="",a=i;a<r;++a)s+=z(e[a]);return s}function D(e,i,r){for(var o=e.slice(i,r),s="",a=0;a<o.length;a+=2)s+=W(o[a]+256*o[a+1]);return s}function L(e,i,r){if(0!=e%1||0>e)throw RangeError("offset is not uint");if(e+i>r)throw RangeError("Trying to access beyond buffer length")}function j(e,i,r,o,s,a){if(!u.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(i>s||i<a)throw RangeError('"value" argument is out of bounds');if(r+o>e.length)throw RangeError("Index out of range")}function I(e,i,r,s){0>i&&(i=65535+i+1);for(var a=0,c=o(e.length-r,2);a<c;++a)e[r+a]=(i&255<<8*(s?a:1-a))>>>8*(s?a:1-a)}function F(e,i,r,s){0>i&&(i=4294967295+i+1);for(var a=0,c=o(e.length-r,4);a<c;++a)e[r+a]=255&i>>>8*(s?a:3-a)}function M(e,i,r,o){if(r+o>e.length||0>r)throw RangeError("Index out of range")}function R(e,i,r,o,s){return s||M(e,0,r,4),H.write(e,i,r,o,23,4),r+4}function B(e,i,r,o,s){return s||M(e,0,r,8),H.write(e,i,r,o,52,8),r+8}function z(e){return 16>e?"0"+e.toString(16):e.toString(16)}function U(e,i){i=i||1/0;for(var r,o=e.length,s=null,a=[],c=0;c<o;++c){if(55295<(r=e.charCodeAt(c))&&57344>r){if(!s){if(56319<r||c+1===o){-1<(i-=3)&&a.push(239,191,189);continue}s=r;continue}if(56320>r){-1<(i-=3)&&a.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&-1<(i-=3)&&a.push(239,191,189);if(s=null,128>r){if(0>(i-=1))break;a.push(r)}else if(2048>r){if(0>(i-=2))break;a.push(192|r>>6,128|63&r)}else if(65536>r){if(0>(i-=3))break;a.push(224|r>>12,128|63&r>>6,128|63&r)}else{if(!(1114112>r))throw Error("Invalid code point");if(0>(i-=4))break;a.push(240|r>>18,128|63&r>>12,128|63&r>>6,128|63&r)}}return a}function Y(e){return V.toByteArray(function(e){var i;if(2>(e=((i=e).trim?i.trim():i.replace(/^\s+|\s+$/g,"")).replace(q,"")).length)return"";for(;0!=e.length%4;)e+="=";return e}(e))}function N(e,i,r,o){for(var s=0;s<o&&!(s+r>=i.length||s>=e.length);++s)i[s+r]=e[s];return s}var W=String.fromCharCode,V=r(15),H=r(16),X=r(17);/*!
             * The buffer module from node.js, for the browser.
             *
             * @author   Feross Aboukhadijeh <http://feross.org>
             * @license  MIT
             */ i.Buffer=u,i.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},i.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0===e.TYPED_ARRAY_SUPPORT?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(i){return!1}}():e.TYPED_ARRAY_SUPPORT,i.kMaxLength=c(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,i,r){return h(null,e,i,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,i,r){var o,s,a;return o=e,s=i,a=r,f(o),0>=o||void 0===s?l(null,o):"string"==typeof a?l(null,o).fill(s,a):l(null,o).fill(s)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,i){if(!u.isBuffer(e)||!u.isBuffer(i))throw TypeError("Arguments must be Buffers");if(e===i)return 0;for(var r=e.length,s=i.length,a=0,c=o(r,s);a<c;++a)if(e[a]!==i[a]){r=e[a],s=i[a];break}return r<s?-1:s<r?1:0},u.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,i){if(!X(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===i)for(i=0,r=0;r<e.length;++r)i+=e[r].length;var r,o=u.allocUnsafe(i),s=0;for(r=0;r<e.length;++r){var a=e[r];if(!u.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(o,s),s+=a.length}return o},u.byteLength=v,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<e;i+=2)$(this,i,i+1);return this},u.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<e;i+=4)$(this,i,i+3),$(this,i+1,i+2);return this},u.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<e;i+=8)$(this,i,i+7),$(this,i+1,i+6),$(this,i+2,i+5),$(this,i+3,i+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?k(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=i.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,i,r,s,a){if(!u.isBuffer(e))throw TypeError("Argument must be a Buffer");if(void 0===i&&(i=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===a&&(a=this.length),0>i||r>e.length||0>s||a>this.length)throw RangeError("out of range index");if(s>=a&&i>=r)return 0;if(s>=a)return -1;if(i>=r)return 1;if(this===e)return 0;for(var c=(a>>>=0)-(s>>>=0),l=(r>>>=0)-(i>>>=0),h=o(c,l),f=this.slice(s,a),d=e.slice(i,r),p=0;p<h;++p)if(f[p]!==d[p]){c=f[p],l=d[p];break}return c<l?-1:l<c?1:0},u.prototype.includes=function(e,i,r){return -1!==this.indexOf(e,i,r)},u.prototype.indexOf=function(e,i,r){return y(this,e,i,r,!0)},u.prototype.lastIndexOf=function(e,i,r){return y(this,e,i,r,!1)},u.prototype.write=function(e,i,r,o){if(void 0===i)o="utf8",r=this.length,i=0;else if(void 0===r&&"string"==typeof i)o=i,r=this.length,i=0;else{if(!isFinite(i))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");i|=0,isFinite(r)?(r|=0,void 0===o&&(o="utf8")):(o=r,r=void 0)}var s,a,c,l,u=this.length-i;if((void 0===r||r>u)&&(r=u),0<e.length&&(0>r||0>i)||i>this.length)throw RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var h=!1;;)switch(o){case"hex":return x(this,e,i,r);case"utf8":case"utf-8":return C(this,e,i,r);case"ascii":return _(this,e,i,r);case"latin1":case"binary":return s=this,a=e,c=i,_(s,a,c,l=r);case"base64":return S(this,e,i,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,i,r);default:if(h)throw TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),h=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var G=4096;u.prototype.slice=function(e,i){var r,o=this.length;if(0>(e=~~e)?0>(e+=o)&&(e=0):e>o&&(e=o),0>(i=void 0===i?o:~~i)?0>(i+=o)&&(i=0):i>o&&(i=o),i<e&&(i=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,i)).__proto__=u.prototype;else{var s=i-e;r=new u(s,void 0);for(var a=0;a<s;++a)r[a]=this[a+e]}return r},u.prototype.readUIntLE=function(e,i,r){e|=0,i|=0,r||L(e,i,this.length);for(var o=this[e],s=1,a=0;++a<i&&(s*=256);)o+=this[e+a]*s;return o},u.prototype.readUIntBE=function(e,i,r){e|=0,i|=0,r||L(e,i,this.length);for(var o=this[e+--i],s=1;0<i&&(s*=256);)o+=this[e+--i]*s;return o},u.prototype.readUInt8=function(e,i){return i||L(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,i){return i||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,i){return i||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,i){return i||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,i){return i||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,i,r){e|=0,i|=0,r||L(e,i,this.length);for(var o=this[e],s=1,c=0;++c<i&&(s*=256);)o+=this[e+c]*s;return o>=(s*=128)&&(o-=a(2,8*i)),o},u.prototype.readIntBE=function(e,i,r){e|=0,i|=0,r||L(e,i,this.length);for(var o=i,s=1,c=this[e+--o];0<o&&(s*=256);)c+=this[e+--o]*s;return c>=(s*=128)&&(c-=a(2,8*i)),c},u.prototype.readInt8=function(e,i){return i||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,i){i||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,i){i||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,i){return i||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,i){return i||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,i){return i||L(e,4,this.length),H.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,i){return i||L(e,4,this.length),H.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,i){return i||L(e,8,this.length),H.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,i){return i||L(e,8,this.length),H.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,i,r,o){e=+e,i|=0,r|=0,o||j(this,e,i,r,a(2,8*r)-1,0);var s=1,c=0;for(this[i]=255&e;++c<r&&(s*=256);)this[i+c]=255&e/s;return i+r},u.prototype.writeUIntBE=function(e,i,r,o){e=+e,i|=0,r|=0,o||j(this,e,i,r,a(2,8*r)-1,0);var s=r-1,c=1;for(this[i+s]=255&e;0<=--s&&(c*=256);)this[i+s]=255&e/c;return i+r},u.prototype.writeUInt8=function(e,i,r){return e=+e,i|=0,r||j(this,e,i,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=s(e)),this[i]=255&e,i+1},u.prototype.writeUInt16LE=function(e,i,r){return e=+e,i|=0,r||j(this,e,i,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[i]=255&e,this[i+1]=e>>>8):I(this,e,i,!0),i+2},u.prototype.writeUInt16BE=function(e,i,r){return e=+e,i|=0,r||j(this,e,i,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[i]=e>>>8,this[i+1]=255&e):I(this,e,i,!1),i+2},u.prototype.writeUInt32LE=function(e,i,r){return e=+e,i|=0,r||j(this,e,i,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[i+3]=e>>>24,this[i+2]=e>>>16,this[i+1]=e>>>8,this[i]=255&e):F(this,e,i,!0),i+4},u.prototype.writeUInt32BE=function(e,i,r){return e=+e,i|=0,r||j(this,e,i,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[i]=e>>>24,this[i+1]=e>>>16,this[i+2]=e>>>8,this[i+3]=255&e):F(this,e,i,!1),i+4},u.prototype.writeIntLE=function(e,i,r,o){if(e=+e,i|=0,!o){var s=a(2,8*r-1);j(this,e,i,r,s-1,-s)}var c=0,l=1,u=0;for(this[i]=255&e;++c<r&&(l*=256);)0>e&&0==u&&0!==this[i+c-1]&&(u=1),this[i+c]=255&(e/l>>0)-u;return i+r},u.prototype.writeIntBE=function(e,i,r,o){if(e=+e,i|=0,!o){var s=a(2,8*r-1);j(this,e,i,r,s-1,-s)}var c=r-1,l=1,u=0;for(this[i+c]=255&e;0<=--c&&(l*=256);)0>e&&0==u&&0!==this[i+c+1]&&(u=1),this[i+c]=255&(e/l>>0)-u;return i+r},u.prototype.writeInt8=function(e,i,r){return e=+e,i|=0,r||j(this,e,i,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=s(e)),0>e&&(e=255+e+1),this[i]=255&e,i+1},u.prototype.writeInt16LE=function(e,i,r){return e=+e,i|=0,r||j(this,e,i,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[i]=255&e,this[i+1]=e>>>8):I(this,e,i,!0),i+2},u.prototype.writeInt16BE=function(e,i,r){return e=+e,i|=0,r||j(this,e,i,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[i]=e>>>8,this[i+1]=255&e):I(this,e,i,!1),i+2},u.prototype.writeInt32LE=function(e,i,r){return e=+e,i|=0,r||j(this,e,i,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[i]=255&e,this[i+1]=e>>>8,this[i+2]=e>>>16,this[i+3]=e>>>24):F(this,e,i,!0),i+4},u.prototype.writeInt32BE=function(e,i,r){return e=+e,i|=0,r||j(this,e,i,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[i]=e>>>24,this[i+1]=e>>>16,this[i+2]=e>>>8,this[i+3]=255&e):F(this,e,i,!1),i+4},u.prototype.writeFloatLE=function(e,i,r){return R(this,e,i,!0,r)},u.prototype.writeFloatBE=function(e,i,r){return R(this,e,i,!1,r)},u.prototype.writeDoubleLE=function(e,i,r){return B(this,e,i,!0,r)},u.prototype.writeDoubleBE=function(e,i,r){return B(this,e,i,!1,r)},u.prototype.copy=function(e,i,r,o){if(r||(r=0),o||0===o||(o=this.length),i>=e.length&&(i=e.length),i||(i=0),0<o&&o<r&&(o=r),o===r||0===e.length||0===this.length)return 0;if(0>i)throw RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw RangeError("sourceStart out of bounds");if(0>o)throw RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-i<o-r&&(o=e.length-i+r);var s,a=o-r;if(this===e&&r<i&&i<o)for(s=a-1;0<=s;--s)e[s+i]=this[s+r];else if(1e3>a||!u.TYPED_ARRAY_SUPPORT)for(s=0;s<a;++s)e[s+i]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),i);return a},u.prototype.fill=function(e,i,r,o){if("string"==typeof e){if("string"==typeof i?(o=i,i=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),1===e.length){var s,a=e.charCodeAt(0);256>a&&(e=a)}if(void 0!==o&&"string"!=typeof o)throw TypeError("encoding must be a string");if("string"==typeof o&&!u.isEncoding(o))throw TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(0>i||this.length<i||this.length<r)throw RangeError("Out of range index");if(r<=i)return this;if(i>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=i;s<r;++s)this[s]=e;else{var c=u.isBuffer(e)?e:U(new u(e,o).toString()),l=c.length;for(s=0;s<r-i;++s)this[s+i]=c[s%l]}return this};var q=/[^+\/0-9A-Za-z-_]/g}).call(this,r(4))},function(e,i){"use strict";function r(e){var i=e.length;if(0<i%4)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return -1===r&&(r=i),[r,r===i?0:4-r%4]}function o(e){return a[63&e>>18]+a[63&e>>12]+a[63&e>>6]+a[63&e]}function s(e,i,r){for(var s,a=[],c=i;c<r;c+=3)a.push(o(s=(16711680&e[c]<<16)+(65280&e[c+1]<<8)+(255&e[c+2])));return a.join("")}i.byteLength=function(e){var i=r(e),o=i[0],s=i[1];return 3*(o+s)/4-s},i.toByteArray=function(e){var i,o,s,a,u=r(e),h=u[0],f=u[1],d=new l((i=h,o=f,3*(i+o)/4-o)),p=0,g=0<f?h-4:h;for(a=0;a<g;a+=4)s=c[e.charCodeAt(a)]<<18|c[e.charCodeAt(a+1)]<<12|c[e.charCodeAt(a+2)]<<6|c[e.charCodeAt(a+3)],d[p++]=255&s>>16,d[p++]=255&s>>8,d[p++]=255&s;return 2===f&&(s=c[e.charCodeAt(a)]<<2|c[e.charCodeAt(a+1)]>>4,d[p++]=255&s),1===f&&(s=c[e.charCodeAt(a)]<<10|c[e.charCodeAt(a+1)]<<4|c[e.charCodeAt(a+2)]>>2,d[p++]=255&s>>8,d[p++]=255&s),d},i.fromByteArray=function(e){for(var i,r=e.length,o=r%3,c=[],l=0,u=r-o;l<u;l+=16383)c.push(s(e,l,l+16383>u?u:l+16383));return 1==o?c.push(a[(i=e[r-1])>>2]+a[63&i<<4]+"=="):2==o&&c.push(a[(i=(e[r-2]<<8)+e[r-1])>>10]+a[63&i>>4]+a[63&i<<2]+"="),c.join("")};for(var a=[],c=[],l="undefined"==typeof Uint8Array?Array:Uint8Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,f=u.length;h<f;++h)a[h]=u[h],c[u.charCodeAt(h)]=h;c[45]=62,c[95]=63},function(e,i){var r=Math.pow;i.read=function(e,i,o,s,a){var c,l,u=8*a-s-1,h=(1<<u)-1,f=h>>1,d=-7,p=o?a-1:0,g=o?-1:1,v=e[i+p];for(p+=g,c=v&(1<<-d)-1,v>>=-d,d+=u;0<d;c=256*c+e[i+p],p+=g,d-=8);for(l=c&(1<<-d)-1,c>>=-d,d+=s;0<d;l=256*l+e[i+p],p+=g,d-=8);if(0===c)c=1-f;else{if(c===h)return l?NaN:1/0*(v?-1:1);l+=r(2,s),c-=f}return(v?-1:1)*l*r(2,c-s)},i.write=function(e,i,o,s,a,c){var l,u,h,f=8*c-a-1,d=(1<<f)-1,p=d>>1,g=23===a?5960464477539062e-23:0,v=s?0:c-1,m=s?1:-1,$=0>i||0===i&&0>1/i?1:0;for(isNaN(i=Math.abs(i))||i===1/0?(u=isNaN(i)?1:0,l=d):(l=Math.floor(Math.log(i)/Math.LN2),1>i*(h=r(2,-l))&&(l--,h*=2),2<=(i+=1<=l+p?g/h:g*r(2,1-p))*h&&(l++,h/=2),l+p>=d?(u=0,l=d):1<=l+p?(u=(i*h-1)*r(2,a),l+=p):(u=i*r(2,p-1)*r(2,a),l=0));8<=a;e[o+v]=255&u,v+=m,u/=256,a-=8);for(l=l<<a|u,f+=a;0<f;e[o+v]=255&l,v+=m,l/=256,f-=8);e[o+v-m]|=128*$}},function(e){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},function(){},function(){},function(){},function(e,i,r){var o,s,a=r(7),c=r(8),l=0,u=0;e.exports=function(e,i,r){var h=i&&r||0,f=i||[],d=(e=e||{}).node||o,p=void 0===e.clockseq?s:e.clockseq;if(null==d||null==p){var g=a();null==d&&(d=o=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==p&&(p=s=16383&(g[6]<<8|g[7]))}var v=void 0===e.msecs?new Date().getTime():e.msecs,m=void 0===e.nsecs?u+1:e.nsecs,$=v-l+(m-u)/1e4;if(0>$&&void 0===e.clockseq&&(p=16383&p+1),(0>$||v>l)&&void 0===e.nsecs&&(m=0),1e4<=m)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");l=v,u=m,s=p;var y=(1e4*(268435455&(v+=122192928e5))+m)%4294967296;f[h++]=255&y>>>24,f[h++]=255&y>>>16,f[h++]=255&y>>>8,f[h++]=255&y;var b=268435455&v/4294967296*1e4;f[h++]=255&b>>>8,f[h++]=255&b,f[h++]=16|15&b>>>24,f[h++]=255&b>>>16,f[h++]=128|p>>>8,f[h++]=255&p;for(var x=0;6>x;++x)f[h+x]=d[x];return i||c(f)}},function(e,i,r){var o=r(7),s=r(8);e.exports=function(e,i,r){var a=i&&r||0;"string"==typeof e&&(i="binary"===e?Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||o)();if(c[6]=64|15&c[6],c[8]=128|63&c[8],i)for(var l=0;16>l;++l)i[a+l]=c[l];return i||s(c)}},function(){self.fetch||(self.fetch=function(e,i){return i=i||{},new Promise(function(r,o){var s=new XMLHttpRequest,a=[],c=[],l={};for(var u in s.open(i.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,i,r){a.push(i=i.toLowerCase()),c.push([i,r]),l[i]=l[i]?l[i]+","+r:r}),r(function e(){return{ok:2==(0|s.status/100),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:e,headers:{keys:function(){return a},entries:function(){return c},get:function(e){return l[e.toLowerCase()]},has:function(e){return e.toLowerCase() in l}}}}())},s.onerror=o,s.withCredentials="include"==i.credentials,i.headers)s.setRequestHeader(u,i.headers[u]);s.send(i.body||null)})})},,,function(e,i,r){"use strict";function o(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,i){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,s,a=[],c=!0,l=!1;try{for(r=r.call(e);!(c=(o=r.next()).done)&&(a.push(o.value),!i||a.length!==i);c=!0);}catch(u){l=!0,s=u}finally{try{c||null==r.return||r.return()}finally{if(l)throw s}}return a}}(e,i)||function(e,i){if(e){if("string"==typeof e)return s(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,i):void 0}}(e,i)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,i){(null==i||i>e.length)&&(i=e.length);for(var r=0,o=Array(i);r<i;r++)o[r]=e[r];return o}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){function e(e,i,r){return Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[i]}function i(e,i,s,a){var c,l,u,h,d=Object.create((i&&i.prototype instanceof o?i:o).prototype);return x(d,"_invoke",{value:(c=e,l=s,u=new g(a||[]),h="suspendedStart",function(e,i){if("executing"==h)throw Error("Generator is already running");if("completed"==h){if("throw"===e)throw i;return{value:void 0,done:!0}}for(u.method=e,u.arg=i;;){var o=u.delegate;if(o){var s=f(o,u);if(s){if(s===O)continue;return s}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if("suspendedStart"==h)throw h="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);h="executing";var a=r(c,l,u);if("normal"===a.type){if(h=u.done?"completed":"suspendedYield",a.arg===O)continue;return{value:a.arg,done:u.done}}"throw"===a.type&&(h="completed",u.method="throw",u.arg=a.arg)}})}),d}function r(e,i,r){try{return{type:"normal",arg:e.call(i,r)}}catch(o){return{type:"throw",arg:o}}}function o(){}function s(){}function l(){}function u(i){["next","throw","return"].forEach(function(r){e(i,r,function(e){return this._invoke(r,e)})})}function h(e,i){var o;x(this,"_invoke",{value:function(s,c){function l(){return new i(function(o,l){!function o(s,c,l,u){var h=r(e[s],e,c);if("throw"!==h.type){var f=h.arg,d=f.value;return d&&"object"==a(d)&&b.call(d,"__await")?i.resolve(d.__await).then(function(e){o("next",e,l,u)},function(e){o("throw",e,l,u)}):i.resolve(d).then(function(e){f.value=e,l(f)},function(e){return o("throw",e,l,u)})}u(h.arg)}(s,c,o,l)})}return o=o?o.then(l,l):l()}})}function f(e,i){var o=e.iterator[i.method];if(void 0===o){if(i.delegate=null,"throw"===i.method){if(e.iterator.return&&(i.method="return",i.arg=void 0,f(e,i),"throw"===i.method))return O;i.method="throw",i.arg=TypeError("The iterator does not provide a 'throw' method")}return O}var s=r(o,e.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,O;var a=s.arg;return a?a.done?(i[e.resultName]=a.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=void 0),i.delegate=null,O):a:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,O)}function d(e){var i={tryLoc:e[0]};1 in e&&(i.catchLoc=e[1]),2 in e&&(i.finallyLoc=e[2],i.afterLoc=e[3]),this.tryEntries.push(i)}function p(e){var i=e.completion||{};i.type="normal",delete i.arg,e.completion=i}function g(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function v(e){if(e){var i=e[_];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function i(){for(;++r<e.length;)if(b.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=void 0,i.done=!0,i};return o.next=o}}return{next:m}}function m(){return{value:void 0,done:!0}}c=function(){return $};var $={},y=Object.prototype,b=y.hasOwnProperty,x=Object.defineProperty||function(e,i,r){e[i]=r.value},C="function"==typeof Symbol?Symbol:{},_=C.iterator||"@@iterator",w=C.asyncIterator||"@@asyncIterator",S=C.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,i,r){return e[i]=r}}$.wrap=i;var O={},k={};e(k,_,function(){return this});var P=Object.getPrototypeOf,E=P&&P(P(v([])));E&&E!==y&&b.call(E,_)&&(k=E);var A=l.prototype=o.prototype=Object.create(k);return s.prototype=l,x(A,"constructor",{value:l,configurable:!0}),x(l,"constructor",{value:s,configurable:!0}),s.displayName=e(l,S,"GeneratorFunction"),$.isGeneratorFunction=function(e){var i="function"==typeof e&&e.constructor;return!!i&&(i===s||"GeneratorFunction"===(i.displayName||i.name))},$.mark=function(i){return Object.setPrototypeOf?Object.setPrototypeOf(i,l):(i.__proto__=l,e(i,S,"GeneratorFunction")),i.prototype=Object.create(A),i},$.awrap=function(e){return{__await:e}},u(h.prototype),e(h.prototype,w,function(){return this}),$.AsyncIterator=h,$.async=function(e,r,o,s,a){void 0===a&&(a=Promise);var c=new h(i(e,r,o,s),a);return $.isGeneratorFunction(r)?c:c.next().then(function(e){return e.done?e.value:c.next()})},u(A),e(A,S,"Generator"),e(A,_,function(){return this}),e(A,"toString",function(){return"[object Generator]"}),$.keys=function(e){var i=Object(e),r=[];for(var o in i)r.push(o);return r.reverse(),function e(){for(;r.length;){var o=r.pop();if(o in i)return e.value=o,e.done=!1,e}return e.done=!0,e}},$.values=v,g.prototype={constructor:g,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(p),!e)for(var i in this)"t"===i.charAt(0)&&b.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function i(i,o){return a.type="throw",a.arg=e,r.next=i,o&&(r.method="next",r.arg=void 0),!!o}if(this.done)throw e;for(var r=this,o=this.tryEntries.length-1;0<=o;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=b.call(s,"catchLoc"),l=b.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,i){for(var r,o=this.tryEntries.length-1;0<=o;--o)if((r=this.tryEntries[o]).tryLoc<=this.prev&&b.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}s&&("break"===e||"continue"===e)&&s.tryLoc<=i&&i<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=i,s?(this.method="next",this.next=s.finallyLoc,O):this.complete(a)},complete:function(e,i){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&i&&(this.next=i),O},finish:function(e){for(var i,r=this.tryEntries.length-1;0<=r;--r)if((i=this.tryEntries[r]).finallyLoc===e)return this.complete(i.completion,i.afterLoc),p(i),O},catch:function(e){for(var i,r=this.tryEntries.length-1;0<=r;--r)if((i=this.tryEntries[r]).tryLoc===e){var o=i.completion;if("throw"===o.type){var s=o.arg;p(i)}return s}throw Error("illegal catch attempt")},delegateYield:function(e,i,r){return this.delegate={iterator:v(e),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=void 0),O}},$}function l(e,i,r,o,s,a,c){try{var l=e[a](c),u=l.value}catch(h){return void r(h)}l.done?i(u):Promise.resolve(u).then(o,s)}function u(e){return function(){var i=this,r=arguments;return new Promise(function(o,s){function a(e){l(u,o,s,a,c,"next",e)}function c(e){l(u,o,s,a,c,"throw",e)}var u=e.apply(i,r);a(void 0)})}}function h(e,i){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);i&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,o)}return r}function f(e){for(var i,r=1;r<arguments.length;r++)i=null==arguments[r]?{}:arguments[r],r%2?h(Object(i),!0).forEach(function(r){d(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))});return e}function d(e,i,r){return i in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,e}function p(e,i){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);i&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,o)}return r}function g(e){for(var i,r=1;r<arguments.length;r++)i=null==arguments[r]?{}:arguments[r],r%2?p(Object(i),!0).forEach(function(r){v(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))});return e}function v(e,i,r){return i in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,e}function m(e,i,r,o,s,a,c,l){var u,h="function"==typeof e?e.options:e;if(i&&(h.render=i,h.staticRenderFns=r,h._compiled=!0),o&&(h.functional=!0),a&&(h._scopeId="data-v-"+a),c?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(c)},h._ssrRegister=u):s&&(u=l?function(){s.call(this,(h.functional?this.parent:this).$root.$options.shadowRoot)}:s),u){if(h.functional){h._injectStyles=u;var f=h.render;h.render=function(e,i){return u.call(i),f(e,i)}}else{var d=h.beforeCreate;h.beforeCreate=d?[].concat(d,u):[u]}}return{exports:e,options:h}}function $(e,i,r){return i in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,e}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(e){if("string"==typeof e)return b(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,i):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,i){(null==i||i>e.length)&&(i=e.length);for(var r=0,o=Array(i);r<i;r++)o[r]=e[r];return o}function x(e,i){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);i&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,o)}return r}function C(e){for(var i,r=1;r<arguments.length;r++)i=null==arguments[r]?{}:arguments[r],r%2?x(Object(i),!0).forEach(function(r){_(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))});return e}function _(e,i,r){return i in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,e}function w(e,i){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);i&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,o)}return r}function S(e){for(var i,r=1;r<arguments.length;r++)i=null==arguments[r]?{}:arguments[r],r%2?w(Object(i),!0).forEach(function(r){T(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))});return e}function T(e,i,r){return i in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,e}function O(e,i){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);i&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,o)}return r}function k(e){for(var i,r=1;r<arguments.length;r++)i=null==arguments[r]?{}:arguments[r],r%2?O(Object(i),!0).forEach(function(r){P(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))});return e}function P(e,i,r){return i in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,e}function E(e,i){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);i&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,o)}return r}function A(e){for(var i,r=1;r<arguments.length;r++)i=null==arguments[r]?{}:arguments[r],r%2?E(Object(i),!0).forEach(function(r){D(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))});return e}function D(e,i,r){return i in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,e}r.r(i);var L=r(5),j=r.n(L),I=r(0),F=function(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3;return Promise.all([fetch("https://foggy-dog-customizer--prod.herokuapp.com/api/products/".concat(e,".json?shop=").concat(window.Shopify.shop)).then(function(e){return e.json()}),new Promise(function(e){setTimeout(function(){e()},i)}),]).then(function(e){return Promise.resolve(o(e,1)[0])})},M=function(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3;return Promise.all([fetch("/cart/add.js",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[e]})}).then(function(e){return e.json()}),new Promise(function(e){setTimeout(function(){e()},i)}),]).then(function(e){return Promise.resolve(o(e,1)[0])})};j.a.use(I.a);var R=new I.a.Store({strict:!1,state:{open:!1,productTitle:"",variantId:!1,addonVariant:null,backgroundImage:null,customizationMethod:null,colors:[],fonts:[],activeColorId:null,activeFontId:null,swearWords:[],frontTextLines:[],backTextLines:[],applied:!1,loaded:!1},actions:{fetchCustomizationOptions:function(e,i){return u(c().mark(function r(){var o,s;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.commit,r.next=3,F(i);case 3:(s=r.sent)&&(Object.keys(s)||[]).length&&o("SAVE_CUSTOMIZER_PAYLOAD",s);case 5:case"end":return r.stop()}},r)}))()},addMonogramFee:function(e,i){return u(c().mark(function r(){var o;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.commit,o=e.state,r.next=3,M({quantity:1,id:o.addonVariant.id,properties:{_monogrma_key:i}});case 3:r.sent;case 4:case"end":return r.stop()}},r)}))()},openCustomizer:function(e){var i=e.commit;document.body.classList.add("fancybox-enabled"),i("OPEN_CUSTOMIZER")},closeCustomizer:function(e){var i=e.commit;document.body.classList.remove("fancybox-enabled"),i("CLOSE_CUSTOMIZER")},setProductTitle:function(e,i){(0,e.commit)("SET_PRODUCT_TITLE",i)},setVariantId:function(e,i){(0,e.commit)("SET_VARIANT_ID",i)},setFont:function(e,i){(0,e.commit)("SET_ACTIVE_FONT",i)},setColor:function(e,i){(0,e.commit)("SET_ACTIVE_COLOR",i)},setTextLine:function(e,i){(0,e.commit)("SET_TEXT_LINE",i)},setApplied:function(e,i){(0,e.commit)("SET_APPLIED_STATUS",i)},clearPersonalization:function(e){(0,e.commit)("CLEAR_PERSONALIZATION")}},mutations:{SAVE_CUSTOMIZER_PAYLOAD:function(e,i){e.addonVariant=i.addon_variant,e.backgroundImage=i.background_image,e.customizationMethod=i.customization_method,e.swearWords=(i.swear_words||"").split(",").map(function(e){return e.toLowerCase()}),0<i.fonts.length&&(e.activeFontId=i.fonts[0].id),0<i.colors.length&&(e.activeColorId=i.colors[0].id),e.colors=i.colors,e.fonts=i.fonts,e.frontTextLines=Array.apply(null,Array(i.customization_method.num_text_lines)).map(function(e,i){return{lineIndex:i+1,customized:!1,text:""}}),e.backTextLines=Array.apply(null,Array(i.customization_method.num_back_text_lines)).map(function(e,i){return{lineIndex:i+1,text:""}}),setTimeout(function(){e.loaded=!0},100)},OPEN_CUSTOMIZER:function(e){e.open=!0},CLOSE_CUSTOMIZER:function(e){e.open=!1},SET_PRODUCT_TITLE:function(e,i){e.productTitle=i},SET_VARIANT_ID:function(e,i){e.variantId=i},SET_ACTIVE_FONT:function(e,i){e.activeFontId=i},SET_ACTIVE_COLOR:function(e,i){e.activeColorId=i},SET_TEXT_LINE:function(e,i){if(i.isFront){var r=e.frontTextLines,o=r.findIndex(function(e){return e.lineIndex===i.index});r[o].text=i.value,r[o].customized=!0,e.frontTextLines=r}else{var s=e.backTextLines;s[s.findIndex(function(e){return e.lineIndex===i.index})].text=i.value,e.backTextLines=s}},SET_APPLIED_STATUS:function(e,i){e.applied=i},CLEAR_PERSONALIZATION:function(e){var i=e.frontTextLines,r=e.backTextLines;e.frontTextLines=i.map(function(e){return{lineIndex:e.lineIndex,text:""}}),e.backTextLines=r.map(function(e){return{lineIndex:e.lineIndex,text:""}})}},getters:{activeFont:function(e){return e.fonts.find(function(i){return i.id===e.activeFontId})},activeColor:function(e){return e.colors.find(function(i){return i.id===e.activeColorId})},isEngraved:function(e){return e.frontTextLines.map(function(e){return e.text}).some(function(e){return!!e})},disallowedSymbols:function(e,i){var r;return(null===(r=i.activeFont)||void 0===r?void 0:r.disallowed_symbols)||""}}}),B=r(1),z=r.n(B),U=(r(13),r(3)),Y=r(2),N={computed:f(f(f({},Object(I.d)(["activeColorId","activeFontId","customizationMethod"])),Object(I.c)(["activeColor","activeFont"])),{},{frontLineSettings:function(){return this.activeFont.monogram_settings.filter(function(e){return e.is_front_view})},monogramProperties:function(){return window.monogramProperties[this.customizationMethod.title]}}),methods:{initCanvas:function(){var e=this;this.canvas.setHeight(this.canvasWidth),this.canvas.setWidth(this.canvasWidth),this.frontLineSettings.forEach(function(i){var r,o,s,a,c=e.frontTextLines.find(function(e){return e.lineIndex===i.text_line_index}),l=new fabric.Text("".concat((null==c?void 0:c.text)||i.placeholder),{id:"text-".concat(i.text_line_index),fill:e.activeColor.hex_code,flipped:!0,angle:null===(r=i.canvas_json)||void 0===r?void 0:r.angle,fontSize:(null===(o=i.canvas_json)||void 0===o?void 0:o.fontSize)*e.canvasRatio,fontFamily:e.activeFont.title,editable:!1,lineHeight:2*e.canvasRatio,textAlign:e.customizationMethod.text_alignment,dirty:!0,charSpacing:60*e.canvasRatio,originX:e.customizationMethod.text_alignment,originY:"center",hoverCursor:"default",left:(null===(s=i.canvas_json)||void 0===s?void 0:s.left)*e.canvasRatio,top:(null===(a=i.canvas_json)||void 0===a?void 0:a.top)*e.canvasRatio});e.canvas.add(l)}),this.canvas.setBackgroundImage(Object(Y.b)(this.backgroundImage,500),this.canvas.renderAll.bind(this.canvas),{backgroundImageOpacity:.5,backgroundImageStretch:!0,scaleX:this.canvasRatio,scaleY:this.canvasRatio}),this.canvas.requestRenderAll()}}},W=m({data:function(){return{canvas:null,canvasWidth:500}},mixins:[N],computed:g(g({},Object(I.d)(["backgroundImage","frontTextLines"])),{},{canvasRatio:function(){return this.canvasWidth/500},dimensions:function(){var e=this;return this.frontTextLines.map(function(i){var r,o,s,a=e.frontLineSettings.find(function(e){return e.text_line_index===i.lineIndex});return{index:i.lineIndex,text:e.customized?i.text:a.placeholder,topOrigin:null==a||null===(r=a.canvas_json)||void 0===r?void 0:r.top,top:null==a||null===(o=a.canvas_json)||void 0===o?void 0:o.top,height:null==a||null===(s=a.canvas_json)||void 0===s?void 0:s.height}})},activeDimensions:function(){var e=this,i=this.dimensions.filter(function(e){return!!e.text}),r=i.length/2;return i.map(function(i,o){var s=e.gravityCenter+(o-r)*i.height;return g(g({},i),{},{top:s})})},gravityCenter:function(){if(0===this.dimensions.length)return 0;var e,i,r,o=null===(e=this.dimensions[0])||void 0===e?void 0:e.topOrigin;return o+((null===(i=this.dimensions[this.dimensions.length-1])||void 0===i?void 0:i.topOrigin)+(null===(r=this.dimensions[this.dimensions.length-1])||void 0===r?void 0:r.height)-o)/2},customized:function(){return this.frontTextLines.some(function(e){return!!e.text})}}),watch:{frontTextLines:{deep:!0,handler:function(){this.handleCanvas()}},activeColorId:function(){this.handleCanvas()},activeFontId:function(){this.handleCanvas()}},created:function(){U.fabric.Object.prototype.transparentCorners=!1,U.fabric.Object.prototype.hasControls=!1,U.fabric.Object.prototype.hasBorders=!1,U.fabric.Object.prototype.lockScalingX=!0,U.fabric.Object.prototype.lockScalingY=!0,U.fabric.Object.prototype.lockMovementX=!0,U.fabric.Object.prototype.lockMovementY=!0,U.fabric.Object.prototype.lockRotation=!0},mounted:function(){var e=this;setTimeout(function(){e.canvasWidth=z()("#canvasContainer").clientWidth,e.canvas||(e.canvas=new U.fabric.Canvas(z()("#canvas"))),e.initCanvas();var i=0,r=setInterval(function(){100===(i+=1)&&clearInterval(r),e.handleCanvas()},10)},100)},methods:{handleCanvas:function(){for(var e=this,i=this.canvas.getObjects("text"),r=0;r<i.length;r++)!function(){var o,s=e.frontTextLines.find(function(e){return"text-".concat(e.lineIndex)===i[r].id}),a=e.frontLineSettings.find(function(e){return e.text_line_index===r+1&&e.is_front_view});e.canvas.remove(i[r]);var c=e.customized?null==s?void 0:s.text:null==a?void 0:a.placeholder,l=null===(o=a.canvas_json)||void 0===o?void 0:o.top;if(e.activeDimensions.length<e.frontTextLines.length){var u=e.activeDimensions.find(function(e){return e.index===a.text_line_index});u&&(l=u.top)}var h="stella"===e.activeFont.title.toLowerCase()?10:60,f=new U.fabric.Text(c,{id:"text-".concat(s.lineIndex),fill:e.activeColor.hex_code,flipped:!0,angle:a.canvas_json.angle,fontSize:a.canvas_json.fontSize*e.canvasRatio,fontFamily:e.activeFont.title,editable:!1,lineHeight:2*e.canvasRatio,textAlign:e.customizationMethod.text_alignment,dirty:!0,charSpacing:h*e.canvasRatio,originX:e.customizationMethod.text_alignment,originY:"center",hoverCursor:"default",left:a.canvas_json.left*e.canvasRatio,top:l*e.canvasRatio});e.canvas.add(f),e.canvas.requestRenderAll()}()}}},function(){var e=this._self._c;return e("div",{staticClass:"lg-preview"},[this._m(0),this._v(" "),e("p",{staticStyle:{display:"none"},style:{fontFamily:this.activeFont.title}},[this._v(this._s(this.activeFont))])])},[function(){var e=this._self._c;return e("div",{staticClass:"canvas-wrapper",attrs:{id:"canvasContainer"}},[e("canvas",{attrs:{id:"canvas",crossorigin:"anonymous"}})])},],!1,null,null,null).exports,V=r(6),H=m({data:function(){return{confirmed:!1,loading:!1,monogramKey:Object(V.v4)()}},mixins:[N],computed:C(C(C({},Object(I.d)(["applied","open","productTitle","variantId","fonts","colors","addonVariant","frontTextLines","backTextLines","swearWords"])),Object(I.c)(["isEngraved","disallowedSymbols"])),{},{activeFrontLines:function(){return this.frontTextLines.filter(function(e){return!!e.text})},activeBackLines:function(){return this.backTextLines.filter(function(e){return!!e.text})},customizationCode:function(){return"Engraving"==this.customizationMethod.label?"LAS":"EMB"},backSettings:function(){return this.activeFont.monogram_settings.filter(function(e){return!e.is_front_view})},hasInvalidTextLines:function(){var e=this;return[].concat(y(this.frontTextLines),y(this.backTextLines)).map(function(e){return e.text}).some(function(i){return e.invalidTextLine(i)})},disabled:function(){return!this.isEngraved||this.hasInvalidTextLines||this.hasExceedTextLines},id:function(){return new URL(window.location.href).searchParams.get("variant")||this.variantId},variantMaxCharSet:function(){var e=this,i=window.shopifyProduct.variants.find(function(i){return+i.id==+e.id});return((null==i?void 0:i.max_chars)||[]).find(function(i){return i.font.toLowerCase().trim()===e.activeFont.title.toLowerCase().trim()})},hasExceedTextLines:function(){var e=this;return[].concat(y(this.frontLineSettings),y(this.backSettings)).some(function(i){return e.textLine(i).length>e.maxChars(i)})},swearWordMessage:function(){return window.__GLOBAL__.swearWordMessage},invalidSymbolMessage:function(){return window.__GLOBAL__.invalidSymbolMessage}}),methods:C(C({},Object(I.b)(["closeCustomizer","setFont","setColor","setTextLine","setApplied","clearPersonalization"])),{},{maxChars:function(e){return this.variantMaxCharSet&&(e.is_front_view?this.variantMaxCharSet["max_front_line_".concat(e.text_line_index)]:this.variantMaxCharSet["max_back_line_".concat(e.text_line_index)])||e.max_chars},textCaption:function(e,i){return i?this.monogramProperties["front_line_".concat(e)]:this.monogramProperties["back_line_".concat(e)]},invalidTextLine:function(e){return this.lineWithInvalidSymbol(e)||this.lineWithSwearWord(e)},lineWithInvalidSymbol:function(e){return this.disallowedSymbols.split("").some(function(i){return e.includes(i)})||/(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])/gi.test(e)},lineWithSwearWord:function(e){var i=this;return e.split(" ").some(function(e){return i.swearWords.includes(e.toLowerCase())})},textLine:function(e){var i=this.backTextLines;return e.is_front_view&&(i=this.frontTextLines),i.find(function(i){return i.lineIndex===e.text_line_index}).text||""},setInput:function(e){var i=e.target,r=i.value,o=i.dataset,s=o.isFront,a=o.index;this.setTextLine({isFront:"true"===s,index:+a,value:r})},confirmEngraving:function(){var e,i,r=this;this.loading=!0;var o=new URL(window.location.href).searchParams.get("variant")||this.variantId,s={_monogram_key:this.monogramKey,_type:this.customizationCode,_LPROP:"Final Sale"};this.monogramProperties.include_color&&(s.Color=this.activeColor.title,s._color=this.activeColor.thread_code),this.monogramProperties.include_font&&(s.Font=this.activeFont.title,s._font=this.activeFont.name),null!==(e=this.addonVariant)&&void 0!==e&&e.id&&(s._monogram_fee=this.addonVariant.price);for(var a=0;a<this.activeFrontLines.length;a++)s["".concat(this.textCaption(this.activeFrontLines[a].lineIndex,!0))]=this.activeFrontLines[a].text;if(this.customizationMethod.allow_back_text_lines)for(a=0;a<this.activeBackLines.length;a++)s["".concat(this.textCaption(this.activeBackLines[a].lineIndex,!1))]=this.activeBackLines[a].text;var c=[{id:o,quantity:z()("#Quantity").value,properties:s}];null!==(i=this.addonVariant)&&void 0!==i&&i.id&&c.push({id:this.addonVariant.id,quantity:z()("#Quantity").value,properties:{_monogram_key:this.monogramKey}}),CartJS.addItems({items:c}),setTimeout(function(){r.monogramKey=Object(V.v4)(),r.loading=!1,r.setApplied(!1),r.clearPersonalization(),r.closeCustomizer(),document.body.classList.add("show-overlay"),document.querySelector(".cart-pop-up").classList.add("active","sticky")},1e3)},submit:function(e){e.preventDefault()}})},function(){var e,i,r,o,s,a=this,c=a._self._c;return c("div",{staticClass:"lg-settings"},[c("form",{on:{submit:function(e){return e.preventDefault(),a.submit.apply(null,arguments)}}},[c("div",{staticClass:"lg-settings__content"},[c("div",{staticClass:"lg-settings__header"},[c("span",{staticStyle:{display:"none"}},[a._v(" "+a._s(a.variantMaxCharSet))]),a._v(" "),c("p",{staticClass:"lg-settings__subtitle"},[a._v(a._s(null===(e=a.customizationMethod)||void 0===e?void 0:e.text_subtitle)+" "),a.addonVariant?c("span",[a._v("+$"+a._s(+a.addonVariant.price))]):a._e(),]),a._v(" "),c("h2",{staticClass:"product-title"},[a._v(a._s(a.productTitle))]),a._v(" "),c("div",{staticClass:"excerpt",domProps:{innerHTML:a._s(null===(i=a.customizationMethod)||void 0===i?void 0:i.header_description)}}),a._v(" "),c("hr"),]),a._v(" "),c("div",{staticClass:"lg-settings__body"},[a.monogramProperties.include_color?c("div",{staticClass:"lg-settings__colors"},[c("label",[a._v("Embroidery Color: "+a._s(a.activeColor.title))]),a._v(" "),c("div",{staticClass:"lg-settings__colors__list"},a._l(a.colors,function(e){return c("button",{key:e.id,staticClass:"lg-settings__color",class:{active:e.id===a.activeColor.id},attrs:{type:"button"},on:{click:function(i){return i.preventDefault(),a.setColor(e.id)}}},[c("span",{staticClass:"lg-settings__color__badge",style:{backgroundColor:e.hex_code}})])}),0),]):a._e(),a._v(" "),1<a.fonts.length?c("div",{staticClass:"lg-settings__fonts"},[c("label",[a._v("Font:")]),a._v(" "),c("div",{staticClass:"lg-settings__fonts__list"},a._l(a.fonts,function(e){return c("button",{key:e.id,staticClass:"lg-settings__font",class:{active:e.id===a.activeFont.id},attrs:{type:"button"},on:{click:function(i){return i.preventDefault(),a.setFont(e.id)}}},[c("span",{style:{fontFamily:e.title}},[a._v(a._s(e.title))])])}),0),]):a._e(),a._v(" "),a._l(a.frontLineSettings,function(e){return c("div",{key:e.id,staticClass:"lg-input-group"},[c("label",{staticClass:"lg-input-group__label",attrs:{for:"monogram-input-".concat(e.id)}},[a._v("\n            "+a._s(e.label)+"\n          ")]),a._v(" "),c("div",{staticClass:"lg-input__container"},[c("input",{staticClass:"lg-input-group__input",class:$({"lg-input-group__input__error":a.invalidTextLine(a.textLine(e))},"lg-input-group__input__error",a.textLine(e).length>a.maxChars(e)),attrs:{type:"text",placeholder:e.placeholder,id:"monogram-input-".concat(e.id),maxLength:a.maxChars(e),"data-index":e.text_line_index,"data-is-front":e.is_front_view},domProps:{value:a.textLine(e)},on:{input:function(e){return e.preventDefault(),a.setInput.apply(null,arguments)},keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.submit.apply(null,arguments)}}}),a._v(" "),c("span",{staticClass:"lg-input-group__suffix"},[a._v(a._s(a.textLine(e).length)+"/"+a._s(a.maxChars(e)))]),]),a._v(" "),a.lineWithSwearWord(a.textLine(e))?c("p",{staticClass:"lg-input-group__helptext",domProps:{innerHTML:a._s(a.swearWordMessage)}}):a._e(),a._v(" "),a.lineWithInvalidSymbol(a.textLine(e))?c("p",{staticClass:"lg-input-group__helptext",domProps:{innerHTML:a._s(a.invalidSymbolMessage)}}):a._e(),])}),a._v(" "),0<a.backSettings.length&&a.customizationMethod.allow_back_text_lines?c("div",{staticClass:"excerpt lg-input-back__description",domProps:{innerHTML:a._s(null===(r=a.customizationMethod)||void 0===r?void 0:r.back_description)}}):a._e(),a._v(" "),a._l(a.backSettings,function(e){return a.customizationMethod.allow_back_text_lines?c("div",{key:e.id,staticClass:"lg-input-group"},[c("label",{staticClass:"lg-input-group__label",attrs:{for:"monogram-input-".concat(e.id)}},[a._v("\n            "+a._s(e.label)+"\n          ")]),a._v(" "),c("div",{staticClass:"lg-input__container"},[c("input",{staticClass:"lg-input-group__input",class:$({"lg-input-group__input__error":a.invalidTextLine(a.textLine(e))},"lg-input-group__input__error",a.textLine(e).length>a.maxChars(e)),attrs:{type:"text",placeholder:e.placeholder,id:"monogram-input-".concat(e.id),maxLength:a.maxChars(e),"data-index":e.text_line_index,"data-is-front":e.is_front_view},domProps:{value:a.textLine(e)},on:{input:function(e){return e.preventDefault(),a.setInput.apply(null,arguments)},keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.submit.apply(null,arguments)}}}),a._v(" "),c("span",{staticClass:"lg-input-group__suffix"},[a._v(a._s(a.textLine(e).length)+"/"+a._s(a.maxChars(e)))]),]),a._v(" "),a.lineWithSwearWord(a.textLine(e))?c("p",{staticClass:"lg-input-group__helptext",domProps:{innerHTML:a._s(a.swearWordMessage)}}):a._e(),a._v(" "),a.lineWithInvalidSymbol(a.textLine(e))?c("p",{staticClass:"lg-input-group__helptext",domProps:{innerHTML:a._s(a.invalidSymbolMessage)}}):a._e(),]):a._e()}),],2),a._v(" "),c("div",{staticClass:"lg-settings__footer"},[c("div",{staticClass:"excerpt",domProps:{innerHTML:a._s(null===(o=a.customizationMethod)||void 0===o?void 0:o.footer_description)}}),]),a._v(" "),c("div",{staticClass:"lg-settings__actions"},[c("button",{staticClass:"btn btn--confirm",attrs:{type:"button",disabled:a.disabled||a.loading},on:{click:function(e){return e.preventDefault(),a.confirmEngraving.apply(null,arguments)}}},[a._v(a._s(this.disabled?null===(s=a.customizationMethod)||void 0===s?void 0:s.text_confirm_engraving:"Add to Cart"))]),]),]),]),])},[],!1,null,null,null).exports,X=m({computed:S({},Object(I.d)(["open"])),components:{CustomizerPreview:W,CustomizerSettings:H},methods:S({},Object(I.b)(["closeCustomizer"]))},function(){var e=this,i=e._self._c;return e.open?i("div",{staticClass:"lg-dialog__content",class:{active:e.open}},[i("div",{staticClass:"lg-dialog__overlay",on:{click:function(i){return i.preventDefault(),e.closeCustomizer.apply(null,arguments)}}}),e._v(" "),i("div",{staticClass:"lg-dialog"},[i("button",{staticClass:"lg-dialog__close",attrs:{type:"button"},on:{click:function(i){return i.preventDefault(),e.closeCustomizer.apply(null,arguments)}}},[e._v("\n      \xd7\n    ")]),e._v(" "),i("div",{staticClass:"lg-dialog__body"},[i("CustomizerPreview"),e._v(" "),i("CustomizerSettings")],1),]),]):e._e()},[],!1,null,null,null),G=m({name:"ProductCustomizer",components:{CustomizerModal:X.exports,CustomizerSettings:H,CustomizerPreview:W},data:function(){return{engravable:!1}},computed:k(k(k({},Object(I.d)(["loaded","open","applied","customizationMethod","activeFontId","addonVariant","fonts","colors","frontTextLines","backTextLines"])),Object(I.c)(["activeColor","activeFont","isEngraved"])),{},{buttonCTA:function(){var e,i;return this.applied?null===(e=this.customizationMethod)||void 0===e?void 0:e.text_edit_engraving:null===(i=this.customizationMethod)||void 0===i?void 0:i.text_init_engraving}}),watch:{customizationMethod:function(e){e&&(z()(".js-app")&&Object(Y.d)(z()(".js-app"),"lg-customizer--loaded"),e.is_required&&!this.applied&&Object(Y.d)(z()("button[data-add-to-cart]"),"lg-monogram-required"))},applied:function(e){this.customizationMethod.is_required&&(e?Object(Y.e)(z()("button[data-add-to-cart]"),"lg-monogram-required"):Object(Y.d)(z()("button[data-add-to-cart]"),"lg-monogram-required"))}},created:function(){var e=this,i=z()("[data-add-to-cart]");document.addEventListener("click",function(r){r.target.closest(".js-new-variant-swatch")&&(i.hasAttribute("disabled")?e.engravable=!1:e.engravable=!0)})},mounted:function(){var e=this;setTimeout(function(){z()("[data-add-to-cart]").hasAttribute("disabled")||(e.engravable=!0)},1500)},methods:k({},Object(I.b)(["openCustomizer"]))},function(){var e=this,i=e._self._c;return e.customizationMethod?i("div",{staticClass:"lg-customizer"},[i("button",{staticClass:"btn btn--outline btn--engraving",attrs:{type:"button",disabled:!e.engravable},on:{click:function(i){return i.preventDefault(),e.openCustomizer.apply(null,arguments)}}},[e._v(e._s(e.buttonCTA)+" "),e.addonVariant?i("span",[e._v("+$"+e._s(+e.addonVariant.price))]):e._e()]),e._v(" "),e.loaded?i("CustomizerModal",{attrs:{open:e.open}}):e._e(),],1):e._e()},[],!1,null,null,null).exports;r(23),document.addEventListener("DOMContentLoaded",function(){var e;z()(".js-app")&&(e=z()(".js-app"),new j.a({el:e,store:R,components:{ProductCustomizer:G},computed:A({},Object(I.d)(["fonts"])),mounted:function(){var e=this,i=this.$el.dataset,r=i.productId,o=i.variantId,s=i.productTitle;this.setProductTitle(s),this.setVariantId(o),this.fetchCustomizationOptions(r).then(function(){var i=document.createElement("style");i.setAttribute("type","text/css"),i.appendChild(document.createTextNode(e.fonts.map(function(e){return'\n            @font-face {\n              font-family: "'.concat(e.title,'";\n              src: url("').concat(e.url,"\") format('woff2');\n              font-display: swap;\n            }")}).join(""))),document.head.appendChild(i),document.querySelector(".product-prices-mobile")&&document.querySelector(".product-prices-mobile").remove()})},methods:A({},Object(I.b)(["fetchCustomizationOptions","setProductTitle","setVariantId"]))}))})},function(){},]);