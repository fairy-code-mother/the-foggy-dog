{% include 'saw_variant_variables' %}
{%- assign my_tag = product.handle | prepend: 'like-' -%}
<div id="app-product" data-product-tag="{{my_tag}}" data-variant="{{ product.product.selected_or_first_available_variant.price }}">
{% section 'product-pre-order-template' %}
{% section 'feel-good' %}
{% include 'related-products' %}
<div class="reviews">
  <div class="page-width">
    <h2>Reviews</h2>
    {% include 'judgeme_widgets', widget_type: 'judgeme_review_widget', concierge_install: false %}
  </div>
</div>
  
<div id="chart-pop" class="product-pop">
{% for collection in product.collections %} 
  {% if collection.handle == 'dog-bandanas' %}
  {% section 'size-chart-dog-bandana' %}
  {% endif %}
  {% if collection.handle == 'dog-bow-tie-collars' %}
  {% section 'size-chart-dog-collar' %}
  {% endif %}
  {% if collection.handle == 'dog-collars' %}
  {% section 'size-chart-dog-collar' %}
  {% endif %}
  {% if collection.handle == 'dog-beds' %}
  {% section 'size-chart-dog-bed' %}
  {% endif %}
  {% if collection.handle == 'dog-harness' %}
  {% section 'size-chart-dog-harness' %} 
  {% endif %}
    {% if collection.handle == 'scrunchie-and-bandana-set' %}
  {% section 'size-chart-dog-bandana' %}
  {% endif %}
   {% if collection.handle == 'lady-bow-collar' %}
  {% section 'size-chart-dog-collar' %}
  {% endif %}
  {% if collection.handle == 'wear-sets' %}
  {% section 'size-chart-dog-bandana' %}
  {% endif %}
    {% if collection.handle == 'walk-sets' %}
  {% section 'size-chart-dog-collar' %}
  {% endif %}
{% endfor %}  
</div>
  
<div id="insert-pop" class="product-pop">
{% section 'dog-bed-fill-options' %}
</div>

<div id="shelter-pop" class="product-pop shelter-dog-pop">
{% section 'every-order' %}
</div>

<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script>
var app = new Vue({
  delimiters: ['${', '}'],
  el: '#app-product',
  data: {
    relateProd: [],
    product_id: null
  },
  methods: {
      addCart: function(e) {
        this.product_id = document.querySelector('select[name=id]').value;
        var qty = parseInt(document.getElementById("Quantity").value);
        
        CartJS.addItem(this.product_id, 1, {},{

        // Define a success callback to display a success message.
        "success": function(data, textStatus, jqXHR) {
          EventBus.$emit('CART_UPDATE', textStatus);
        },

        // Define an error callback to display an error message.
        "error": function(jqXHR, textStatus, errorThrown) {
          $('#message').addClass('message-error');
          $('#message').html('There was a problem adding to the cart!');
        }

        })
        // axios.post('/cart/add.js', {
        //   quantity: 1,
        //   id: this.product_id
        // })
        // .then((response) => {
        //   EventBus.$emit('CART_UPDATE', response);
        // })
        // .catch((error) => {
        //   console.log(error);
        // });
      }
    }
  }); 

  	const accItem = document.querySelectorAll('.accordionItem');
    const accHD = document.querySelectorAll('.accordion-title');
    for (i = 0; i < accHD.length; i++) {
        accHD[i].addEventListener('click', toggleItem, false);
    }
    function toggleItem() {

        let itemClass = this.parentNode.className;

        if (itemClass == 'item close') {
            this.parentNode.className = 'item open';
        }
        if (itemClass == 'item open') {
            this.parentNode.className = 'item close';
        }
    }
</script>
  
<script>
  
  document.addEventListener('DOMContentLoaded', function() {
    if($('.new-variant-swatch.js-new-variant-swatch.is-active').length === 0){  
      console.log('Hide button');
      var sInd = 0;
      var findPre = setInterval(function (){
        if($('.spurit-po-wrapper').length !== 0){
          $('.spurit-po-wrapper').hide()
          $('.spo-container').removeClass('spurit-hidden')
          clearInterval(findPre);
        }
        sInd++;
        if(sInd > 50){ //5 sec
          clearInterval(findPre);
        }
      },100);         
    }
  }, false);


</script>  
  
<script type="application/ld+json">
{
  "@context": "http://schema.org/",
  "@type": "Product",
  "name": "{{ product.title | escape }}",
  "url": "{{ shop.url }}{{ product.url }}",
  {% if product.featured_image %}
    {% assign image_size = product.featured_image.width | append: 'x' %}
    "image": [
      "https:{{ product.featured_image.src | img_url: image_size }}"
    ],
  {% endif %}
  "description": "{{ product.description | strip_html | strip_newlines | strip | escape }}",
  {% if current_variant.sku != blank %}
    "sku": "{{ current_variant.sku }}",
  {% endif %}
  "brand": {
    "@type": "Thing",
    "name": "{{ product.vendor | escape }}"
  },
  {% if product.variants %}
    "offers": [
      {% for variant in product.variants %}
        {
          "@type" : "Offer",
          "availability" : "http://schema.org/{% if product.available %}InStock{% else %}OutOfStock{% endif %}",
          "price" : "{{ variant.price | divided_by: 100.00 }}",
          "priceCurrency" : "{{ shop.currency }}",
          "url" : "{{ shop.url }}{{ variant.url }}",
          "itemOffered" :
          {
              "@type" : "Product",
              {% if variant.image %}
                {% assign variant_image_size = variant.image.width | append: 'x' %}
                "image": "http:{{ variant.image.src | img_url: variant_image_size }}",
              {% endif %}
              {% if variant.title != blank %}
                "name" : "{{ variant.title | escape }}",
              {% endif %}
              {% if variant.sku != blank %}
                "sku": "{{ variant.sku }}",
              {% endif %}
              {% if variant.weight > 0 %}
                "weight": {
                  "@type": "QuantitativeValue",
                  {% if variant.weight_unit != blank %}
                    "unitCode": "{{ variant.weight_unit }}",
                  {% endif %}
                  "value": "{{ variant.weight | weight_with_unit: variant.weight_unit }}"
                },
              {% endif %}
              "url": "{{ shop.url }}{{ variant.url }}"
          }
        }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ]
  {% endif %}
}
</script>
 