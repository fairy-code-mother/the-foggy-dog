{% if section.settings.link != blank or collection.metafields.feature.link %}
<a href="{{ collection.metafields.feature.link | default: section.settings.link }}">
{% endif %}
{% if section.settings.image != blank %}
  <img class="lazyload" 
       data-src="{{ collection.metafields.feature.image | default: section.settings.image | img_url: '300x' }}" 
       data-srcset="{{ collection.metafields.feature.image | default: section.settings.image | img_url: '300x' }} 1x, {{ collection.metafields.feature.image | default: section.settings.image | img_url: '300x', scale: 2 }} 2x" 
       alt="{{ collection.metafields.feature.image.alt | default: section.settings.image.alt }}"
       height="270"
       width="330"
       style="height: auto">
{% endif %}
{% if section.settings.link != blank %}
</a>
{% endif %}

{% schema %}
  {
    "name": "Collection Feature",
    "settings": [
      {
        "type": "image_picker",
        "id": "image",
        "label": "Collection feature - fallback image",
        "info": "Used if a dynamic image is not present"
      },
      {
        "type": "url",
        "id": "link",
        "label": "Collection feature - fallback link",
        "info": "Used if a dynamic link is not present"
      }
    ]
  }
{% endschema %}